<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Interactivo - AZ-104</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        html { background-color: #f3f4f6; color: #1f2937; }
        html.dark { background-color: #111827; color: #f9fafb; }
        .option-btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .correct { background-color: #16a34a !important; border-color: #16a34a !important; color: white !important; }
        .incorrect { background-color: #dc2626 !important; border-color: #dc2626 !important; color: white !important; }
        .selected { border-color: #2563eb; background-color: #dbeafe; }
        .dark .selected { background-color: #1e3a8a; }
        .feedback { max-height: 0; overflow: hidden; transition: max-height 0.6s cubic-bezier(0.4,0,0.2,1), padding 0.6s cubic-bezier(0.4,0,0.2,1), opacity 0.4s, transform 0.4s; opacity: 0; transform: translateY(-10px); }
        .feedback.show { max-height: 300px; padding-top: 1.5rem; padding-bottom: 1.5rem; opacity: 1; transform: translateY(0); }
        .nav-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .marked { color: #f59e0b; }
        .modal-overlay { transition: opacity 0.3s; }
        .modal-container { transition: transform 0.3s; }
        .progress-bar-container { width: 100%; height: 1.25rem; background-color: #e5e7eb; border-radius: 0.5rem; overflow: hidden; }
        .dark .progress-bar-container { background-color: #374151; }
        .progress-bar { height: 100%; background-color: #2563eb; transition: width 0.4s; text-align: center; color: white; font-weight: bold; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; }
        .category-progress { background-color: #dbeafe; border-radius: 0.5rem; overflow: hidden; }
        .dark .category-progress { background-color: #1e40af; }
        .category-progress-bar { height: 100%; transition: width 0.5s; text-align: right; padding-right: 0.5rem; color: white; font-weight: 500; font-size: 0.9rem; }
        @keyframes fade-in { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .animate-fade-in { animation: fade-in 0.4s ease; }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .case-study-card { transition: all 0.3s; }
        .case-study-card:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .case-study-card.added { opacity: 0.5; pointer-events: none; background-color: #f0fdf4; }
        .dark .case-study-card.added { background-color: #064e3b; }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8">
    <!-- Seccion de login -->
    <div id="login-section" style="text-align:center; margin-top:40px;">
      <div style="font-weight:bold; color:#b91c1c; font-size:1.3em; margin-bottom:20px;">&lt;&lt;&lt;&lt; Acceso Restringido &gt;&gt;&gt;&gt;</div>
      <button onclick="loginGoogle()" style="padding:10px 20px; font-size:1.2em; background:#2563eb; color:white; border-radius:8px;">Iniciar sesion con Google</button>
    </div>
    
    <!-- Panel de Administracion (solo para owner) -->
    <div id="admin-panel" class="hidden max-w-4xl mx-auto mt-8 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg">
      <h2 class="text-2xl font-bold mb-6 text-blue-600 dark:text-blue-400">Panel de Administracion</h2>
      
      <div class="mb-6">
        <h3 class="text-lg font-semibold mb-3">Agregar Usuario Autorizado</h3>
        <div class="flex gap-3">
          <input type="email" id="new-user-email" placeholder="Email del usuario" 
                 class="flex-1 px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600">
          <button onclick="addAuthorizedUser()" 
                  class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">
            Agregar
          </button>
        </div>
      </div>
      
      <div>
        <h3 class="text-lg font-semibold mb-3">Usuarios Autorizados</h3>
        <div id="authorized-users-list" class="space-y-2">
          <!-- Lista de usuarios se cargara aqui -->
        </div>
      </div>
    </div>
    <!-- Modal de seleccion de tipo de preguntas -->
    <div id="quantity-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 hidden">
      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md p-10 animate-fade-in text-center">
        <h2 class="text-2xl font-bold mb-6 text-blue-700 dark:text-blue-300">Selecciona el tipo de preguntas</h2>
        <div id="quantity-buttons" class="flex flex-col gap-4 justify-center mb-6">
          <div class="border-b pb-4 mb-4">
            <h3 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">Preguntas de Teoria</h3>
            <div class="grid grid-cols-2 gap-3">
              <button data-type="theory" data-quantity="10" class="bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-all text-sm shadow-md">10 preguntas</button>
              <button data-type="theory" data-quantity="30" class="bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-all text-sm shadow-md">30 preguntas</button>
              <button data-type="theory" data-quantity="60" class="bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-all text-sm shadow-md">60 preguntas</button>
              <button data-type="theory" data-quantity="100" class="bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-all text-sm shadow-md">100 preguntas</button>
            </div>
          </div>
          <div class="border-t pt-4">
            <h3 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">Preguntas Tipo Examen</h3>
            <div class="grid grid-cols-2 gap-3">
              <button data-type="exam" data-quantity="10" class="bg-green-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-700 transition-all text-sm shadow-md">10 preguntas</button>
              <button data-type="exam" data-quantity="30" class="bg-green-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-700 transition-all text-sm shadow-md">30 preguntas</button>
              <button data-type="exam" data-quantity="60" class="bg-green-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-700 transition-all text-sm shadow-md">60 preguntas</button>
              <button data-type="exam" data-quantity="100" class="bg-green-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-700 transition-all text-sm shadow-md">100 preguntas</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- El test (main-quiz-content) ya existe, solo debe estar oculto si no hay usuario -->
    <div class="max-w-4xl mx-auto hidden" id="main-quiz-content">
        <header class="mb-8">
             <div class="flex justify-between items-center mb-4">
                <div class="flex items-center gap-4">
                    <img src="https://i.postimg.cc/T3YGBCsY/Screenshot-1.png" alt="Microsoft Certified Associate" class="w-16 h-16 rounded-lg shadow-md">
                    <div>
                        <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold text-blue-600 dark:text-blue-400">Test Certificacion AZ-104</h1>
                        <p id="question-category" class="text-sm text-gray-500 dark:text-gray-400 font-medium"></p>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <button id="theme-toggle-btn" class="bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 p-2 rounded-full shadow-md w-10 h-10 flex items-center justify-center">
                        <i class="fas fa-adjust"></i>
                    </button>
                    <button id="logout-btn" onclick="logout()" class="hidden bg-red-500 hover:bg-red-600 text-white p-2 rounded-full shadow-md w-10 h-10 flex items-center justify-center transition-all" title="Cerrar Sesión">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                    <button id="view-btn" onclick="toggleViewModal()" class="bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50">
                        <i class="fas fa-list-check"></i> Visualizar
                    </button>
                </div>
            </div>
             <div class="progress-bar-container">
                <div id="progress-bar" class="progress-bar" style="width: 0%;"></div>
            </div>
            <p id="progress-text" class="mt-2 text-md text-gray-600 dark:text-gray-300 text-center">Pregunta 1 de 100</p>
        </header>

        <div id="quiz-container">
            <!-- Las preguntas se cargaran aqui -->
        </div>

        <div id="navigation-controls" class="mt-6 flex justify-between items-center">
             <button id="prev-btn" onclick="prevQuestion()" class="nav-btn bg-gray-600 text-white font-semibold py-2 px-5 rounded-lg shadow-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50 transition-transform transform hover:scale-105">
                Anterior
            </button>
            <div class="flex items-center gap-4">
                 <button id="check-btn" onclick="checkAnswer()" class="nav-btn bg-green-600 text-white font-semibold py-2 px-5 rounded-lg shadow-md hover:bg-green-700 disabled:bg-green-400">
                    Comprobar
                </button>
                <button id="next-btn" onclick="nextQuestion()" class="nav-btn bg-blue-600 text-white font-semibold py-2 px-5 rounded-lg shadow-md hover:bg-blue-700 disabled:bg-blue-400">
                    Siguiente
                </button>
            </div>
        </div>

        <div id="result-container" class="hidden text-center mt-8 p-8 bg-white dark:bg-gray-800 rounded-xl shadow-lg">
            <h2 class="text-2xl font-bold mb-4">!Test Terminado!</h2>
            <div id="result-details" class="text-lg mb-4"></div>
            <p id="score-percentage" class="text-4xl font-bold mb-2"></p>
            <p id="result-message" class="text-2xl font-semibold mb-6"></p>
            
            <!-- Contenedor para los resultados por categoria -->
            <div id="category-results-container" class="mt-8 text-left">
                <h3 class="text-xl font-bold mb-4 text-center">Desglose por Irea de Aptitud</h3>
                <div id="category-results" class="space-y-4">
                    <!-- Los resultados por categoria se insertaran aqui -->
                </div>
            </div>

            <div class="flex flex-col sm:flex-row justify-center gap-4 mt-8">
                <button onclick="restartGame()" class="bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-transform transform hover:scale-105">
                    <i class="fas fa-redo"></i> Volver a Jugar
                </button>
                 <button onclick="startReview()" class="bg-purple-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 transition-transform transform hover:scale-105">
                    <i class="fas fa-search"></i> Revisar Test
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Visualizacion (Ver Resumen) -->
    <div id="view-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-40" role="dialog" aria-modal="true" aria-labelledby="view-modal-title">
        <div class="modal-container bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg max-h-full overflow-y-auto p-6 transform scale-95">
             <div class="flex justify-between items-center border-b pb-3 mb-3 dark:border-gray-600">
                 <h3 id="view-modal-title" class="text-xl font-semibold">Resumen del Test</h3>
                 <button onclick="toggleViewModal()" class="text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 text-2xl" aria-label="Cerrar resumen">&times;</button>
            </div>
            <div id="summary-lists" class="space-y-4">
                <!-- Las listas se generan dinamicamente -->
            </div>
            <div class="mt-6 pt-4 border-t dark:border-gray-600 text-center">
                 <button onclick="confirmFinishTest()" class="w-full bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50" aria-label="Finalizar test">
                    Finalizar Test
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal de Confirmacion -->
    <div id="confirm-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 hidden z-50" role="dialog" aria-modal="true" aria-labelledby="confirm-title">
        <div class="modal-container bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm p-6 transform scale-95 text-center">
            <h3 id="confirm-title" class="text-lg font-semibold mb-4">?Finalizar Test?</h3>
            <p id="confirm-message" class="mb-6 text-gray-600 dark:text-gray-300">Hay preguntas sin contestar? Estas seguro?</p>
            <div class="flex justify-center gap-4">
                <button onclick="handleFinishConfirmation(false)" class="bg-gray-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-gray-600" aria-label="Cancelar finalizacion">Cancelar</button>
                <button onclick="handleFinishConfirmation(true)" class="bg-red-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-red-700" aria-label="Confirmar finalizacion">Finalizar</button>
            </div>
        </div>
    </div>


    <script>
        // --- DATA ---
        const C = {
            ID_GOV: "Administracion de identidades y gobernanza en Azure",
            STORAGE: "Implementacion y administracion del almacenamiento",
            COMPUTE: "Implementacion y administracion de recursos de computo de Azure",
            NETWORK: "Implementacion y administracion de redes virtuales",
            MONITOR: "Supervision y mantenimiento de recursos de Azure"
        };

        const originalQuizData = [
            // Modulo 1: Identidades y Gobernanza (20 preguntas)
            { type: 'theory', question: "1. Necesitas asegurarte de que los nuevos recursos de almacenamiento creados en un grupo de recursos especifico no permitan el acceso publicoQue herramienta de Azure deberias usar?", options: ["Azure Advisor", "Azure Policy", "Control de Acceso Basado en Roles (RBAC)", "Microsoft Defender for Cloud"], answer: "Azure Policy", comment: "Azure Policy se utiliza para crear, asignar y administrar directivas que aplican reglas y efectos sobre los recursos, garantizando que cumplan con los estandares corporativos.", category: C.ID_GOV, subtopic: "Implementacion y administracion de Azure Policy" },
            { question: "2. Un nuevo empleado necesita permisos para crear y administrar maquinas virtuales en un grupo de recursos especifico, pero no debe tener permisos sobre otros tipos de recursosQue rol RBAC deberias asignarle?", options: ["Propietario (Owner)", "Colaborador (Contributor)", "Colaborador de la maquina virtual (Virtual Machine Contributor)", "Lector (Reader)"], answer: "Colaborador de la maquina virtual (Virtual Machine Contributor)", comment: "El rol de 'Colaborador de la maquina virtual' proporciona los permisos necesarios para administrar VMs, pero no otros recursos, siguiendo el principio de privilegios minimos.", category: C.ID_GOV, subtopic: "Administracion de roles de Azure integrados" },
            { question: "3. Cual es el proposito principal de los Grupos de Administracion de Azure (Management Groups)?", options: ["Agrupar maquinas virtuales para balanceo de carga.", "Aplicar politicas y control de acceso a multiples suscripciones.", "Organizar recursos dentro de una suscripcion.", "Sincronizar identidades con un Active Directory local."], answer: "Aplicar politicas y control de acceso a multiples suscripciones.", comment: "Los grupos de administracion son un nivel de ambito por encima de las suscripciones, disenados para gestionar de forma eficiente el acceso y las directivas en un conjunto de suscripciones.", category: C.ID_GOV, subtopic: "Configuracion de grupos de administracion" },
            { question: "4. Quieres proteger una maquina virtual critica para que no sea eliminada accidentalmente? Que accion debes realizar?", options: ["Asignar una directiva de Azure Deny.", "Aplicar un bloqueo de recursos (Resource Lock) de tipo `CanNotDelete`.", "Quitar el rol de Colaborador a todos los usuarios.", "Habilitar la autenticacion multifactor (MFA) para la suscripcion."], answer: "Aplicar un bloqueo de recursos (Resource Lock) de tipo `CanNotDelete`.", comment: "Los bloqueos de recursos se utilizan para evitar que los usuarios autorizados eliminen o modifiquen accidentalmente recursos criticos.", category: C.ID_GOV, subtopic: "Configuracion de bloqueos de recursos" },
            { question: "5. Que servicio de Azure AD permite a los usuarios restablecer sus propias contrasenas sin la intervencion del soporte tecnico?", options: ["Azure AD Identity Protection", "Acceso Condicional (Conditional Access)", "Restablecimiento de contrasena de autoservicio (SSPR)", "Azure AD Privileged Identity Management (PIM)"], answer: "Restablecimiento de contrasena de autoservicio (SSPR)", comment: "SSPR es una caracteristica de Azure AD que permite a los usuarios cambiar o restablecer su contrasena, reduciendo la carga de trabajo del departamento de TI.", category: C.ID_GOV, subtopic: "Configuracion del autoservicio de restablecimiento de contrasena (SSPR)" },
            { question: "6. Que es Azure AD Connect?", options: ["Un servicio para conectar redes virtuales entre si.", "Una herramienta para sincronizar identidades de un Active Directory local con Azure AD.", "Un conector para servicios de almacenamiento de terceros.", "Una API para gestionar recursos de Azure mediante programacion."], answer: "Una herramienta para sincronizar identidades de un Active Directory local con Azure AD.", comment: "Azure AD Connect es la herramienta de Microsoft disenada para cumplir los objetivos de identidad hibrida, incluida la sincronizacion de hash de contrasenas y la federacion.", category: C.ID_GOV },
            { question: "7. Necesitas otorgar a un consultor externo acceso temporal a un rol privilegiado como 'Administrador Global'Que servicio de Azure AD es el mas adecuado?", options: ["Azure AD B2C", "Azure AD Domain Services", "Azure AD Privileged Identity Management (PIM)", "Asignaciones de roles RBAC estandar."], answer: "Azure AD Privileged Identity Management (PIM)", comment: "PIM es un servicio que permite la administracion, el control y la supervision del acceso just-in-time (JIT) a recursos importantes en Azure AD.", category: C.ID_GOV },
            { question: "8. Cual es el ambito de una asignacion de Azure Policy?", options: ["Solo a nivel de Grupo de Recursos.", "Solo a nivel de Suscripcion.", "A nivel de Grupo de Administracion, Suscripcion o Grupo de Recursos.", "Solo a nivel de Tenant de Azure AD."], answer: "A nivel de Grupo de Administracion, Suscripcion o Grupo de Recursos.", comment: "Las directivas se pueden asignar en diferentes niveles de la jerarquia de Azure para proporcionar una gobernanza granular o amplia.", category: C.ID_GOV },
            { question: "9. Para que se utiliza el etiquetado (tagging) de recursos en Azure?", options: ["Para aplicar reglas de seguridad a los recursos.", "Para organizar los recursos con fines de facturacion y administracion.", "Para cifrar los datos de los recursos.", "Para conectar recursos a una red virtual."], answer: "Para organizar los recursos con fines de facturacion y administracion.", comment: "Las etiquetas son pares de metadatos (clave-valor) que permiten organizar logicamente los recursos, lo que facilita la gestion de costos y la administracion.", category: C.ID_GOV },
            { question: "10. Que es una directiva de Acceso Condicional (Conditional Access) en Azure AD?", options: ["Una regla que bloquea el acceso a todos los recursos de Azure.", "Una herramienta para analizar los costos de los recursos.", "Una regla 'if-then' que evalua senales (usuario, ubicacion, etc.) para permitir, bloquear o requerir acciones adicionales (MFA) para acceder a los recursos.", "Una directiva que define los tamanos de VM permitidos."], answer: "Una regla 'if-then' que evalua senales (usuario, ubicacion, etc.) para permitir, bloquear o requerir acciones adicionales (MFA) para acceder a los recursos.", comment: "El Acceso Condicional es el corazon del plano de control de identidades de Microsoft, permitiendo una seguridad granular y automatizada.", category: C.ID_GOV },
            { question: "51. Que es una plantilla de Azure Resource Manager (ARM)?", options: ["Un script de PowerShell para implementar recursos.", "Un archivo JSON que define uno o mas recursos para implementar.", "Una imagen de maquina virtual preconfigurada.", "Un panel de control de Azure predefinido."], answer: "Un archivo JSON que define uno o mas recursos para implementar.", comment: "Las plantillas ARM permiten la implementacion declarativa y repetible de la infraestructura de Azure, una practica clave de la Infraestructura como Codigo (IaC).", category: C.ID_GOV },
            { question: "52. Estas configurando una VPN de sitio a sitio? Que recurso representa tu dispositivo VPN local en Azure?", options: ["Puerta de enlace de red virtual (Virtual Network Gateway).", "Conexion (Connection).", "Puerta de enlace de red local (Local Network Gateway).", "Circuito ExpressRoute."], answer: "Puerta de enlace de red local (Local Network Gateway).", comment: "La puerta de enlace de red local es un objeto en Azure que representa tu dispositivo VPN fisico en tu red local.", category: C.NETWORK },
            { question: "56. Que es una Zona DNS Privada (Private DNS Zone) en Azure?", options: ["Una zona DNS que solo se puede administrar desde una red local.", "Un servicio que proporciona resolucion de nombres dentro de una red virtual y entre redes virtuales.", "Una zona DNS que esta protegida por Azure Firewall.", "Un alias para una zona DNS publica."], answer: "Un servicio que proporciona resolucion de nombres dentro de una red virtual y entre redes virtuales.", comment: "Las zonas DNS privadas permiten usar tus propios nombres de dominio personalizados en lugar de los nombres proporcionados por Azure.", category: C.NETWORK },
            { question: "57. Que tipo de identidad administrada (Managed Identity) esta vinculada al ciclo de vida de un recurso de Azure especifico, como una VM?", options: ["Asignada por el sistema (System-assigned).", "Asignada por el usuario (User-assigned).", "Asignada por el servicio (Service-assigned).", "Asignada por el grupo (Group-assigned)."], answer: "Asignada por el sistema (System-assigned).", comment: "Una identidad administrada asignada por el sistema se crea y se elimina junto con el recurso de Azure al que esta asociada.", category: C.ID_GOV },
            { question: "67. Que rol de Azure AD se necesita como minimo para crear y administrar casos de soporte tecnico de Azure?", options: ["Administrador Global", "Propietario de la suscripcion", "Administrador de Soporte Tecnico", "Cualquier usuario autenticado puede crear un ticket de soporte."], answer: "Administrador de Soporte Tecnico", comment: "El rol de Administrador de Soporte Tecnico (o un rol con el permiso `Microsoft.Support/supportTickets/write`) es necesario para abrir y gestionar solicitudes de soporte.", category: C.ID_GOV },
            { question: "72. Que tipo de cuenta de Azure AD se utiliza para aplicaciones que necesitan acceder a recursos de Azure sin la intervencion de un usuario?", options: ["Cuenta de usuario", "Cuenta de invitado", "Entidad de servicio (Service Principal)", "Grupo"], answer: "Entidad de servicio (Service Principal)", comment: "Una entidad de servicio es una identidad que se crea para que la usen aplicaciones, servicios hospedados y herramientas automatizadas para acceder a los recursos de Azure.", category: C.ID_GOV },
            { question: "80. Cual es el proposito de Azure Key Vault?", options: ["Almacenar copias de seguridad de maquinas virtuales.", "Almacenar y administrar de forma segura secretos, claves y certificados.", "Almacenar archivos de registro de diagnostico.", "Almacenar imagenes de Docker."], answer: "Almacenar y administrar de forma segura secretos, claves y certificados.", comment: "Key Vault ayuda a controlar los secretos de las aplicaciones al mantenerlos en una ubicacion centralizada y proporcionar un acceso seguro.", category: C.ID_GOV },
            { question: "84. Que es el 'acceso entre tenants' en Azure AD B2B?", options: ["La capacidad de un usuario de acceder a recursos en su propio tenant.", "La configuracion que controla como colaboran los usuarios de otros tenants contigo y como tus usuarios colaboran con otros tenants.", "Una conexion VPN entre dos tenants.", "La sincronizacion de todos los usuarios entre dos tenants."], answer: "La configuracion que controla como colaboran los usuarios de otros tenants contigo y como tus usuarios colaboran con otros tenants.", comment: "Permite una colaboracion segura y granular con organizaciones externas al definir que tenants estan permitidos y que nivel de acceso tienen.", category: C.ID_GOV },
            { question: "89. Que es una 'iniciativa' en Azure Policy?", options: ["Una unica regla de directiva.", "Una coleccion de definiciones de directivas que se agrupan para lograr un objetivo general.", "Una exencion a una directiva.", "El registro de cumplimiento de una directiva."], answer: "Una coleccion de definiciones de directivas que se agrupan para lograr un objetivo general.", comment: "Las iniciativas simplifican la gestion de directivas al permitirte asignar un grupo de directivas relacionadas como una sola entidad.", category: C.ID_GOV, subtopic: "Implementacion y administracion de iniciativas en Azure Policy" },
            { question: "96. Que es una 'zona de aterrizaje' (Landing Zone) de Azure?", options: ["Una region de Azure especifica para nuevos clientes.", "Un entorno de Azure preparado para alojar cargas de trabajo, siguiendo las mejores practicas de gobernanza, seguridad y operaciones.", "Una red virtual preconfigurada.", "Una suscripcion de Azure con recursos de ejemplo."], answer: "Un entorno de Azure preparado para alojar cargas de trabajo, siguiendo las mejores practicas de gobernanza, seguridad y operaciones.", comment: "Las zonas de aterrizaje son el resultado de una arquitectura de escala empresarial y proporcionan una base solida para construir y migrar aplicaciones a Azure.", category: C.ID_GOV },

            // Modulo 2: Almacenamiento (20 preguntas)
            { question: "11. Que tipo de cuenta de almacenamiento de Azure ofrece el nivel de rendimiento mas alto para cargas de trabajo de baja latencia?", options: ["General-purpose v2", "General-purpose v1", "BlockBlobStorage", "Premium Block Blobs"], answer: "Premium Block Blobs", comment: "Las cuentas de almacenamiento Premium utilizan SSD y estan optimizadas para cargas de trabajo que requieren tasas de transaccion muy altas y baja latencia.", category: C.STORAGE },
            { question: "12. Necesitas almacenar 2 TB de archivos que seran compartidos entre varias VMs de Azure usando el protocolo SMBQue servicio de almacenamiento deberias usar?", options: ["Azure Blob Storage", "Azure Files", "Azure Disk Storage", "Azure Table Storage"], answer: "Azure Files", comment: "Azure Files ofrece recursos compartidos de archivos totalmente administrados en la nube a los que se puede acceder a traves de los protocolos estandar SMB y NFS.", category: C.STORAGE },
            { question: "13. Que es la Replicacion con redundancia de zona (ZRS)?", options: ["Replica los datos en tres centros de datos dentro de una region.", "Replica los datos en tres zonas de disponibilidad dentro de una region.", "Replica los datos a una region secundaria.", "Crea 3 copias de los datos en un unico centro de datos."], answer: "Replica los datos en tres zonas de disponibilidad dentro de una region.", comment: "ZRS ofrece alta disponibilidad al replicar los datos en tres zonas de disponibilidad distintas dentro de la misma region.", category: C.STORAGE },
            { question: "14. Para que se utiliza una Firma de Acceso Compartido (SAS)?", options: ["Para cifrar los datos en una cuenta de almacenamiento.", "Para proporcionar acceso delegado y granular a los recursos de una cuenta de almacenamiento.", "Para conectar una cuenta de almacenamiento a una red virtual.", "Para sincronizar datos entre dos cuentas de almacenamiento."], answer: "Para proporcionar acceso delegado y granular a los recursos de una cuenta de almacenamiento.", comment: "Una SAS proporciona a los clientes un acceso seguro y delegado a los recursos de la cuenta de almacenamiento, especificando permisos y tiempo de validez.", category: C.STORAGE },
            { question: "15. Estas configurando Azure File Sync. Que componente se instala en tu servidor de archivos de Windows Server local?", options: ["El agente de Azure Monitor.", "El agente de Azure Arc.", "El agente de Azure File Sync.", "El cliente de Azure AD Connect."], answer: "El agente de Azure File Sync.", comment: "El agente de Azure File Sync es un paquete descargable que se instala en un Windows Server para habilitar la sincronizacion con un recurso compartido de archivos de Azure.", category: C.STORAGE },
            { question: "16. Que nivel de acceso de Blob Storage es el mas economico para datos a los que se accede con poca frecuencia y con horas de latencia de recuperacion?", options: ["Premium", "Frecuente (Hot)", "Esporadico (Cool)", "Archivo (Archive)"], answer: "Archivo (Archive)", comment: "El nivel de Archivo esta optimizado para almacenar datos que rara vez se acceden, ofreciendo el costo de almacenamiento mas bajo.", category: C.STORAGE },
            { question: "17. Necesitas copiar una gran cantidad de datos desde un centro de datos local a Azure Blob Storage rapidamente, pero tu conexion a Internet es lentaQue servicio deberias considerar?", options: ["AzCopy", "Azure Storage Explorer", "Azure Data Box", "Azure File Sync"], answer: "Azure Data Box", comment: "Azure Data Box es un dispositivo fisico que Microsoft te envia para cargar datos localmente y enviarlo de vuelta, evitando las limitaciones del ancho de banda.", category: C.STORAGE },
            { question: "18. Que caracteristica de Azure Storage permite montar un contenedor de blobs como un sistema de archivos en una maquina Linux?", options: ["BlobFuse", "Azure File Sync", "SMB 3.0", "NFS v4.1"], answer: "BlobFuse", comment: "BlobFuse es un controlador de sistema de archivos virtual para Azure Blob Storage que permite acceder a los datos de blobs a traves del sistema de archivos de Linux.", category: C.STORAGE },
            { question: "19. Como puedes restringir el acceso a una cuenta de almacenamiento para que solo sea accesible desde una red virtual especifica?", options: ["Usando una Firma de Acceso Compartido (SAS).", "Configurando un Punto de Conexion de Servicio o un Punto de Conexion Privado.", "Asignando un rol RBAC de 'Lector de Red'.", "Creando una regla de entrada en un Grupo de Seguridad de Red (NSG)."], answer: "Configurando un Punto de Conexion de Servicio o un Punto de Conexion Privado.", comment: "Los puntos de conexion de servicio y privados son los mecanismos para asegurar el trafico a los servicios de Azure directamente desde una red virtual.", category: C.STORAGE },
            { question: "20. Que utilidad de linea de comandos esta optimizada para copiar datos hacia y desde Azure Blob y File Storage?", options: ["bcp", "robocopy", "AzCopy", "scp"], answer: "AzCopy", comment: "AzCopy es una utilidad de linea de comandos disenada para transferencias de datos de alto rendimiento hacia y desde Azure Storage.", category: C.STORAGE, subtopic: "Administracion de datos mediante AzCopy" },
            { question: "61. Que politica de ciclo de vida de almacenamiento podrias aplicar para mover automaticamente blobs no modificados en 30 dias del nivel Frecuente al Esporadico?", options: ["Una regla que se activa por la fecha de creacion.", "Una regla con la accion `tierToCool` y una condicion `daysAfterModificationGreaterThan` en 30.", "Una regla que elimina los blobs despues de 30 dias.", "Una regla de Azure Backup."], answer: "Una regla con la accion `tierToCool` y una condicion `daysAfterModificationGreaterThan` en 30.", comment: "Las politicas de administracion del ciclo de vida te permiten automatizar la transicion de datos a niveles de almacenamiento mas economicos.", category: C.STORAGE },
            { question: "68. Cual es la principal ventaja de usar discos administrados (Managed Disks) en lugar de discos no administrados?", options: ["Son mas baratos.", "Azure gestiona las cuentas de almacenamiento, eliminando la complejidad y proporcionando mejor escalabilidad.", "Tienen un rendimiento mas rapido por defecto.", "Se pueden adjuntar a mas VMs simultaneamente."], answer: "Azure gestiona las cuentas de almacenamiento, eliminando la complejidad y proporcionando mejor escalabilidad.", comment: "Los discos administrados simplifican enormemente la gestion de discos al abstraer la complejidad de las cuentas de almacenamiento.", category: C.COMPUTE, subtopic: "Administracion de discos de maquinas virtuales" },
            { question: "70. Que es una instantanea de disco (Disk Snapshot)?", options: ["Una copia de seguridad completa de una VM.", "Una copia de solo lectura de un VHD en un momento dado, que se puede usar para crear nuevas VMs o para restaurar un disco.", "Una imagen de VM.", "Un registro de los cambios en un disco."], answer: "Una copia de solo lectura de un VHD en un momento dado, que se puede usar para crear nuevas VMs o para restaurar un disco.", comment: "Las instantaneas son una forma rapida y economica de hacer una copia de seguridad de un disco antes de realizar cambios importantes.", category: C.COMPUTE },
            { question: "74. Que es el 'acceso anonimo' a un contenedor de Azure Blob Storage?", options: ["Acceso que requiere una clave de cuenta de almacenamiento.", "Acceso que requiere una firma de acceso compartido (SAS).", "Acceso publico y no autenticado a los blobs dentro de un contenedor.", "Acceso que requiere autenticacion de Azure AD."], answer: "Acceso publico y no autenticado a los blobs dentro de un contenedor.", comment: "Puedes configurar un contenedor para permitir el acceso publico, lo que es util para servir activos como imagenes o documentos en un sitio web.", category: C.STORAGE },
            { question: "77. Que es la replicacion geografica con acceso de lectura (RA-GRS) para Azure Storage?", options: ["Replica los datos en tres zonas de disponibilidad.", "Replica los datos a una region secundaria y proporciona acceso de solo lectura a los datos en la ubicacion secundaria.", "Replica los datos en multiples regiones y permite el acceso de lectura/escritura en todas ellas.", "Es una copia de seguridad de la cuenta de almacenamiento."], answer: "Replica los datos a una region secundaria y proporciona acceso de solo lectura a los datos en la ubicacion secundaria.", comment: "RA-GRS proporciona alta disponibilidad para la lectura al permitir que las aplicaciones lean desde la replica secundaria.", category: C.STORAGE },
            { question: "79. Que es el 'Bursting' de disco en Azure?", options: ["Una caracteristica que permite que un disco exceda su limite de rendimiento (IOPS y MB/s) durante periodos limitados.", "La capacidad de aumentar el tamano de un disco mientras esta en uso.", "Un tipo de cifrado de disco.", "La replicacion de un disco a otra region."], answer: "Una caracteristica que permite que un disco exceda su limite de rendimiento (IOPS y MB/s) durante periodos limitados.", comment: "El bursting basado en creditos permite que los discos manejen picos de trafico inesperados de manera mas efectiva.", category: C.COMPUTE },
            { question: "85. Que es el 'Cifrado de servicio de almacenamiento de Azure' (SSE)?", options: ["Cifrado de datos en transito.", "Cifrado de datos en reposo, donde Azure cifra automaticamente los datos antes de persistirlos.", "Cifrado del lado del cliente.", "Cifrado de la conexion de red a la cuenta de almacenamiento."], answer: "Cifrado de datos en reposo, donde Azure cifra automaticamente los datos antes de persistirlos.", comment: "SSE esta habilitado por defecto en todas las cuentas de almacenamiento y no se puede deshabilitar, garantizando que los datos en reposo esten siempre cifrados.", category: C.STORAGE },
            { question: "91. Que es el 'Azure Disk Encryption' (ADE)?", options: ["Cifrado de datos en transito.", "Cifrado de datos en reposo a nivel de cuenta de almacenamiento (SSE).", "Una capacidad para cifrar los discos de SO y de datos de VMs IaaS usando BitLocker (Windows) y DM-Crypt (Linux).", "Cifrado de la conexion RDP a una VM."], answer: "Una capacidad para cifrar los discos de SO y de datos de VMs IaaS usando BitLocker (Windows) y DM-Crypt (Linux).", comment: "ADE se integra con Azure Key Vault para ayudarte a controlar y administrar las claves de cifrado de disco.", category: C.COMPUTE },
            { question: "97. Que es la 'consistencia final' en el contexto de Azure Storage con replicacion geografica (GRS)?", options: ["Los datos se escriben en la region primaria y secundaria simultaneamente.", "Los datos se escriben en la primaria y luego se replican de forma asincrona a la secundaria, pudiendo haber un breve retraso.", "Los datos son consistentes en todo momento en ambas regiones.", "La consistencia de los datos no esta garantizada."], answer: "Los datos se escriben en la primaria y luego se replican de forma asincrona a la secundaria, pudiendo haber un breve retraso.", comment: "Debido a la naturaleza asincrona de la replicacion, GRS y RA-GRS operan con un modelo de consistencia final para los datos en la region secundaria.", category: C.STORAGE },
            { question: "66. Que es el emparejamiento de redes virtuales global (Global VNet Peering)?", options: ["Conectar redes virtuales en la misma region.", "Conectar redes virtuales en diferentes regiones de Azure.", "Conectar una red virtual a una red local.", "Conectar una red virtual a Internet."], answer: "Conectar redes virtuales en diferentes regiones de Azure.", comment: "El emparejamiento global permite que los recursos de una VNet se comuniquen con recursos de otra VNet en una region de Azure diferente de forma privada.", category: C.NETWORK },

            // Modulo 3: Computo (20 preguntas)
            { question: "21. Necesitas implementar un conjunto de maquinas virtuales identicas que se escalen automaticamente segun la demanda? Que recurso de computo de Azure deberias usar?", options: ["Conjuntos de disponibilidad (Availability Sets)", "Conjuntos de escalado de maquinas virtuales (Virtual Machine Scale Sets)", "Azure DevTest Labs", "Maquinas virtuales individuales"], answer: "Conjuntos de escalado de maquinas virtuales (Virtual Machine Scale Sets)", comment: "Los conjuntos de escalado permiten crear y administrar un grupo de maquinas virtuales con equilibrio de carga y escalado automatico.", category: C.COMPUTE },
            { question: "22. Cual es el proposito de un Conjunto de Disponibilidad (Availability Set)?", options: ["Escalar automaticamente el numero de VMs.", "Proteger las aplicaciones contra fallos de hardware distribuyendo VMs en diferentes dominios de error y actualizacion.", "Distribuir VMs entre diferentes regiones de Azure.", "Agrupar VMs para una gestion de costos mas sencilla."], answer: "Proteger las aplicaciones contra fallos de hardware distribuyendo VMs en diferentes dominios de error y actualizacion.", comment: "Un conjunto de disponibilidad garantiza que las VMs se coloquen en diferentes racks (dominios de error) y se actualicen en momentos diferentes (dominios de actualizacion).", category: C.COMPUTE },
            { question: "23. Que son las Zonas de Disponibilidad (Availability Zones)?", options: ["Un conjunto de centros de datos dentro de una region, cada uno con energia, refrigeracion y redes independientes.", "Un grupo logico de maquinas virtuales para escalado.", "Un tipo de cuenta de almacenamiento con alta disponibilidad.", "Un conjunto de reglas de firewall para proteger las VMs."], answer: "Un conjunto de centros de datos dentro de una region, cada uno con energia, refrigeracion y redes independientes.", comment: "Las Zonas de Disponibilidad ofrecen un SLA del 99,99% al proteger las aplicaciones y los datos de los fallos de todo un centro de datos.", category: C.COMPUTE },
            { question: "24. Necesitas ejecutar un script de configuracion en una nueva VM de Windows en el momento de su creacion? Que deberias usar?", options: ["Una tarea programada de Windows.", "Una extension de script personalizado (Custom Script Extension).", "Un script de inicio de sesion de directiva de grupo.", "Azure Automation."], answer: "Una extension de script personalizado (Custom Script Extension).", comment: "La extension de script personalizado descarga y ejecuta scripts en VMs de Azure. Es util para la configuracion posterior a la implementacion.", category: C.COMPUTE },
            { question: "25. Que es una imagen de maquina virtual en Azure?", options: ["Una instantanea de un disco de una VM.", "Una plantilla que se utiliza para crear una maquina virtual, que incluye un SO y software opcional.", "Un archivo de copia de seguridad de una VM.", "Un contenedor Docker."], answer: "Una plantilla que se utiliza para crear una maquina virtual, que incluye un SO y software opcional.", comment: "Las imagenes se utilizan para estandarizar y acelerar la implementacion de VMs. Se pueden usar imagenes del Marketplace o crear imagenes personalizadas.", category: C.COMPUTE, subtopic: "Creacion y uso de imagenes de maquina virtual" },
            { question: "26. Quieres mover un disco de una VM de HDD estandar a SSD premium? Que accion debes realizar?", options: ["No es posible cambiar el tipo de disco una vez creado.", "Detener (desasignar) la VM, cambiar el tipo de disco y luego iniciar la VM.", "Crear una nueva VM con un disco SSD premium y migrar los datos.", "Ejecutar un comando de PowerShell mientras la VM esta en funcionamiento."], answer: "Detener (desasignar) la VM, cambiar el tipo de disco y luego iniciar la VM.", comment: "Para cambiar el tipo de SKU de un disco administrado, la maquina virtual a la que esta conectado el disco debe estar desasignada.", category: C.COMPUTE },
            { question: "27. Cual de los siguientes servicios de Azure es una plataforma de contenedores como servicio (CaaS) sin servidor?", options: ["Azure Kubernetes Service (AKS)", "Azure Container Instances (ACI)", "Azure Virtual Machines", "Azure App Service"], answer: "Azure Container Instances (ACI)", comment: "ACI es la forma mas rapida y sencilla de ejecutar un contenedor en Azure, sin tener que administrar ninguna maquina virtual.", category: C.COMPUTE },
            { question: "28. Estas implementando una aplicacion web en Azure App Service. Necesitas un entorno para pruebas que sea una replica exacta del de produccion? Que caracteristica deberias usar?", options: ["Copias de seguridad (Backups)", "Ranuras de implementacion (Deployment Slots)", "WebJobs", "Escalado automatico (Autoscaling)"], answer: "Ranuras de implementacion (Deployment Slots)", comment: "Las ranuras de implementacion son entornos activos que permiten probar una nueva version y luego intercambiarla con produccion sin tiempo de inactividad.", category: C.COMPUTE },
            { question: "29. Que es Azure Kubernetes Service (AKS)?", options: ["Un servicio para ejecutar contenedores individuales.", "Un servicio de orquestacion de contenedores totalmente administrado basado en Kubernetes.", "Un servicio de compilacion e implementacion de CI/CD.", "Un registro privado para imagenes de Docker."], answer: "Un servicio de orquestacion de contenedores totalmente administrado basado en Kubernetes.", comment: "AKS simplifica la implementacion y administracion de Kubernetes al descargar la sobrecarga operativa a Azure.", category: C.COMPUTE },
            { question: "30. Como se puede conectar de forma segura a una maquina virtual de Azure que no tiene una direccion IP publica?", options: ["Usando RDP a traves de la direccion IP privada.", "Usando Azure Bastion.", "Usando el portal de Azure.", "No es posible conectarse a una VM sin IP publica."], answer: "Usando Azure Bastion.", comment: "Azure Bastion es un servicio PaaS que proporciona una conexion segura RDP/SSH a tus VMs directamente desde el portal de Azure sin necesidad de una IP publica en la VM.", category: C.COMPUTE },
            { question: "54. Necesitas asegurarte de que una aplicacion web en App Service siempre tenga al menos 2 instancias en ejecucion? Que configuracion debes ajustar?", options: ["La configuracion de escalado automatico (Autoscale).", "La configuracion de escalado manual (Scale out).", "La configuracion de escalado vertical (Scale up).", "La configuracion de la aplicacion."], answer: "La configuracion de escalado manual (Scale out).", comment: "El escalado manual (o 'Recuento de instancias') te permite establecer un numero fijo de instancias que se ejecutaran constantemente.", category: C.COMPUTE },
            { question: "58. Necesitas migrar un gran numero de maquinas virtuales VMware locales a Azure. Que servicio de Azure esta disenado para facilitar esta tarea?", options: ["Azure Backup", "Azure Migrate", "Azure Data Box", "Azure Automation"], answer: "Azure Migrate", comment: "Azure Migrate es el centro de servicios centralizado para descubrir, evaluar y migrar servidores, aplicaciones y datos locales a la nube de Azure.", category: C.COMPUTE },
            { question: "59. Cual es el numero maximo de dominios de actualizacion (Update Domains) que puedes configurar en un Conjunto de Disponibilidad?", options: ["5", "10", "20", "3"], answer: "20", comment: "Puedes configurar hasta 20 dominios de actualizacion en un conjunto de disponibilidad. Esto define grupos de maquinas virtuales que se pueden reiniciar al mismo tiempo.", category: C.COMPUTE },
            { question: "60. Que SKU de Azure Bastion se necesita para usar caracteristicas avanzadas como la carga/descarga de archivos nativa?", options: ["SKU Basico (Basic)", "SKU Estandar (Standard)", "SKU Premium", "SKU Avanzado (Advanced)"], answer: "SKU Estandar (Standard)", comment: "El SKU Estandar de Azure Bastion introduce caracteristicas adicionales sobre el Basico, incluida la capacidad de ajustar el numero de instancias.", category: C.NETWORK },
            { question: "64. Cual es el proposito de la extension de VM 'AzurePerformanceDiagnostics'?", options: ["Para instalar software antivirus en la VM.", "Para recopilar registros de diagnostico que ayudan a solucionar problemas de rendimiento de las VMs de Windows.", "Para realizar copias de seguridad de la VM.", "Para configurar las reglas de red de la VM."], answer: "Para recopilar registros de diagnostico que ayudan a solucionar problemas de rendimiento de las VMs de Windows.", comment: "Esta extension ejecuta herramientas de diagnostico para recopilar informacion y puede proporcionar un informe para resolver problemas de rendimiento.", category: C.COMPUTE },
            { question: "75. Que servicio de Azure deberias usar para ejecutar un trabajo por lotes que requiere una gran cantidad de potencia de computo?", options: ["Azure App Service", "Azure Functions", "Azure Batch", "Azure Virtual Machines"], answer: "Azure Batch", comment: "Azure Batch esta disenado para ejecutar aplicaciones de computacion de alto rendimiento (HPC) y a gran escala en paralelo de manera eficiente.", category: C.COMPUTE, subtopic: "Ejecucion de trabajos por lotes con Azure Batch" },
            { question: "76. Que es un WebJob de Azure?", options: ["Una caracteristica de App Service que permite ejecutar un programa o script en segundo plano.", "Un tipo de maquina virtual.", "Un servicio de CI/CD.", "Una regla de alerta."], answer: "Una caracteristica de App Service que permite ejecutar un programa o script en segundo plano.", comment: "Los WebJobs son utiles para tareas en segundo plano, como el procesamiento de imagenes, el procesamiento de colas, etc.", category: C.COMPUTE },
            { question: "83. Que es un 'grupo de seleccion de ubicacion de proximidad' (Proximity Placement Group)?", options: ["Un grupo logico para asegurarse de que los recursos de computo de Azure esten fisicamente ubicados lo mas cerca posible.", "Un grupo de recursos que se encuentran en la misma region.", "Un grupo de seguridad de aplicaciones.", "Un grupo de VMs que comparten la misma subred."], answer: "Un grupo logico para asegurarse de que los recursos de computo de Azure esten fisicamente ubicados lo mas cerca posible.", comment: "Esto es crucial para cargas de trabajo que requieren baja latencia entre maquinas virtuales, como las aplicaciones de HPC o SAP.", category: C.COMPUTE },
            { question: "88. Cual es el proposito de la extension de VM 'AADLoginForWindows'?", options: ["Para unir la VM a un dominio de Active Directory local.", "Para permitir el inicio de sesion en una VM de Windows utilizando credenciales de Azure AD.", "Para instalar el navegador Edge en la VM.", "Para configurar el firewall de Windows."], answer: "Para permitir el inicio de sesion en una VM de Windows utilizando credenciales de Azure AD.", comment: "Permite una gestion de acceso centralizada y basada en la nube para tus VMs, habilitando MFA y acceso condicional.", category: C.COMPUTE },
            { question: "93. Que es un 'plan de App Service' (App Service Plan)?", options: ["Una aplicacion web individual.", "Un conjunto de recursos de computo (region, numero de VMs, etc.) en los que se ejecutan una o mas aplicaciones web.", "Un plan de copia de seguridad para una aplicacion web.", "Un conjunto de reglas de escalado para una aplicacion web."], answer: "Un conjunto de recursos de computo (region, numero de VMs, etc.) en los que se ejecutan una o mas aplicaciones web.", comment: "El plan de App Service es la unidad de escala y costo. Puedes alojar multiples aplicaciones en el mismo plan para optimizar costos.", category: C.COMPUTE },
            { question: "100. Que es un 'grupo de hosts dedicados' (Dedicated Host Group) de Azure?", options: ["Un grupo de maquinas virtuales que estan dedicadas a un solo cliente.", "Un servicio que proporciona servidores fisicos, dedicados a una sola suscripcion, para alojar una o mas VMs.", "Un tipo de plan de App Service.", "Un grupo de administradores dedicados a tu cuenta."], answer: "Un servicio que proporciona servidores fisicos, dedicados a una sola suscripcion, para alojar una o mas VMs.", comment: "Los hosts dedicados proporcionan aislamiento a nivel de servidor fisico, lo que puede ser necesario para cumplir con requisitos de cumplimiento normativo.", category: C.COMPUTE },

            // Modulo 4: Redes (20 preguntas)
            { question: "31. Que componente de red de Azure se utiliza para filtrar el trafico hacia y desde los recursos de Azure en una red virtual?", options: ["Azure Load Balancer", "Azure Firewall", "Grupos de Seguridad de Red (NSG)", "Azure DNS"], answer: "Grupos de Seguridad de Red (NSG)", comment: "Un NSG contiene una lista de reglas de seguridad que permiten o deniegan el trafico de red a los recursos. Se pueden asociar a subredes o a NICs.", category: C.NETWORK },
            { question: "32. Necesitas conectar dos redes virtuales en la misma region para que los recursos en ambas puedan comunicarse? Que deberias configurar?", options: ["Una puerta de enlace de VPN.", "Emparejamiento de redes virtuales (VNet Peering).", "Una conexion ExpressRoute.", "Un punto de conexion de servicio."], answer: "Emparejamiento de redes virtuales (VNet Peering).", comment: "El emparejamiento de VNet permite conectar redes virtuales de forma transparente. El trafico entre las redes emparejadas utiliza la red troncal de Microsoft.", category: C.NETWORK },
            { question: "33. Cual es la diferencia principal entre un Azure Load Balancer Basico y uno Estandar?", options: ["El Basico solo funciona con VMs, mientras que el Estandar funciona con cualquier recurso.", "El Estandar esta respaldado por un SLA y puede abarcar Zonas de Disponibilidad, mientras que el Basico no.", "El Basico es para trafico interno y el Estandar para trafico publico.", "El Estandar incluye proteccion contra DDoS, mientras que el Basico no."], answer: "El Estandar esta respaldado por un SLA y puede abarcar Zonas de Disponibilidad, mientras que el Basico no.", comment: "El Load Balancer Estandar es la oferta recomendada, ya que proporciona una mayor escala, seguridad y alta disponibilidad.", category: C.NETWORK, subtopic: "Diferencias y seleccion de SKU en Azure Load Balancer" },
            { question: "34. Que servicio de Azure proporciona un equilibrio de carga de capa 7 (HTTP/HTTPS) con enrutamiento basado en URL?", options: ["Azure Load Balancer", "Azure Traffic Manager", "Azure Application Gateway", "Azure Firewall"], answer: "Azure Application Gateway", comment: "Application Gateway es un equilibrador de carga de trafico web que permite administrar el trafico a las aplicaciones web. Funciona en la capa de aplicacion (OSI capa 7).", category: C.NETWORK },
            { question: "35. Como funciona Azure Traffic Manager?", options: ["Equilibrando la carga del trafico de red en la capa 4.", "Usando DNS para dirigir a los clientes a los puntos de conexion en diferentes regiones segun un metodo de enrutamiento.", "Filtrando el trafico malicioso a las aplicaciones web.", "Proporcionando conectividad privada entre redes locales y Azure."], answer: "Usando DNS para dirigir a los clientes a los puntos de conexion en diferentes regiones segun un metodo de enrutamiento.", comment: "Traffic Manager es un equilibrador de carga de trafico basado en DNS. No ve el trafico que pasa entre el cliente y el servicio.", category: C.NETWORK },
            { question: "36. Necesitas establecer una conexion privada y dedicada entre tu centro de datos local y Azure. Que servicio deberias usar?", options: ["VPN de sitio a sitio", "VPN de punto a sitio", "Azure ExpressRoute", "Emparejamiento de VNet"], answer: "Azure ExpressRoute", comment: "ExpressRoute permite extender las redes locales a la nube de Microsoft a traves de una conexion privada, ofreciendo mayor fiabilidad y velocidades mas rapidas.", category: C.NETWORK },
            { question: "37. Que es una tabla de rutas (Route Table) en Azure?", options: ["Una lista de reglas de NSG.", "Una tabla que contiene entradas que especifican como se deben enrutar los paquetes en una red virtual.", "Un registro de las consultas DNS.", "Una lista de las conexiones de emparejamiento de VNet."], answer: "Una tabla que contiene entradas que especifican como se deben enrutar los paquetes en una red virtual.", comment: "Puedes crear tablas de rutas para anular las rutas predeterminadas de Azure, por ejemplo, para forzar el trafico a traves de una NVA.", category: C.NETWORK },
            { question: "38. Cual es el proposito de Azure DNS?", options: ["Proporcionar un firewall para dominios.", "Un servicio de alojamiento para dominios DNS que proporciona resolucion de nombres mediante la infraestructura de Azure.", "Registrar nuevos nombres de dominio.", "Equilibrar la carga del trafico DNS."], answer: "Un servicio de alojamiento para dominios DNS que proporciona resolucion de nombres mediante la infraestructura de Azure.", comment: "Puedes alojar tus zonas DNS (por ejemplo, `contoso.com`) en Azure y administrar los registros DNS para tus servicios.", category: C.NETWORK },
            { question: "39. Estas configurando un Application Gateway y necesitas protegerlo contra inyeccion de SQL? Que caracteristica debes habilitar?", options: ["Reglas de enrutamiento basicas.", "Descarga de SSL.", "Firewall de aplicaciones web (WAF).", "Afinidad de sesion basada en cookies."], answer: "Firewall de aplicaciones web (WAF).", comment: "El WAF es una caracteristica de Application Gateway que proporciona proteccion centralizada de las aplicaciones web frente a vulnerabilidades comunes.", category: C.NETWORK },
            { question: "40. Que es un Punto de Conexion Privado (Private Endpoint) de Azure?", options: ["Una direccion IP publica para un servicio de Azure.", "Una interfaz de red que te conecta de forma privada y segura a un servicio con tecnologia de Azure Private Link.", "Un tunel VPN a un servicio especifico.", "Un registro DNS para un servicio interno."], answer: "Una interfaz de red que te conecta de forma privada y segura a un servicio con tecnologia de Azure Private Link.", comment: "Un punto de conexion privado utiliza una IP privada de tu VNet, lo que permite que el trafico al servicio de Azure permanezca en la red de Microsoft.", category: C.NETWORK },
            { question: "62. Que es un grupo de seguridad de aplicaciones (ASG)?", options: ["Un grupo de direcciones IP que se pueden usar en reglas de NSG.", "Una construccion logica que permite agrupar VMs y definir politicas de seguridad de red basadas en esas agrupaciones.", "Un grupo de Azure AD para asignar permisos de red.", "Un tipo de firewall de aplicaciones."], answer: "Una construccion logica que permite agrupar VMs y definir politicas de seguridad de red basadas en esas agrupaciones.", comment: "Los ASG te permiten configurar la seguridad de la red como una extension natural de la estructura de una aplicacion, agrupando las VMs por carga de trabajo.", category: C.NETWORK },
            { question: "63. Necesitas asegurar que una aplicacion en un VMSS mantenga un estado de sesion consistente? Que configuracion del balanceador de carga deberias usar?", options: ["Reglas NAT de entrada.", "Sondeos de estado (Health Probes).", "Persistencia de sesion (Afinidad de sesion) configurada como `SourceIP`.", "Reglas de salida."], answer: "Persistencia de sesion (Afinidad de sesion) configurada como `SourceIP`.", comment: "La afinidad de sesion dirige todo el trafico de un cliente a la misma instancia de VM en el backend durante la sesion.", category: C.NETWORK },
            { question: "65. Que metodo de enrutamiento de Traffic Manager mejora el rendimiento al reducir la latencia para los usuarios finales?", options: ["Prioridad", "Ponderado", "Rendimiento", "Geografico"], answer: "Rendimiento", comment: "El perfil de enrutamiento de Rendimiento esta disenado para mejorar la capacidad de respuesta de la aplicacion al dirigir el trafico al punto de conexion con la latencia mas baja.", category: C.NETWORK },
            { question: "69. Que herramienta de Network Watcher te permite verificar si se permite o deniega el trafico entre una VM y un destino especifico?", options: ["Topologia", "Verificacion de flujo de IP (IP Flow Verify)", "Proximo salto (Next Hop)", "Captura de paquetes"], answer: "Verificacion de flujo de IP (IP Flow Verify)", comment: "Esta herramienta te ayuda a diagnosticar rapidamente problemas de conectividad al indicarte si el trafico esta siendo bloqueado por una regla de NSG.", category: C.NETWORK },
            { question: "73. Como puedes forzar todo el trafico de salida de una subred a traves de una NVA para su inspeccion?", options: ["Configurando una regla de NSG para redirigir el trafico.", "Creando una tabla de rutas con una UDR que dirija el trafico `0.0.0.0/0` a la IP de la NVA.", "Usando un Application Gateway.", "Habilitando el reenvio de IP en la NVA."], answer: "Creando una tabla de rutas con una UDR que dirija el trafico `0.0.0.0/0` a la IP de la NVA.", comment: "Esta tecnica, conocida como 'tunel forzado', es comun en arquitecturas de red seguras para inspeccionar todo el trafico saliente.", category: C.NETWORK },
            { question: "81. Que es el 'reenvio de IP' (IP Forwarding) en una NIC de Azure?", options: ["Una configuracion que permite a una VM recibir trafico no destinado a su propia IP.", "Una forma de redirigir el trafico a otra VM.", "Una configuracion de equilibrio de carga.", "Una regla de firewall."], answer: "Una configuracion que permite a una VM recibir trafico no destinado a su propia IP.", comment: "Esta opcion es crucial para las aplicaciones virtuales de red (NVA), como firewalls o balanceadores de carga, que necesitan procesar trafico.", category: C.NETWORK },
            { question: "86. Que es una regla de 'salida' (Outbound Rule) en un Azure Load Balancer Estandar?", options: ["Una regla que permite el trafico entrante desde Internet.", "Una regla que define como se traduce la direccion de red de origen (SNAT) para el trafico saliente.", "Una regla que sondea el estado de las VMs del backend.", "Una regla que distribuye el trafico entrante."], answer: "Una regla que define como se traduce la direccion de red de origen (SNAT) para el trafico saliente.", comment: "Las reglas de salida proporcionan un control explicito y escalable sobre la conectividad a Internet saliente para los recursos de una VNet.", category: C.NETWORK },
            { question: "90. Que es el 'sondeo de estado' (Health Probe) en un Azure Load Balancer?", options: ["Una herramienta para verificar la latencia de la red.", "Un mecanismo que utiliza el balanceador de carga para detectar el estado de las instancias en el grupo de backend.", "Un informe sobre el estado de la plataforma Azure.", "Una regla de alerta de metrica."], answer: "Un mecanismo que utiliza el balanceador de carga para detectar el estado de las instancias en el grupo de backend.", comment: "El balanceador de carga solo envia trafico a las instancias que responden correctamente al sondeo de estado.", category: C.NETWORK },
            { question: "94. Que es el 'peering de circuito' (Circuit Peering) en Azure ExpressRoute?", options: ["La conexion fisica entre tu red y la de Microsoft.", "Las diferentes sesiones de enrutamiento BGP que se establecen a traves de un circuito ExpressRoute (peering privado y de Microsoft).", "La conexion entre dos circuitos ExpressRoute.", "La conexion de un circuito ExpressRoute a una VNet."], answer: "Las diferentes sesiones de enrutamiento BGP que se establecen a traves de un circuito ExpressRoute (peering privado y de Microsoft).", comment: "Cada tipo de peering es una sesion de enrutamiento BGP independiente que proporciona acceso a diferentes conjuntos de servicios de Microsoft.", category: C.NETWORK },
            { question: "99. Que es la 'afinidad de sesion' en Azure Application Gateway?", options: ["Una caracteristica que garantiza que todas las solicitudes de un cliente durante una sesion se dirijan a la misma instancia de servidor backend.", "Una regla que dirige el trafico a la region mas cercana.", "Una configuracion de seguridad que bloquea sesiones maliciosas.", "Una metrica que mide la duracion de la sesion del usuario."], answer: "Una caracteristica que garantiza que todas las solicitudes de un cliente durante una sesion se dirijan a la misma instancia de servidor backend.", comment: "Esto es importante para aplicaciones que almacenan datos de sesion en el servidor, garantizando una experiencia de usuario consistente.", category: C.NETWORK },

            // Modulo 5: Monitorizacion y Mantenimiento (20 preguntas)
            { question: "41. Que servicio de Azure se utiliza para recopilar, analizar y actuar sobre los datos de telemetria de tus entornos?", options: ["Azure Advisor", "Azure Monitor", "Microsoft Defender for Cloud", "Azure Service Health"], answer: "Azure Monitor", comment: "Azure Monitor es la plataforma de supervision centralizada de Azure que recopila metricas y registros de la mayoria de los servicios de Azure.", category: C.MONITOR },
            { question: "42. En Azure Monitor, ?cual es la diferencia fundamental entre Metricas y Registros?", options: ["Las metricas son numericas y se recopilan a intervalos regulares; los registros contienen varios tipos de datos y se consultan con KQL.", "Las metricas son para la facturacion y los registros son para la seguridad.", "Las metricas solo provienen de VMs y los registros de todos los demas servicios.", "No hay ninguna diferencia, son dos nombres para lo mismo."], answer: "Las metricas son numericas y se recopilan a intervalos regulares; los registros contienen varios tipos de datos y se consultan con KQL.", comment: "Las metricas son ligeras y para escenarios casi en tiempo real. Los registros (en Log Analytics) son para un analisis mas profundo y complejo.", category: C.MONITOR },
            { question: "43. Necesitas recibir un email cuando la CPU de una VM supere el 90% durante 5 minutos? Que deberias configurar?", options: ["Un panel (Dashboard).", "Una consulta de Log Analytics.", "Una regla de alerta de metrica (Metric Alert Rule).", "Un libro (Workbook)."], answer: "Una regla de alerta de metrica (Metric Alert Rule).", comment: "Las reglas de alerta de metricas evaluan las metricas de los recursos a intervalos regulares y activan una alerta cuando se cumple una condicion.", category: C.MONITOR },
            { question: "44. Que es un almacen de Recovery Services (Recovery Services vault)?", options: ["Una cuenta de almacenamiento para archivos de registro.", "Un recurso que almacena datos de copia de seguridad y puntos de recuperacion para VMs y SQL Server en VMs.", "Un lugar para almacenar secretos y claves de cifrado.", "Un repositorio para plantillas de ARM."], answer: "Un recurso que almacena datos de copia de seguridad y puntos de recuperacion para VMs y SQL Server en VMs.", comment: "Es la entidad de almacenamiento central para Azure Backup y Azure Site Recovery.", category: C.MONITOR },
            { question: "45. Que es una directiva de copia de seguridad (Backup Policy) en Azure Backup?", options: ["Una directiva de Azure que define que VMs se pueden respaldar.", "Un conjunto de reglas que definen cuando se realizan las copias de seguridad y durante cuanto tiempo se retienen.", "Un script que ejecuta la copia de seguridad.", "Un rol RBAC para administrar las copias de seguridad."], answer: "Un conjunto de reglas que definen cuando se realizan las copias de seguridad y durante cuanto tiempo se retienen.", comment: "Las directivas de copia de seguridad proporcionan una forma de estandarizar y automatizar la proteccion de datos para grupos de recursos similares.", category: C.MONITOR },
            { question: "46. Que tipo de restauracion de Azure VM Backup te permite restaurar archivos y carpetas individuales sin restaurar toda la VM?", options: ["Restauracion completa de la VM.", "Restauracion de disco.", "Recuperacion a nivel de elemento (Item-Level Recovery).", "Reimplementacion de la VM."], answer: "Recuperacion a nivel de elemento (Item-Level Recovery).", comment: "La recuperacion a nivel de elemento permite montar los discos de un punto de recuperacion como unidades y luego explorar y copiar archivos individuales.", category: C.MONITOR },
            { question: "47. Que herramienta de Azure Monitor se utiliza para crear visualizaciones interactivas y ricas en datos?", options: ["Alertas (Alerts)", "Metricas (Metrics)", "Libros (Workbooks)", "Registros de actividad (Activity Logs)"], answer: "Libros (Workbooks)", comment: "Los libros combinan texto, consultas de analisis, metricas de Azure y parametros en informes interactivos enriquecidos.", category: C.MONITOR },
            { question: "48. Que informacion se encuentra en el Registro de Actividad (Activity Log) de Azure?", options: ["Metricas de rendimiento de las VMs.", "Registros de eventos de aplicaciones que se ejecutan en las VMs.", "Registros a nivel de suscripcion sobre eventos del plano de control, como la creacion de un nuevo recurso.", "Consultas DNS realizadas en una VNet."], answer: "Registros a nivel de suscripcion sobre eventos del plano de control, como la creacion de un nuevo recurso.", comment: "El registro de actividad registra quien, que y cuando para cualquier operacion de escritura (PUT, POST, DELETE) realizada en los recursos.", category: C.MONITOR },
            { question: "49. Para que se utiliza Azure Service Health?", options: ["Para monitorizar el rendimiento de tus propias aplicaciones.", "Para proporcionar informacion personalizada sobre como los problemas de la plataforma Azure pueden afectarte.", "Para analizar los costos de los servicios de Azure.", "Para realizar copias de seguridad de los servicios de Azure."], answer: "Para proporcionar informacion personalizada sobre como los problemas de la plataforma Azure pueden afectarte.", comment: "Service Health te mantiene informado sobre la salud de la plataforma Azure y su impacto en tus recursos especificos.", category: C.MONITOR },
            { question: "50. Necesitas analizar registros de diagnostico de varios recursos en un solo lugar con un lenguaje de consulta avanzadoA donde deberias enviarlos?", options: ["A una cuenta de Azure Storage.", "A un Azure Event Hub.", "A un area de trabajo de Log Analytics.", "A una direccion de correo electronico."], answer: "A un area de trabajo de Log Analytics.", comment: "Un area de trabajo de Log Analytics es el entorno principal para almacenar y analizar datos de registro de Azure Monitor utilizando KQL.", category: C.MONITOR, subtopic: "Consulta y analisis de registros en Azure Monitor" },
            { question: "53. Cual es el proposito principal de Network Watcher?", options: ["Proteger la red contra ataques DDoS.", "Proporcionar herramientas para supervisar, diagnosticar y ver metricas para los recursos en una red virtual.", "Conectar redes locales a Azure.", "Filtrar el trafico web malicioso."], answer: "Proporcionar herramientas para supervisar, diagnosticar y ver metricas para los recursos en una red virtual.", comment: "Network Watcher incluye herramientas como Verificacion de flujo de IP, Proximo salto y Captura de paquetes para solucionar problemas de conectividad.", category: C.NETWORK },
            { question: "55. Que es el 'soft delete' para Azure Virtual Machines?", options: ["Una caracteristica que mueve las VMs eliminadas a una papelera de reciclaje.", "Una caracteristica de Azure Backup que retiene los datos de copia de seguridad de una VM eliminada durante 14 dias.", "Un tipo de bloqueo de recursos.", "Una politica de Azure que previene la eliminacion de VMs."], answer: "Una caracteristica de Azure Backup que retiene los datos de copia de seguridad de una VM eliminada durante 14 dias.", comment: "La eliminacion temporal es una caracteristica de seguridad clave en Azure Backup que ayuda a recuperar datos de copia de seguridad incluso si son eliminados.", category: C.MONITOR },
            { question: "71. Que es Azure Advisor?", options: ["Un servicio de soporte tecnico de pago.", "Un consultor de nube que ayuda a seguir las mejores practicas para optimizar las implementaciones de Azure.", "Una herramienta para migrar recursos a Azure.", "Un servicio para monitorizar el estado de la plataforma Azure."], answer: "Un consultor de nube que ayuda a seguir las mejores practicas para optimizar las implementaciones de Azure.", comment: "Azure Advisor analiza la configuracion de tus recursos para proporcionar recomendaciones personalizadas y accionables.", category: C.ID_GOV },
            { question: "78. Que es un grupo de acciones (Action Group) en Azure Monitor?", options: ["Un grupo de recursos de Azure.", "Una coleccion de preferencias de notificacion y acciones que se pueden desencadenar por una alerta.", "Un grupo de usuarios que pueden ver las alertas.", "Un conjunto de reglas de alerta."], answer: "Una coleccion de preferencias de notificacion y acciones que se pueden desencadenar por una alerta.", comment: "Los grupos de acciones permiten definir acciones reutilizables como enviar un correo electronico, un SMS, llamar a un webhook, etc., cuando se dispara una alerta.", category: C.MONITOR, subtopic: "Configuracion de grupos de acciones en Azure Monitor" },
            { question: "82. Que es Azure Site Recovery (ASR)?", options: ["Un servicio de copia de seguridad para sitios web.", "Un servicio que contribuye a tu estrategia de recuperacion ante desastres (DR) al orquestar la replicacion y conmutacion por error.", "Una herramienta para recuperar sitios web eliminados.", "Un servicio de monitorizacion del tiempo de actividad del sitio web."], answer: "Un servicio que contribuye a tu estrategia de recuperacion ante desastres (DR) al orquestar la replicacion y conmutacion por error.", comment: "ASR ayuda a garantizar la continuidad del negocio al mantener las cargas de trabajo en funcionamiento durante las interrupciones.", category: C.MONITOR },
            { question: "87. Que es 'Azure Cost Management + Billing'?", options: ["Un servicio para pagar tus facturas de Azure.", "Un conjunto de herramientas que te ayudan a analizar, administrar y optimizar tus costos de Azure.", "Un servicio para crear presupuestos para recursos.", "Todas las anteriores."], answer: "Todas las anteriores.", comment: "Es el centro para todo lo relacionado con la gestion financiera de tu entorno de Azure, desde el analisis de costos hasta el pago de facturas.", category: C.ID_GOV },
            { question: "92. Que modo de conexion de Azure Arc permite la gestion en tiempo real de un servidor local desde Azure?", options: ["Modo desconectado", "Modo conectado", "Modo hibrido", "Modo de solo inventario"], answer: "Modo conectado", comment: "En el modo conectado, el agente de Azure Connected Machine mantiene una conexion constante con Azure, lo que permite escenarios de gestion en tiempo real.", category: C.ID_GOV },
            { question: "98. Que es el 'analisis de cambios' (Change Analysis) en Azure Monitor?", options: ["Un registro de los cambios de costos en Azure.", "Una herramienta que ayuda a identificar que cambios en los recursos de Azure podrian haber causado un problema.", "Un analisis de los cambios en el codigo fuente de una aplicacion.", "Un registro de los cambios de roles RBAC."], answer: "Una herramienta que ayuda a identificar que cambios en los recursos de Azure podrian haber causado un problema.", comment: "El analisis de cambios se basa en los datos de Azure Resource Graph para proporcionar informacion sobre los cambios en la infraestructura.", category: C.MONITOR },
            { question: "95. Que es el 'acceso basado en el punto final' (Endpoint-based access) en Azure Policy?", options: ["Una forma de aplicar politicas a los puntos de conexion de servicio.", "Una forma de aplicar politicas a los puntos de conexion privados.", "No es un termino estandar de Azure Policy.", "Una politica que restringe que tipos de puntos de conexion se pueden crear."], answer: "No es un termino estandar de Azure Policy.", comment: "Las politicas se aplican a ambitos (grupos de administracion, suscripciones, etc.) y tipos de recursos, no directamente a 'puntos de conexion'.", category: C.ID_GOV }
        ];

        // Eliminar pregunta duplicada (pregunta 95)
        for (let i = originalQuizData.length - 1; i >= 0; i--) {
            if (originalQuizData[i].question.startsWith("95.")) {
                originalQuizData.splice(i, 1);
                break; // Solo eliminar la segunda aparicion
            }
        }
        // Agregar nueva pregunta 95 sobre Azure Blueprints
        originalQuizData.push({
            question: "95. Que es Azure Blueprints y para que se utiliza?",
            options: [
                "Un servicio para crear y administrar copias de seguridad de recursos.",
                "Una herramienta para automatizar la implementacion de entornos completos de Azure siguiendo politicas y controles de gobernanza.",
                "Un sistema de monitoreo de costos en Azure.",
                "Un servicio para la gestion de identidades externas."
            ],
            answer: "Una herramienta para automatizar la implementacion de entornos completos de Azure siguiendo politicas y controles de gobernanza.",
            comment: "Azure Blueprints permite definir un conjunto de recursos, politicas, roles y plantillas ARM para implementar y gobernar entornos de Azure de manera repetible y segura.",
            category: C.ID_GOV,
            subtopic: "Implementacion y administracion de Azure Blueprints"
        });

        // Agregar nuevas preguntas del PDF AZ-104
        originalQuizData.push({
            question: "101. Su empresa tiene varios departamentos. Cada departamento tiene un numero de maquinas virtuales (VMs). La empresa tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. Todas las VMs estan ubicadas en RG1. Desea asociar cada VM con su departamento respectivo? Que debe hacer?",
            options: [
                "Crear Grupos de Administracion de Azure para cada departamento.",
                "Crear un grupo de recursos para cada departamento.",
                "Asignar etiquetas a las maquinas virtuales.",
                "Modificar la configuracion de las maquinas virtuales."
            ],
            answer: "Asignar etiquetas a las maquinas virtuales.",
            comment: "Al asignar etiquetas, puede organizar los recursos de una manera que tenga sentido para su organizacion, lo que le permitira filtrar y ver facilmente los recursos segun criterios como el departamento, el entorno o el centro de costos. En este caso, puede crear una etiqueta llamada 'Departamento' y asignar el valor apropiado a cada VM.",
            category: C.ID_GOV,
            subtopic: "Administracion de etiquetas de recursos"
        });

        originalQuizData.push({
            question: "102. Su empresa tiene una suscripcion de Azure Active Directory (Azure AD). Desea implementar una politica de acceso condicional de Azure AD. La politica debe configurarse para requerir que los miembros del grupo de Administradores Globales utilicen la Autenticacion Multifactor y un dispositivo unido a Azure AD cuando se conecten a Azure AD desde ubicaciones no confiables. Solucion: Accede a la pagina de autenticacion multifactor para modificar la configuracion del usuarioLa solucion cumple el objetivo?",
            options: ["Si", "No"],
            answer: "No",
            comment: "La solucion no cumple el objetivo. Aunque acceder a la pagina de autenticacion multifactor le permite configurar la autenticacion multifactor para los usuarios, no se dirige especificamente a los miembros del grupo de Administradores Globales. Para cumplir el objetivo de requerir que los Administradores Globales utilicen la Autenticacion Multifactor y un dispositivo unido a Azure AD al conectarse desde ubicaciones no confiables, debe configurar una politica de acceso condicional de Azure AD.",
            category: C.ID_GOV,
            subtopic: "Configuracion de politicas de acceso condicional"
        });

        originalQuizData.push({
            question: "103. Su empresa tiene una suscripcion de Azure Active Directory (Azure AD). Desea implementar una politica de acceso condicional de Azure AD. La politica debe configurarse para requerir que los miembros del grupo de Administradores Globales utilicen la Autenticacion Multifactor y un dispositivo unido a Azure AD cuando se conecten a Azure AD desde ubicaciones no confiables. Solucion: Accede al portal de Azure para modificar el control de concesion de la politica de acceso condicional de Azure ADLa solucion cumple el objetivo?",
            options: ["Si", "No"],
            answer: "Si",
            comment: "SI. Dentro de una politica de acceso condicional: â€¢ Control de Acceso de CONCESII“N: un administrador puede usar los controles de acceso para conceder o bloquear acceso a los recursos. â€¢ Control de Acceso de SESII“N: un administrador puede utilizar los controles de sesion para habilitar experiencias limitadas dentro de aplicaciones en la nube especificas.",
            category: C.ID_GOV,
            subtopic: "Configuracion de politicas de acceso condicional"
        });

        originalQuizData.push({
            question: "104. Esta planeando implementar una maquina virtual de Ubuntu Server en la suscripcion de Azure de su empresa. Se le exige implementar una implementacion personalizada que incluya la adicion de una autoridad de certificacion raiz (CA) confiable en particularCual de las siguientes opciones debe usar para crear la maquina virtual?",
            options: [
                "El cmdlet New-AzureRmVm.",
                "El cmdlet New-AzVM.",
                "El cmdlet Create-AzVM.",
                "El comando az vm create."
            ],
            answer: "El comando az vm create.",
            comment: "El comando az vm create. Necesita crear una VM de Ubuntu Linux usando un script cloud-init para la configuracion. Por ejemplo, az vm create -g MyResourceGroup -n MyVm --image debian --custom-data MyCloudInitScript.yml.",
            category: C.COMPUTE,
            subtopic: "Creacion de maquinas virtuales con configuracion personalizada"
        });

        originalQuizData.push({
            question: "105. Su empresa tiene un inquilino de Azure Active Directory (Azure AD) llamado weyland.com configurado para coexistencia hibrida con el dominio de Active Directory local. Tiene un servidor llamado DirSync1 configurado como servidor DirSync. Crea una nueva cuenta de usuario en el Active Directory local. Ahora necesita replicar la informacion del usuario a Azure AD inmediatamente. Solucion: Ejecuta el cmdlet de PowerShell Start-ADSyncSyncCycle -PolicyType InitialLa solucion cumple el objetivo?",
            options: ["Si", "No"],
            answer: "No",
            comment: "NO. 'Initial' realizara una sincronizacion completa y agregara la cuenta de usuario creada, pero llevara tiempo. 'Delta' iniciara una sincronizacion delta y traera solo el ultimo cambio, por lo que sera 'inmediatamente' y cumplira los requisitos.",
            category: C.ID_GOV,
            subtopic: "Sincronizacion de Azure AD Connect"
        });

        originalQuizData.push({
            question: "106. Su empresa tiene una suscripcion de Microsoft Azure. La empresa tiene centros de datos en Los Ingeles y Nueva York. Esta configurando los dos centros de datos como sitios geoclusterizados para la resiliencia del sitio. Debe recomendar una opcion de redundancia de almacenamiento de Azure. Tiene los siguientes requisitos de almacenamiento de datos: â€¢ Los datos deben almacenarse en multiples nodos. â€¢ Los datos deben almacenarse en nodos en ubicaciones geograficas separadas. â€¢ Los datos se pueden leer tanto desde la ubicacion secundaria como desde la ubicacion principalCual de las siguientes opciones de redundancia de almacenamiento de Azure debe recomendar?",
            options: [
                "Almacenamiento geo-redundante",
                "Almacenamiento geo-redundante de solo lectura",
                "Almacenamiento con redundancia de zona",
                "Almacenamiento con redundancia local"
            ],
            answer: "Almacenamiento geo-redundante de solo lectura",
            comment: "El almacenamiento geo-redundante de solo lectura (RA-GRS) se utiliza para lograr una mayor disponibilidad en caso de que los datos no esten disponibles en la region principal. Esta es una caracteristica opcional que requiere que la cuenta de almacenamiento este georeplicada.",
            category: C.STORAGE,
            subtopic: "Configuracion de redundancia de almacenamiento"
        });

        originalQuizData.push({
            question: "107. Su empresa tiene una suscripcion de Azure que incluye una cuenta de almacenamiento, un grupo de recursos, un contenedor de blobs y un recurso compartido de archivos. Un colega llamado Jon Ross utiliza una plantilla de Azure Resource Manager (ARM) para implementar una maquina virtual y una cuenta de Azure Storage adicional. Desea revisar la plantilla ARM que utilizo Jon Ross. Solucion: Accede al panel del Grupo de RecursosLa solucion cumple el objetivo?",
            options: ["Si", "No"],
            answer: "Si",
            comment: "Para ver una plantilla desde el historial de implementacion: 1. Vaya al grupo de recursos de su nuevo grupo de recursos. Seleccione el enlace que muestra el resultado de la ultima implementacion. 2. Vera un historial de implementaciones; seleccione la implementacion. 3. El portal muestra un resumen de la implementacion. Para ver la plantilla que uso para la implementacion, seleccione 'Ver plantilla'. Debe usar el panel del Grupo de Recursos.",
            category: C.ID_GOV,
            subtopic: "Revision de plantillas ARM"
        });

        originalQuizData.push({
            question: "108. Su empresa tiene tres maquinas virtuales (VMs) incluidas en un conjunto de disponibilidad. Intenta cambiar el tamano de una de las VMs, lo que devuelve un mensaje de error de asignacion. Es imperativo que se cambie el tamano de la VMCual de las siguientes acciones debe tomar?",
            options: [
                "Solo debe detener una de las VMs.",
                "Debe detener dos de las VMs.",
                "Debe detener las tres VMs.",
                "Debe eliminar la VM necesaria del conjunto de disponibilidad."
            ],
            answer: "Debe detener las tres VMs.",
            comment: "Si la VM que desea redimensionar forma parte de un conjunto de disponibilidad, entonces debe detener todas las VMs del conjunto de disponibilidad antes de cambiar el tamano de cualquier VM en el conjunto de disponibilidad. La razon es que todas las VMs en ejecucion en el conjunto de disponibilidad deben usar el mismo cluster de hardware fisico. Por lo tanto, si se requiere un cambio de cluster de hardware fisico, todas las VMs deben detenerse primero y luego reiniciarse una por una en diferentes clusteres de hardware fisico.",
            category: C.COMPUTE,
            subtopic: "Administracion de conjuntos de disponibilidad"
        });

        originalQuizData.push({
            question: "109. Tiene una maquina virtual (VM) de Azure que tiene un unico disco de datos. Se le ha encomendado la tarea de adjuntar este disco de datos a otra VM de Azure. Debe asegurarse de que su estrategia permita que las maquinas virtuales esten fuera de linea el menor tiempo posibleCual de las siguientes acciones debe tomar PRIMERO?",
            options: [
                "Detener la VM que incluye el disco de datos.",
                "Detener la VM a la que se debe adjuntar el disco de datos.",
                "Desacoplar el disco de datos.",
                "Eliminar la VM que incluye el disco de datos."
            ],
            answer: "Desacoplar el disco de datos.",
            comment: "Puede simplemente desacoplar un disco de datos de una VM y adjuntarlo a la otra VM sin detener ninguna de las VMs. Desacoplar un disco no requiere que detenga o elimine la VM, asegurando que la VM misma permanezca operativa.",
            category: C.COMPUTE,
            subtopic: "Administracion de discos de maquinas virtuales"
        });

        originalQuizData.push({
            question: "110. Su empresa tiene una suscripcion de Azure. Necesita implementar varias maquinas virtuales (VMs) de Azure utilizando plantillas de Azure Resource Manager (ARM). Se le ha informado que las VMs se incluiran en un unico conjunto de disponibilidad. Se le exige asegurarse de que la plantilla ARM que configure permita que la mayor cantidad posible de VMs permanezcan accesibles en caso de fallos de infraestructura o mantenimientoCual de los siguientes valores debe configurar para la propiedad platformFaultDomainCount?",
            options: ["10", "30", "Valor minimo", "Valor maximo"],
            answer: "Valor maximo",
            comment: "El numero de dominios de error para los conjuntos de disponibilidad administrados varia por region (dos o tres). Un dominio de error es un grupo de recursos de hardware subyacentes fisicamente separados. En Azure, el valor maximo para platformFaultDomainCount es 3. Para asegurar la maxima accesibilidad en caso de falla, debe establecer la propiedad platformFaultDomainCount en su valor maximo de 3.",
            category: C.COMPUTE,
            subtopic: "Configuracion de conjuntos de disponibilidad"
        });

        originalQuizData.push({
            question: "111. Su empresa tiene una suscripcion de Azure. Necesita implementar varias maquinas virtuales (VMs) de Azure utilizando plantillas de Azure Resource Manager (ARM). Se le ha informado que las VMs se incluiran en un unico conjunto de disponibilidad. Se le exige asegurarse de que la plantilla ARM que configure permita que la mayor cantidad posible de VMs permanezcan accesibles en caso de fallos de infraestructura o mantenimientoCual de los siguientes valores debe configurar para la propiedad platformUpdateDomainCount?",
            options: ["10", "30", "40"],
            answer: "30",
            comment: "A cada maquina virtual en su conjunto de disponibilidad se le asigna un dominio de actualizacion y un dominio de error. Por defecto, se asignan cinco dominios de actualizacion no configurables por el usuario (las implementaciones de Resource Manager pueden luego aumentarse para proporcionar hasta 20 dominios de actualizacion) para indicar grupos de maquinas virtuales y hardware fisico subyacente que pueden reiniciarse al mismo tiempo.",
            category: C.COMPUTE,
            subtopic: "Configuracion de conjuntos de disponibilidad"
        });

        originalQuizData.push({
            question: "112. Ha descargado una plantilla de Azure Resource Manager (ARM) para implementar numerosas maquinas virtuales (VMs). La plantilla ARM se basa en una VM actual, pero debe adaptarse para hacer referencia a una contrasena administrativa. Debe asegurarse de que la contrasena no se almacene en texto sin formato. Se esta preparando para crear los componentes necesarios para lograr su objetivoCual de los siguientes elementos debe crear para lograr su objetivo?",
            options: [
                "Un Azure Key Vault",
                "Una politica de acceso",
                "Ambas opciones anteriores",
                "Ninguna de las anteriores"
            ],
            answer: "Ambas opciones anteriores",
            comment: "Un Azure Key Vault: para almacenar de forma segura la contrasena administrativa, garantizando que no este en texto sin formato. Una politica de acceso: para controlar el acceso a los secretos almacenados en el Key Vault, especificando quien puede realizar operaciones sobre ellos.",
            category: C.ID_GOV,
            subtopic: "Configuracion de Azure Key Vault"
        });

        originalQuizData.push({
            question: "113. Su empresa tiene un inquilino de Azure Active Directory (Azure AD) configurado para coexistencia hibrida con el dominio de Active Directory local. Planea implementar varias maquinas virtuales (VMs) nuevas en Azure. Las VMs tendran el mismo sistema operativo y los mismos requisitos de software personalizados. Configura una VM de referencia en el entorno virtual local. Luego generaliza la VM para crear una imagen. Necesita cargar la imagen a Azure para asegurarse de que este disponible para su seleccion cuando cree las nuevas VMs de Azure. Que cmdlets de PowerShell debe usar?",
            options: [
                "Add-AzVM",
                "Add-AzVhd",
                "Add-AzImage",
                "Add-AzImageDataDisk"
            ],
            answer: "Add-AzVhd",
            comment: "El cmdlet Add-AzVhd carga discos duros virtuales locales, en formato de archivo .vhd, a una cuenta de almacenamiento de blobs como discos duros virtuales fijos.",
            category: C.COMPUTE,
            subtopic: "Carga de imagenes de maquinas virtuales"
        });

        originalQuizData.push({
            question: "114. Su empresa tiene una suscripcion de Azure que incluye varias maquinas virtuales (VMs) de Azure, todas ellas parte de la misma red virtual. Su empresa tambien tiene un servidor Hyper-V local que aloja una VM, llamada VM1, que debe replicarse en AzureCuales de los siguientes objetos deben crearse para lograr este objetivo?",
            options: [
                "Sitio Hyper-V",
                "Azure Recovery Services Vault",
                "Politica de replicacion",
                "Todas las anteriores"
            ],
            answer: "Todas las anteriores",
            comment: "â€¢ Sitio Hyper-V: Representa los servidores Hyper-V locales que se protegeran. â€¢ Azure Recovery Services Vault: Un componente clave en ASR que almacena puntos de recuperacion y orquesta la replicacion, la conmutacion por error y la recuperacion ante desastres. â€¢ Politica de replicacion: Define la configuracion de replicacion, incluida la frecuencia y la retencion.",
            category: C.MONITOR,
            subtopic: "Configuracion de Azure Site Recovery"
        });

        originalQuizData.push({
            question: "115. La suscripcion de Azure de su empresa incluye dos redes de Azure llamadas VirtualNetworkA y VirtualNetworkB. VirtualNetworkA incluye una puerta de enlace VPN que esta configurada para utilizar enrutamiento estatico. Ademas, existe una conexion VPN de sitio a sitio entre la red local de su empresa y VirtualNetworkA. Ha configurado una conexion VPN de punto a sitio a VirtualNetworkA desde una estacion de trabajo con Windows 10. Despues de configurar el emparejamiento de redes virtuales entre VirtualNetworkA y VirtualNetworkB, confirma que puede acceder a VirtualNetworkB desde la red local de la empresa. Sin embargo, descubre que no puede establecer una conexion con VirtualNetworkB desde la estacion de trabajo con Windows 10. Debe asegurarse de que se pueda establecer una conexion con VirtualNetworkB desde la estacion de trabajo con Windows 10. Solucion: Descarga y reinstala el paquete de configuracion del cliente VPN en la estacion de trabajo con Windows 10. La solucion cumple el objetivo?",
            options: ["Si", "No"],
            answer: "Si",
            comment: "Si realiza un cambio en la topologia de su red y tiene clientes VPN de Windows, el paquete de cliente VPN para clientes de Windows debe descargarse e instalarse de nuevo para que los cambios se apliquen al cliente.",
            category: C.NETWORK,
            subtopic: "Configuracion de VPN de punto a sitio"
        });

        originalQuizData.push({
            question: "116. Su empresa tiene maquinas virtuales (VMs) alojadas en Microsoft Azure. Las VMs estan ubicadas en una unica red virtual de Azure llamada VNet1. La empresa tiene usuarios que trabajan de forma remota. Los trabajadores remotos requieren acceso a las VMs en VNet1. Necesita proporcionar acceso a los trabajadores remotosQue debe hacer?",
            options: [
                "Configurar una VPN de sitio a sitio (S2S).",
                "Configurar una VPN de VNet a VNet.",
                "Configurar una VPN de punto a sitio (P2S).",
                "Configurar DirectAccess en una VM de servidor Windows Server 2012.",
                "Configurar una VPN multisitio."
            ],
            answer: "Configurar una VPN de punto a sitio (P2S).",
            comment: "Una conexion de puerta de enlace VPN de punto a sitio (P2S) le permite crear una conexion segura a su red virtual desde un equipo cliente individual. Este tipo de conexion permite a los clientes remotos individuales conectarse de forma segura a una red virtual (VNet) de Azure a traves de Internet. Una VPN de sitio a sitio (S2S) se usa para conectar redes locales a una VNet de Azure, mientras que una VPN de VNet a VNet se usa para conectar dos o mas VNets de Azure entre si.",
            category: C.NETWORK,
            subtopic: "Configuracion de VPN de punto a sitio"
        });

        originalQuizData.push({
            question: "117. Su empresa tiene un grupo de disponibilidad Microsoft SQL Server Always On configurado en sus maquinas virtuales (VMs) de Azure. Necesita configurar un equilibrador de carga interno de Azure como oyente para el grupo de disponibilidad. Solucion: Crea una sonda de salud HTTP en el puerto 1433. La solucion cumple el objetivo?",
            options: ["Si", "No"],
            answer: "No",
            comment: "No, crear una sonda de salud HTTP en el puerto 1433 no cumple el objetivo. Para configurar un equilibrador de carga interno de Azure como oyente para el grupo de disponibilidad, debe crear una sonda de salud TCP en el puerto 1433. SQL Server utiliza TCP para comunicarse en el puerto 1433.",
            category: C.NETWORK,
            subtopic: "Configuracion de equilibradores de carga"
        });

        originalQuizData.push({
            question: "118. Su empresa tiene un grupo de disponibilidad Microsoft SQL Server Always On configurado en sus maquinas virtuales (VMs) de Azure. Necesita configurar un equilibrador de carga interno de Azure como oyente para el grupo de disponibilidad. Solucion: Habilita la IP FlotanteLa solucion cumple el objetivo?",
            options: ["Si", "No"],
            answer: "Si",
            comment: "Si, habilitar la IP Flotante en el equilibrador de carga interno de Azure como oyente para el grupo de disponibilidad puede cumplir el objetivo. Al habilitar la IP Flotante, el equilibrador de carga utilizara una direccion IP flotante como direccion IP de origen para los flujos salientes del grupo de backend. Esto asegurara que la direccion IP utilizada por el grupo de backend permanezca igual incluso si una VM se reinicia o se reemplaza, lo cual es importante para mantener el oyente del grupo de disponibilidad.",
            category: C.NETWORK,
            subtopic: "Configuracion de equilibradores de carga"
        });

        originalQuizData.push({
            question: "119. Su empresa tiene dos servidores locales llamados SRV01 y SRV02. Los desarrolladores han creado una aplicacion que se ejecuta en SRV01. La aplicacion llama a un servicio en SRV02 por direccion IP. Planea migrar la aplicacion a maquinas virtuales (VMs) de Azure. Ha configurado dos VMs en una unica subred en una red virtual de Azure. Necesita configurar las dos VMs con direcciones IP internas estaticasQue debe hacer?",
            options: [
                "Ejecutar el cmdlet de PowerShell New-AzureRMVMConfig.",
                "Ejecutar el cmdlet de PowerShell Set-AzureSubnet.",
                "Modificar las propiedades de la VM en el Portal de administracion de Azure.",
                "Modificar las propiedades de IP en el Centro de redes y recursos compartidos de Windows.",
                "Ejecutar el cmdlet de PowerShell Set-AzureStaticVNetIP."
            ],
            answer: "Ejecutar el cmdlet de PowerShell Set-AzureStaticVNetIP.",
            comment: "Para establecer una direccion IP estatica para una VM creada previamente, puede usar el cmdlet Set-AzureStaticVNetIP. Si ya existe una IP, debe eliminarla antes. El cmdlet Update-AzureVM reinicia la VM como parte del proceso de actualizacion para asignar la nueva IP.",
            category: C.NETWORK,
            subtopic: "Configuracion de direcciones IP estaticas"
        });

        originalQuizData.push({
            question: "120. Su empresa tiene una suscripcion de Azure Active Directory (Azure AD). Necesita implementar cinco maquinas virtuales (VMs) en la subred de la red virtual de su empresa. Cada VM tendra una direccion IP publica y una privada. Las reglas de seguridad de entrada y salida para todas estas maquinas virtuales deben ser identicasCual es la menor cantidad de grupos de seguridad necesarios para esta configuracion?",
            options: ["4", "3", "2", "1"],
            answer: "1",
            comment: "En Azure, los Grupos de Seguridad de Red (NSG) se utilizan para controlar el trafico. Dado que todas las VMs requieren las mismas reglas de seguridad, puede asignar un unico NSG a nivel de subred. Esto garantiza que las reglas de seguridad se apliquen uniformemente a todas las VMs dentro de esa subred.",
            category: C.NETWORK,
            subtopic: "Configuracion de grupos de seguridad de red"
        });

        originalQuizData.push({
            question: "121. La suscripcion de Azure de su empresa incluye maquinas virtuales (VMs) de Azure que ejecutan Windows Server 2016. Una de las VMs se respalda todos los dias utilizando Azure Backup Instant Restore. Cuando la VM se infecta con ransomware de cifrado de datos, decide recuperar los archivos de la VMCual de las siguientes afirmaciones es VERDADERA en este escenario?",
            options: [
                "Solo puede recuperar los archivos en la VM infectada.",
                "Puede recuperar los archivos en cualquier VM dentro de la suscripcion de la empresa.",
                "Solo puede recuperar los archivos en una nueva VM.",
                "No podra recuperar los archivos."
            ],
            answer: "Puede recuperar los archivos en cualquier VM dentro de la suscripcion de la empresa.",
            comment: "Puede restaurar archivos montando la copia de seguridad en su propia maquina local o en cualquier VM en Azure siempre que tengan la misma version del SO. No puede restaurar archivos a una version anterior o posterior del SO; debe ser un sistema operativo cliente compatible. Restaurar archivos a una VM infectada no es la mejor opcion.",
            category: C.MONITOR,
            subtopic: "Recuperacion de archivos con Azure Backup"
        });

        originalQuizData.push({
            question: "122. Administra una solucion en Azure que actualmente presenta problemas de rendimiento. Necesita encontrar la causa de los problemas de rendimiento relacionados con las metricas en la infraestructura de Azure.",
            options: [
                "Azure Sentinel",
                "Azure Monitor",
                "Registro de actividad de Azure",
                "Azure Advisor"
            ],
            answer: "Azure Monitor",
            comment: "Las metricas en Azure Monitor se almacenan en una base de datos de series temporales optimizada para analizar datos con marca de tiempo. Esto hace que las metricas sean particularmente adecuadas para alertas y deteccion rapida de problemas.",
            category: C.MONITOR,
            subtopic: "Analisis de metricas con Azure Monitor"
        });

        originalQuizData.push({
            question: "123. Su empresa tiene una suscripcion de Azure que incluye un almacen de Recovery Services. Desea utilizar Azure Backup para programar una copia de seguridad de las maquinas virtuales (VMs) de su empresa en el almacen de Recovery Services? Cuales de las siguientes VMs puede respaldarElija todas las que correspondan.",
            options: [
                "VMs que ejecutan Windows 10.",
                "VMs que ejecutan Windows Server 2012 o superior.",
                "VMs que NO han sido apagadas.",
                "VMs que ejecutan Debian 8.2+.",
                "VMs que han sido apagadas."
            ],
            answer: "VMs que ejecutan Windows 10.,VMs que ejecutan Windows Server 2012 o superior.,VMs que NO han sido apagadas.,VMs que ejecutan Debian 8.2+.,VMs que han sido apagadas.",
            comment: "Azure Backup admite la copia de seguridad de sistemas operativos de servidor Windows de 64 bits desde Windows Server 2008, sistemas operativos Windows 10 de 64 bits, y sistemas operativos Debian de 64 bits desde Debian 7.9+. Azure Backup admite la copia de seguridad de VMs que estan apagadas o sin conexion.",
            category: C.MONITOR,
            subtopic: "Configuracion de Azure Backup"
        });

        originalQuizData.push({
            question: "124. Tiene un inquilino de Azure Active Directory (Azure AD) llamado contoso.com. Tiene un archivo CSV que contiene los nombres y direcciones de correo electronico de 500 usuarios externos. Necesita crear una cuenta de usuario invitado en contoso.com para cada uno de los 500 usuarios externos. Solucion: Crea un script de PowerShell que ejecuta el cmdlet New-AzureADMSInvitation para cada usuario externoEsto cumple el objetivo?",
            options: ["Si", "No"],
            answer: "Si",
            comment: "Si, esta solucion deberia cumplir el objetivo. El cmdlet New-AzureADMSInvitation se puede utilizar para enviar invitaciones a usuarios externos para que se conviertan en usuarios invitados en un inquilino de Azure AD. Al ejecutar el cmdlet para cada usuario externo en el archivo CSV, se puede crear una cuenta de usuario invitado.",
            category: C.ID_GOV,
            subtopic: "Gestion de usuarios invitados"
        });

        originalQuizData.push({
            question: "125. Que es Azure Bastion y cual es su principal ventaja de seguridad?",
            options: [
                "Un servicio de VPN que permite conexiones seguras a VMs",
                "Un servicio de acceso RDP/SSH completamente gestionado que elimina la necesidad de IPs publicas en las VMs",
                "Un firewall de aplicaciones web para proteger aplicaciones",
                "Un servicio de autenticacion multifactor para VMs"
            ],
            answer: "Un servicio de acceso RDP/SSH completamente gestionado que elimina la necesidad de IPs publicas en las VMs",
            comment: "Azure Bastion es un servicio de acceso RDP/SSH completamente gestionado que proporciona conectividad segura y fluida a las maquinas virtuales directamente desde el portal de Azure. La principal ventaja es que elimina la necesidad de tener direcciones IP publicas en las VMs, mejorando significativamente la seguridad.",
            category: C.NETWORK,
            subtopic: "Configuracion de Azure Bastion"
        });

        originalQuizData.push({
            question: "126. Que es Azure Application Gateway y cuando deberias usarlo?",
            options: [
                "Un equilibrador de carga de nivel 4 para distribuir trafico TCP/UDP",
                "Un equilibrador de carga de nivel 7 que proporciona enrutamiento basado en URL y descarga SSL",
                "Un firewall de aplicaciones web para proteger contra ataques",
                "Un proxy inverso para aplicaciones web"
            ],
            answer: "Un equilibrador de carga de nivel 7 que proporciona enrutamiento basado en URL y descarga SSL",
            comment: "Azure Application Gateway es un equilibrador de carga de nivel 7 que proporciona enrutamiento basado en URL, descarga SSL, y capacidades de firewall de aplicaciones web. Es ideal cuando necesitas enrutamiento basado en contenido o descarga SSL para mejorar el rendimiento.",
            category: C.NETWORK,
            subtopic: "Configuracion de Application Gateway"
        });

        originalQuizData.push({
            question: "127. Que es Azure Front Door y cual es su principal beneficio?",
            options: [
                "Un servicio de CDN para distribuir contenido estatico",
                "Un servicio de proteccion DDoS para aplicaciones web",
                "Un punto de entrada global que optimiza la entrega de aplicaciones web y proporciona alta disponibilidad",
                "Un firewall de aplicaciones web para proteger contra ataques"
            ],
            answer: "Un punto de entrada global que optimiza la entrega de aplicaciones web y proporciona alta disponibilidad",
            comment: "Azure Front Door es un punto de entrada global que optimiza la entrega de aplicaciones web y proporciona alta disponibilidad. Utiliza el protocolo Anycast para dirigir el trafico al punto de presencia mas cercano, mejorando significativamente el rendimiento y la disponibilidad.",
            category: C.NETWORK,
            subtopic: "Configuracion de Azure Front Door"
        });

        originalQuizData.push({
            question: "128. Que es Azure Container Registry (ACR) y cual es su proposito principal?",
            options: [
                "Un servicio de orquestacion de contenedores",
                "Un registro privado de Docker para almacenar y gestionar imagenes de contenedores",
                "Un servicio de monitoreo para contenedores",
                "Un servicio de backup para contenedores"
            ],
            answer: "Un registro privado de Docker para almacenar y gestionar imagenes de contenedores",
            comment: "Azure Container Registry es un servicio de registro privado de Docker que permite almacenar y gestionar imagenes de contenedores. Proporciona almacenamiento seguro, integracion con Azure Active Directory, y puede integrarse con Azure Kubernetes Service y otros servicios de Azure.",
            category: C.COMPUTE,
            subtopic: "Configuracion de Azure Container Registry"
        });

        originalQuizData.push({
            question: "129. Que es Azure Monitor y cuales son sus componentes principales?",
            options: [
                "Un servicio de backup y recuperacion",
                "Un servicio de monitoreo completo que incluye metricas, registros, alertas y dashboards",
                "Un servicio de logging para aplicaciones",
                "Un servicio de analisis de costos"
            ],
            answer: "Un servicio de monitoreo completo que incluye metricas, registros, alertas y dashboards",
            comment: "Azure Monitor es un servicio de monitoreo completo que proporciona metricas en tiempo real, recopilacion de registros, alertas configurables, dashboards personalizables y analisis de datos. Es fundamental para el monitoreo de aplicaciones e infraestructura en Azure.",
            category: C.MONITOR,
            subtopic: "Configuracion de Azure Monitor"
        });

        originalQuizData.push({
            question: "130. Que es Azure Sentinel y cual es su proposito principal?",
            options: [
                "Un servicio de backup para datos criticos",
                "Un servicio de SIEM (Security Information and Event Management) nativo de la nube",
                "Un servicio de monitoreo de rendimiento",
                "Un servicio de analisis de costos"
            ],
            answer: "Un servicio de SIEM (Security Information and Event Management) nativo de la nube",
            comment: "Azure Sentinel es un SIEM nativo de la nube que proporciona analisis de seguridad inteligente y respuesta a amenazas a nivel empresarial. Recopila datos de seguridad de toda la organizacion, detecta amenazas y responde automaticamente a incidentes de seguridad.",
            category: C.SECURITY,
            subtopic: "Configuracion de Azure Sentinel"
        });

        // Array de preguntas tipo examen (100 preguntas unicas del PDF)
        const examQuizData = [
            // Pregunta 1 - Azure Resource Manager
            {
                question: "?Cual es el proposito principal de Azure Resource Manager (ARM)?",
                options: [
                    "Solo para crear maquinas virtuales",
                    "Para gestionar y organizar recursos de Azure de manera declarativa",
                    "Solo para configurar redes virtuales",
                    "Para administrar usuarios de Azure AD"
                ],
                answer: "Para gestionar y organizar recursos de Azure de manera declarativa",
                comment: "Azure Resource Manager es el servicio de implementacion y administracion de Azure. Proporciona una capa de administracion que le permite crear, actualizar y eliminar recursos en su cuenta de Azure.",
                category: C.ID_GOV,
                subtopic: "Administracion de grupos de recursos"
            },
            // Pregunta 2 - Grupos de recursos
            {
                question: "?Que es un grupo de recursos en Azure?",
                options: [
                    "Un contenedor logico para organizar recursos relacionados",
                    "Un grupo de usuarios con permisos similares",
                    "Una coleccion de suscripciones",
                    "Un conjunto de regiones de Azure"
                ],
                answer: "Un contenedor logico para organizar recursos relacionados",
                comment: "Un grupo de recursos es un contenedor logico en el que se implementan y administran recursos de Azure como aplicaciones web, bases de datos y cuentas de almacenamiento.",
                category: C.ID_GOV,
                subtopic: "Administracion de grupos de recursos"
            },
            // Pregunta 3 - Suscripciones vs Grupos de recursos
            {
                question: "?Cual es la diferencia entre una suscripcion y un grupo de recursos?",
                options: [
                    "No hay diferencia, son lo mismo",
                    "Una suscripcion puede contener multiples grupos de recursos, pero un grupo de recursos no puede contener suscripciones",
                    "Un grupo de recursos puede contener multiples suscripciones",
                    "Las suscripciones son solo para facturacion"
                ],
                answer: "Una suscripcion puede contener multiples grupos de recursos, pero un grupo de recursos no puede contener suscripciones",
                comment: "Una suscripcion es un contenedor logico para recursos de Azure que incluye limites de facturacion y cuotas. Un grupo de recursos es un contenedor logico dentro de una suscripcion para organizar recursos relacionados.",
                category: C.ID_GOV,
                subtopic: "Administrar suscripciones"
            },
            // Pregunta 4 - Azure Policy
            {
                question: "?Que es Azure Policy?",
                options: [
                    "Un servicio de monitoreo",
                    "Un servicio que le permite crear, asignar y administrar politicas para controlar recursos",
                    "Un servicio de backup",
                    "Un servicio de networking"
                ],
                answer: "Un servicio que le permite crear, asignar y administrar politicas para controlar recursos",
                comment: "Azure Policy es un servicio que le permite crear, asignar y administrar politicas. Estas politicas aplican diferentes reglas y efectos sobre sus recursos para que estos cumplan con los estandares corporativos y los acuerdos de nivel de servicio.",
                category: C.ID_GOV,
                subtopic: "Implementacion y administracion de Azure Policy"
            },
            // Pregunta 5 - Azure Blueprints
            {
                question: "?Que es Azure Blueprints?",
                options: [
                    "Un servicio de diagramas",
                    "Un servicio que le permite definir un conjunto de recursos, politicas, roles y plantillas ARM para implementar y gobernar entornos de Azure",
                    "Un servicio de planificacion",
                    "Un servicio de documentacion"
                ],
                answer: "Un servicio que le permite definir un conjunto de recursos, politicas, roles y plantillas ARM para implementar y gobernar entornos de Azure",
                comment: "Azure Blueprints le permite definir un conjunto de recursos, politicas, roles y plantillas ARM para implementar y gobernar entornos de Azure de manera repetible y segura.",
                category: C.ID_GOV,
                subtopic: "Implementacion y administracion de Azure Policy"
            },
            // Pregunta 6 - Azure Active Directory
            {
                question: "?Que es Azure Active Directory (Azure AD)?",
                options: [
                    "Un servicio de directorio activo local",
                    "Un servicio de identidad y acceso basado en la nube de Microsoft",
                    "Un servicio de almacenamiento",
                    "Un servicio de networking"
                ],
                answer: "Un servicio de identidad y acceso basado en la nube de Microsoft",
                comment: "Azure Active Directory es el servicio de identidad y acceso basado en la nube de Microsoft que ayuda a sus empleados a iniciar sesion y acceder a recursos internos y externos.",
                category: C.ID_GOV,
                subtopic: "Administrar usuarios y grupos de Microsoft Entra"
            },
            // Pregunta 7 del PDF
            {
                question: "La solucion de Azure de su empresa utiliza la Autenticacion Multifactor cuando los usuarios no estan en la oficina. La opcion \"Por Autenticacion\" se ha configurado como modelo de uso. Despues de la adquisicion de una empresa mas pequena y la adicion del nuevo personal a Azure Active Directory (Azure AD), se le informa que estos empleados tambien deben utilizar la Autenticacion Multifactor. Para lograr esto, la configuracion \"Por Usuario Habilitado\" debe establecerse para el modelo de uso. Solucion: Reconfigura el modelo de uso existente a traves de la CLI de Azure? La solucion cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "La solucion proporcionada no cumple el objetivo de configurar la opcion \"Por Usuario Habilitado\" para que los nuevos empleados utilicen la Autenticacion Multifactor. Para lograr el resultado deseado, la configuracion \"Por Usuario Habilitado\" debe configurarse directamente para los nuevos empleados, no reconfigurando el modelo de uso existente a traves de la CLI de Azure. Dado que actualmente no es posible cambiar el modelo de uso de un proveedor existente, debe crear uno nuevo y reactivar su servidor existente con las credenciales de activacion del nuevo proveedor.",
                category: C.ID_GOV,
                subtopic: "Administracion del acceso de usuarios a los recursos de Azure"
            },
            // Pregunta 8 del PDF
            {
                question: "La solucion de Azure de su empresa utiliza la Autenticacion Multifactor cuando los usuarios no estan en la oficina. La opcion \"Por Autenticacion\" se ha configurado como modelo de uso. Despues de la adquisicion de una empresa mas pequena y la adicion del nuevo personal a Azure Active Directory (Azure AD), se le informa que estos empleados tambien deben utilizar la Autenticacion Multifactor. Para lograr esto, la configuracion \"Por Usuario Habilitado\" debe establecerse para el modelo de uso. Solucion: Crea un nuevo proveedor de Autenticacion Multifactor con una copia de seguridad de los datos del proveedor de Autenticacion Multifactor existente? La solucion cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "Esta funcionalidad estaria disponible como una caracteristica en las licencias de Azure AD Premium.",
                category: C.ID_GOV,
                subtopic: "Administracion del acceso de usuarios a los recursos de Azure"
            },
            // Pregunta 9 del PDF
            {
                question: "Su empresa tiene un inquilino de Azure Active Directory (Azure AD) llamado weyland.com configurado para coexistencia hibrida con el dominio de Active Directory local. Tiene un servidor llamado DirSync1 configurado como servidor DirSync. Crea una nueva cuenta de usuario en el Active Directory local. Ahora necesita replicar la informacion del usuario a Azure AD inmediatamente. Solucion: Ejecuta el cmdlet de PowerShell Start-ADSyncSyncCycle -PolicyType InitialLa solucion cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "NO. 'Initial' realizara una sincronizacion completa y agregara la cuenta de usuario creada, pero llevara tiempo. 'Delta' iniciara una sincronizacion delta y traera solo el ultimo cambio, por lo que sera 'inmediatamente' y cumplira los requisitos.",
                category: C.ID_GOV,
                subtopic: "Administrar usuarios y grupos de Microsoft Entra"
            },
            // Pregunta 10 del PDF
            {
                question: "Su empresa tiene un inquilino de Azure Active Directory (Azure AD) llamado weyland.com configurado para coexistencia hibrida con el dominio de Active Directory local. Tiene un servidor llamado DirSync1 configurado como servidor DirSync. Crea una nueva cuenta de usuario en el Active Directory local. Ahora necesita replicar la informacion del usuario a Azure AD inmediatamente. Solucion: Utiliza Sitios y Servicios de Active Directory para forzar la replicacion del Catalogo Global en un controlador de dominioLa solucion cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "Utilizar Sitios y Servicios de Active Directory para forzar la replicacion del Catalogo Global en un controlador de dominio no afecta directamente el proceso de sincronizacion entre el Active Directory local y Azure AD. Para replicar la nueva informacion de usuario a Azure AD inmediatamente, debe usar Azure AD Connect.",
                category: C.ID_GOV,
                subtopic: "Administrar usuarios y grupos de Microsoft Entra"
            },
            // Pregunta 11 del PDF
            {
                question: "Su empresa tiene un inquilino de Azure Active Directory (Azure AD) llamado weyland.com configurado para coexistencia hibrida con el dominio de Active Directory local. Tiene un servidor llamado DirSync1 configurado como servidor DirSync. Crea una nueva cuenta de usuario en el Active Directory local. Ahora necesita replicar la informacion del usuario a Azure AD inmediatamente. Solucion: Reinicia el servicio NetLogon en un controlador de dominioLa solucion cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "Si necesita ejecutar manualmente un ciclo de sincronizacion, entonces desde PowerShell ejecute Start-ADSyncSyncCycle -PolicyType Delta. Para iniciar un ciclo de sincronizacion completo, ejecute Start-ADSyncSyncCycle -PolicyType Initial. Ejecutar un ciclo de sincronizacion completo puede ser muy lento, por lo que si necesita replicar la informacion de usuario a Azure AD inmediatamente, debe ejecutar Start-ADSyncSyncCycle -PolicyType Delta.",
                category: C.ID_GOV,
                subtopic: "Administrar usuarios y grupos de Microsoft Entra"
            },
            // Pregunta 12 del PDF
            {
                question: "Su empresa tiene una suscripcion de Microsoft Azure. La empresa tiene centros de datos en Los Ingeles y Nueva York. Esta configurando los dos centros de datos como sitios geoclusterizados para la resiliencia del sitio. Debe recomendar una opcion de redundancia de almacenamiento de Azure. Tiene los siguientes requisitos de almacenamiento de datos: â€¢ Los datos deben almacenarse en multiples nodos. â€¢ Los datos deben almacenarse en nodos en ubicaciones geograficas separadas. â€¢ Los datos se pueden leer tanto desde la ubicacion secundaria como desde la ubicacion principalCual de las siguientes opciones de redundancia de almacenamiento de Azure debe recomendar?",
                options: [
                    "Almacenamiento geo-redundante",
                    "Almacenamiento geo-redundante de solo lectura",
                    "Almacenamiento con redundancia de zona",
                    "Almacenamiento con redundancia local"
                ],
                answer: "Almacenamiento geo-redundante de solo lectura",
                comment: "El almacenamiento geo-redundante de solo lectura (RA-GRS) se utiliza para lograr una mayor disponibilidad en caso de que los datos no esten disponibles en la region principal. Esta es una caracteristica opcional que requiere que la cuenta de almacenamiento este georeplicada.",
                category: C.STORAGE,
                subtopic: "Configuracion de la redundancia de Azure Storage"
            },
            // Pregunta 13 del PDF
            {
                question: "Su empresa tiene una suscripcion de Azure que incluye una cuenta de almacenamiento, un grupo de recursos, un contenedor de blobs y un recurso compartido de archivos. Un colega llamado Jon Ross utiliza una plantilla de Azure Resource Manager (ARM) para implementar una maquina virtual y una cuenta de Azure Storage adicional. Desea revisar la plantilla ARM que utilizo Jon Ross. Solucion: Accede al panel de la Maquina VirtualLa solucion cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "No, acceder al panel de la Maquina Virtual no proporciona acceso a la plantilla ARM utilizada por Jon Ross. El panel de la Maquina Virtual solo muestra informacion sobre la VM y sus recursos relacionados, pero no la plantilla ARM utilizada para implementarla. Para revisar la plantilla ARM, debe acceder al historial de implementaciones del grupo de recursos donde se implementaron la VM y la cuenta de almacenamiento adicional.",
                category: C.COMPUTE,
                subtopic: "Interpretacion de una plantilla de Azure Resource Manager o un archivo de Bicep"
            },
            // Pregunta 14 del PDF
            {
                question: "Su empresa tiene una suscripcion de Azure que incluye una cuenta de almacenamiento, un grupo de recursos, un contenedor de blobs y un recurso compartido de archivos. Un colega llamado Jon Ross utiliza una plantilla de Azure Resource Manager (ARM) para implementar una maquina virtual y una cuenta de Azure Storage adicional. Desea revisar la plantilla ARM que utilizo Jon Ross. Solucion: Accede al panel del Grupo de RecursosLa solucion cumple el objetivo?",
                options: ["Si", "No"],
                answer: "Si",
                comment: "Para ver una plantilla desde el historial de implementacion: 1. Vaya al grupo de recursos de su nuevo grupo de recursos. Seleccione el enlace que muestra el resultado de la ultima implementacion. 2. Vera un historial de implementaciones; seleccione la implementacion. 3. El portal muestra un resumen de la implementacion. Para ver la plantilla que uso para la implementacion, seleccione \"Ver plantilla\". Debe usar el panel del Grupo de Recursos.",
                category: C.COMPUTE,
                subtopic: "Interpretacion de una plantilla de Azure Resource Manager o un archivo de Bicep"
            },
            // Pregunta 15 del PDF
            {
                question: "Su empresa tiene una suscripcion de Azure que incluye una cuenta de almacenamiento, un grupo de recursos, un contenedor de blobs y un recurso compartido de archivos. Un colega llamado Jon Ross utiliza una plantilla de Azure Resource Manager (ARM) para implementar una maquina virtual y una cuenta de Azure Storage adicional. Desea revisar la plantilla ARM que utilizo Jon Ross. Solucion: Accede al panel del ContenedorLa solucion cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "Debe usar el panel del Grupo de Recursos. No, acceder al panel del Contenedor no proporciona acceso a la plantilla ARM utilizada por Jon Ross. El panel del Contenedor muestra informacion sobre el contenedor de blobs dentro de la cuenta de almacenamiento, pero no proporciona acceso al historial de implementacion ni a las plantillas ARM.",
                category: C.STORAGE,
                subtopic: "Creacion y configuracion de un contenedor en Blob Storage"
            },
            // Pregunta 16 del PDF
            {
                question: "Su empresa tiene tres maquinas virtuales (VMs) incluidas en un conjunto de disponibilidad. Intenta cambiar el tamano de una de las VMs, lo que devuelve un mensaje de error de asignacion. Es imperativo que se cambie el tamano de la VMCual de las siguientes acciones debe tomar?",
                options: [
                    "Solo debe detener una de las VMs.",
                    "Debe detener dos de las VMs.",
                    "Debe detener las tres VMs.",
                    "Debe eliminar la VM necesaria del conjunto de disponibilidad."
                ],
                answer: "Debe detener las tres VMs.",
                comment: "Si la VM que desea redimensionar forma parte de un conjunto de disponibilidad, entonces debe detener todas las VMs del conjunto de disponibilidad antes de cambiar el tamano de cualquier VM en el conjunto de disponibilidad. La razon es que todas las VMs en ejecucion en el conjunto de disponibilidad deben usar el mismo cluster de hardware fisico. Por lo tanto, si se requiere un cambio de cluster de hardware fisico, todas las VMs deben detenerse primero y luego reiniciarse una por una en diferentes clusteres de hardware fisico.",
                category: C.COMPUTE,
                subtopic: "Administracion de los tamanos de maquina virtual"
            },
            // Pregunta 17 del PDF
            {
                question: "Tiene una maquina virtual (VM) de Azure que tiene un unico disco de datos. Se le ha encomendado la tarea de adjuntar este disco de datos a otra VM de Azure. Debe asegurarse de que su estrategia permita que las maquinas virtuales esten fuera de linea el menor tiempo posibleCual de las siguientes acciones debe tomar PRIMERO?",
                options: [
                    "Detener la VM que incluye el disco de datos.",
                    "Detener la VM a la que se debe adjuntar el disco de datos.",
                    "Desacoplar el disco de datos.",
                    "Eliminar la VM que incluye el disco de datos."
                ],
                answer: "Desacoplar el disco de datos.",
                comment: "Puede simplemente desacoplar un disco de datos de una VM y adjuntarlo a la otra VM sin detener ninguna de las VMs. Desacoplar un disco no requiere que detenga o elimine la VM, asegurando que la VM misma permanezca operativa.",
                category: C.COMPUTE,
                subtopic: "Administracion de discos de maquinas virtuales"
            },
            // Pregunta 18 del PDF
            {
                question: "Su empresa tiene una suscripcion de Azure. Necesita implementar varias maquinas virtuales (VMs) de Azure utilizando plantillas de Azure Resource Manager (ARM). Se le ha informado que las VMs se incluiran en un unico conjunto de disponibilidad. Se le exige asegurarse de que la plantilla ARM que configure permita que la mayor cantidad posible de VMs permanezcan accesibles en caso de fallos de infraestructura o mantenimientoCual de los siguientes valores debe configurar para la propiedad platformFaultDomainCount?",
                options: ["10", "30", "Valor minimo", "Valor maximo"],
                answer: "Valor maximo",
                comment: "El numero de dominios de error para los conjuntos de disponibilidad administrados varia por region (dos o tres). Un dominio de error es un grupo de recursos de hardware subyacentes fisicamente separados. En Azure, el valor maximo para platformFaultDomainCount es 3. Para asegurar la maxima accesibilidad en caso de falla, debe establecer la propiedad platformFaultDomainCount en su valor maximo de 3.",
                category: C.COMPUTE,
                subtopic: "Implementacion de maquinas virtuales en zonas de disponibilidad y conjuntos de disponibilidad"
            },
            // Pregunta 19 del PDF
            {
                question: "Su empresa tiene una suscripcion de Azure. Necesita implementar varias maquinas virtuales (VMs) de Azure utilizando plantillas de Azure Resource Manager (ARM). Se le ha informado que las VMs se incluiran en un unico conjunto de disponibilidad. Se le exige asegurarse de que la plantilla ARM que configure permita que la mayor cantidad posible de VMs permanezcan accesibles en caso de fallos de infraestructura o mantenimientoCual de los siguientes valores debe configurar para la propiedad platformUpdateDomainCount?",
                options: ["10", "30", "40"],
                answer: "30",
                comment: "A cada maquina virtual en su conjunto de disponibilidad se le asigna un dominio de actualizacion y un dominio de error. Por defecto, se asignan cinco dominios de actualizacion no configurables por el usuario (las implementaciones de Resource Manager pueden luego aumentarse para proporcionar hasta 20 dominios de actualizacion) para indicar grupos de maquinas virtuales y hardware fisico subyacente que pueden reiniciarse al mismo tiempo.",
                category: C.COMPUTE,
                subtopic: "Implementacion de maquinas virtuales en zonas de disponibilidad y conjuntos de disponibilidad"
            },
            // Pregunta 20 del PDF
            {
                question: "Ha descargado una plantilla de Azure Resource Manager (ARM) para implementar numerosas maquinas virtuales (VMs). La plantilla ARM se basa en una VM actual, pero debe adaptarse para hacer referencia a una contrasena administrativa. Debe asegurarse de que la contrasena no se almacene en texto sin formato. Se esta preparando para crear los componentes necesarios para lograr su objetivoCual de los siguientes elementos debe crear para lograr su objetivo?",
                options: [
                    "Un Azure Key Vault",
                    "Una politica de acceso",
                    "Ambos elementos anteriores",
                    "Ninguno de los elementos anteriores"
                ],
                answer: "Ambos elementos anteriores",
                comment: "Un Azure Key Vault: para almacenar de forma segura la contrasena administrativa, garantizando que no este en texto sin formato. Una politica de acceso: para controlar el acceso a los secretos almacenados en el Key Vault, especificando quien puede realizar operaciones sobre ellos.",
                category: C.ID_GOV,
                subtopic: "Implementacion y administracion de Azure Policy"
            },
            // Pregunta 21 del PDF
            {
                question: "Su empresa tiene un inquilino de Azure Active Directory (Azure AD) configurado para coexistencia hibrida con el dominio de Active Directory local. Planea implementar varias VMs nuevas. Necesita una solucion que garantice que los scripts se ejecuten en las nuevas VMsCual de las siguientes es la mejor solucion?",
                options: [
                    "Configurar un archivo por lotes SetupComplete.cmd en el directorio %windir%\\setup\\scripts.",
                    "Configurar un Objeto de Politica de Grupo (GPO) para ejecutar los scripts como scripts de inicio de sesion.",
                    "Configurar un Objeto de Politica de Grupo (GPO) para ejecutar los scripts como scripts de inicio.",
                    "Colocar los scripts en un nuevo disco duro virtual (VHD)."
                ],
                answer: "Configurar un archivo por lotes SetupComplete.cmd en el directorio %windir%\\setup\\scripts.",
                comment: "Despues de implementar una Maquina Virtual, a menudo necesita realizar cambios. Una alternativa para personalizar su VM es la extension CustomScript. Esta extension es ejecutada por el Agente de VM y le permite especificar que archivos descargar de su cuenta de almacenamiento y que archivo ejecutar (el unico requisito es que ejecute un archivo .ps1).",
                category: C.COMPUTE,
                subtopic: "Creacion de una maquina virtual"
            },
            // Pregunta 22 del PDF
            {
                question: "Su empresa tiene un inquilino de Azure Active Directory (Azure AD) configurado para coexistencia hibrida con el dominio de Active Directory local. Planea implementar varias maquinas virtuales (VMs) nuevas en Azure. Las VMs tendran el mismo sistema operativo y los mismos requisitos de software personalizados. Configura una VM de referencia en el entorno virtual local. Luego generaliza la VM para crear una imagen. Necesita cargar la imagen a Azure para asegurarse de que este disponible para su seleccion cuando cree las nuevas VMs de Azure. Que cmdlets de PowerShell debe usar?",
                options: [
                    "Add-AzVM",
                    "Add-AzVhd",
                    "Add-AzImage",
                    "Add-AzImageDataDisk"
                ],
                answer: "Add-AzVhd",
                comment: "El cmdlet Add-AzVhd carga discos duros virtuales locales, en formato de archivo .vhd, a una cuenta de almacenamiento de blobs como discos duros virtuales fijos.",
                category: C.COMPUTE,
                subtopic: "Creacion de una maquina virtual"
            },
            // Pregunta 23 del PDF
            {
                question: "Su empresa tiene una suscripcion de Azure que incluye varias maquinas virtuales (VMs) de Azure, todas ellas parte de la misma red virtual. Su empresa tambien tiene un servidor Hyper-V local que aloja una VM, llamada VM1, que debe replicarse en AzureCuales de los siguientes objetos deben crearse para lograr este objetivo?",
                options: [
                    "Sitio Hyper-V, Azure Recovery Services Vault, Politica de replicacion",
                    "Solo Azure Recovery Services Vault",
                    "Solo Sitio Hyper-V",
                    "Solo Politica de replicacion"
                ],
                answer: "Sitio Hyper-V, Azure Recovery Services Vault, Politica de replicacion",
                comment: "Sitio Hyper-V: Representa los servidores Hyper-V locales que se protegeran. Azure Recovery Services Vault: Un componente clave en ASR que almacena puntos de recuperacion y orquesta la replicacion, la conmutacion por error y la recuperacion ante desastres. Politica de replicacion: Define la configuracion de replicacion, incluida la frecuencia y la retencion.",
                category: C.MONITOR,
                subtopic: "Configuracion de Recovery Services Vault"
            },
            // Pregunta 24 del PDF
            {
                question: "La suscripcion de Azure de su empresa incluye dos redes de Azure llamadas VirtualNetworkA y VirtualNetworkB. VirtualNetworkA incluye una puerta de enlace VPN que esta configurada para utilizar enrutamiento estatico. Ademas, existe una conexion VPN de sitio a sitio entre la red local de su empresa y VirtualNetworkA. Ha configurado una conexion VPN de punto a sitio a VirtualNetworkA desde una estacion de trabajo con Windows 10. Despues de configurar el emparejamiento de redes virtuales entre VirtualNetworkA y VirtualNetworkB, confirma que puede acceder a VirtualNetworkB desde la red local de la empresa. Sin embargo, descubre que no puede establecer una conexion con VirtualNetworkB desde la estacion de trabajo con Windows 10. La solucion cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "El hecho de que pueda acceder a VirtualNetworkB desde la red local indica que \"Permitir/Usar transito de puerta de enlace\" esta configurado y funcionando. El siguiente paso para resolver el problema del cliente con Windows 10 seria reiniciar/reinstalar la configuracion del cliente VPN en la estacion de trabajo.",
                category: C.NETWORK,
                subtopic: "Creacion y configuracion del emparejamiento de red virtual"
            },
            // Pregunta 25 del PDF
            {
                question: "La suscripcion de Azure de su empresa incluye dos redes de Azure llamadas VirtualNetworkA y VirtualNetworkB. VirtualNetworkA incluye una puerta de enlace VPN que esta configurada para utilizar enrutamiento estatico. Ademas, existe una conexion VPN de sitio a sitio entre la red local de su empresa y VirtualNetworkA. Ha configurado una conexion VPN de punto a sitio a VirtualNetworkA desde una estacion de trabajo con Windows 10. Despues de configurar el emparejamiento de redes virtuales entre VirtualNetworkA y VirtualNetworkB, confirma que puede acceder a VirtualNetworkB desde la red local de la empresa. Sin embargo, descubre que no puede establecer una conexion con VirtualNetworkB desde la estacion de trabajo con Windows 10. Debe asegurarse de que se pueda establecer una conexion con VirtualNetworkB desde la estacion de trabajo con Windows 10. Solucion: Elige la configuracion \"Permitir transito de puerta de enlace\" en VirtualNetworkB? La solucion cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "Si realiza un cambio en la topologia de su red y tiene clientes VPN de Windows, el paquete de cliente VPN para clientes de Windows debe descargarse e instalarse de nuevo para que los cambios se apliquen al cliente.",
                category: C.NETWORK,
                subtopic: "Creacion y configuracion del emparejamiento de red virtual"
            },
            // Pregunta 26 del PDF
            {
                question: "La suscripcion de Azure de su empresa incluye dos redes de Azure llamadas VirtualNetworkA y VirtualNetworkB. VirtualNetworkA incluye una puerta de enlace VPN que esta configurada para utilizar enrutamiento estatico. Ademas, existe una conexion VPN de sitio a sitio entre la red local de su empresa y VirtualNetworkA. Ha configurado una conexion VPN de punto a sitio a VirtualNetworkA desde una estacion de trabajo con Windows 10. Despues de configurar el emparejamiento de redes virtuales entre VirtualNetworkA y VirtualNetworkB, confirma que puede acceder a VirtualNetworkB desde la red local de la empresa. Sin embargo, descubre que no puede establecer una conexion con VirtualNetworkB desde la estacion de trabajo con Windows 10. Debe asegurarse de que se pueda establecer una conexion con VirtualNetworkB desde la estacion de trabajo con Windows 10. Solucion: Descarga y reinstala el paquete de configuracion del cliente VPN en la estacion de trabajo con Windows 10. La solucion cumple el objetivo?",
                options: ["Si", "No"],
                answer: "Si",
                comment: "Si realiza un cambio en la topologia de su red y tiene clientes VPN de Windows, el paquete de cliente VPN para clientes de Windows debe descargarse e instalarse de nuevo para que los cambios se apliquen al cliente.",
                category: C.NETWORK,
                subtopic: "Creacion y configuracion del emparejamiento de red virtual"
            },
            // Pregunta 27 del PDF
            {
                question: "Su empresa tiene maquinas virtuales (VMs) alojadas en Microsoft Azure. Las VMs estan ubicadas en una unica red virtual de Azure llamada VNet1. La empresa tiene usuarios que trabajan de forma remota. Los trabajadores remotos requieren acceso a las VMs en VNet1. Necesita proporcionar acceso a los trabajadores remotosQue debe hacer?",
                options: [
                    "Configurar una VPN de sitio a sitio (S2S).",
                    "Configurar una VPN de VNet a VNet.",
                    "Configurar una VPN de punto a sitio (P2S).",
                    "Configurar DirectAccess en una VM de servidor Windows Server 2012.",
                    "Configurar una VPN multisitio."
                ],
                answer: "Configurar una VPN de punto a sitio (P2S).",
                comment: "Una conexion de puerta de enlace VPN de punto a sitio (P2S) le permite crear una conexion segura a su red virtual desde un equipo cliente individual. Este tipo de conexion permite a los clientes remotos individuales conectarse de forma segura a una red virtual (VNet) de Azure a traves de Internet. Una VPN de sitio a sitio (S2S) se usa para conectar redes locales a una VNet de Azure, mientras que una VPN de VNet a VNet se usa para conectar dos o mas VNets de Azure entre si.",
                category: C.NETWORK,
                subtopic: "Creacion y configuracion de redes virtuales y subredes"
            },
            // Pregunta 28 del PDF
            {
                question: "Su empresa tiene un grupo de disponibilidad Microsoft SQL Server Always On configurado en sus maquinas virtuales (VMs) de Azure. Necesita configurar un equilibrador de carga interno de Azure como oyente para el grupo de disponibilidad. Solucion: Crea una sonda de salud HTTP en el puerto 1433. La solucion cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "No, crear una sonda de salud HTTP en el puerto 1433 no cumple el objetivo. Para configurar un equilibrador de carga interno de Azure como oyente para el grupo de disponibilidad, debe crear una sonda de salud TCP en el puerto 1433. SQL Server utiliza TCP para comunicarse en el puerto 1433.",
                category: C.NETWORK,
                subtopic: "Configuracion de un equilibrador de carga interno o publico"
            },
            // Pregunta 29 del PDF
            {
                question: "Su empresa tiene un grupo de disponibilidad Microsoft SQL Server Always On configurado en sus maquinas virtuales (VMs) de Azure. Necesita configurar un equilibrador de carga interno de Azure como oyente para el grupo de disponibilidad. Solucion: Configura la persistencia de sesion en \"IP de Cliente\"? La solucion cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "La persistencia de sesion asegura que un cliente permanecera conectado al mismo servidor durante toda una sesion o periodo de tiempo. Debido a que el equilibrio de carga puede, por defecto, enviar a los usuarios a servidores unicos cada vez que se conectan, esto puede significar que las solicitudes complicadas o repetidas se ralenticen.",
                category: C.NETWORK,
                subtopic: "Configuracion de un equilibrador de carga interno o publico"
            },
            // Pregunta 30 del PDF
            {
                question: "Su empresa tiene un grupo de disponibilidad Microsoft SQL Server Always On configurado en sus maquinas virtuales (VMs) de Azure. Necesita configurar un equilibrador de carga interno de Azure como oyente para el grupo de disponibilidad. Solucion: Habilita la IP FlotanteLa solucion cumple el objetivo?",
                options: ["Si", "No"],
                answer: "Si",
                comment: "Si, habilitar la IP Flotante en el equilibrador de carga interno de Azure como oyente para el grupo de disponibilidad puede cumplir el objetivo. Al habilitar la IP Flotante, el equilibrador de carga utilizara una direccion IP flotante como direccion IP de origen para los flujos salientes del grupo de backend. Esto asegurara que la direccion IP utilizada por el grupo de backend permanezca igual incluso si una VM se reinicia o se reemplaza, lo cual es importante para mantener el oyente del grupo de disponibilidad.",
                category: C.NETWORK,
                subtopic: "Configuracion de un equilibrador de carga interno o publico"
            },
            // Pregunta 31 del PDF
            {
                question: "Su empresa tiene dos servidores locales llamados SRV01 y SRV02. Los desarrolladores han creado una aplicacion que se ejecuta en SRV01. La aplicacion llama a un servicio en SRV02 por direccion IP. Planea migrar la aplicacion a maquinas virtuales (VMs) de Azure. Ha configurado dos VMs en una unica subred en una red virtual de Azure. Necesita configurar las dos VMs con direcciones IP internas estaticasQue debe hacer?",
                options: [
                    "Ejecutar el cmdlet de PowerShell New-AzureRMVMConfig.",
                    "Ejecutar el cmdlet de PowerShell Set-AzureSubnet.",
                    "Modificar las propiedades de la VM en el Portal de administracion de Azure.",
                    "Modificar las propiedades de IP en el Centro de redes y recursos compartidos de Windows.",
                    "Ejecutar el cmdlet de PowerShell Set-AzureStaticVNetIP."
                ],
                answer: "Ejecutar el cmdlet de PowerShell Set-AzureStaticVNetIP.",
                comment: "Para establecer una direccion IP estatica para una VM creada previamente, puede usar el cmdlet Set-AzureStaticVNetIP. Si ya existe una IP, debe eliminarla antes. El cmdlet Update-AzureVM reinicia la VM como parte del proceso de actualizacion para asignar la nueva IP.",
                category: C.NETWORK,
                subtopic: "Creacion y configuracion de redes virtuales y subredes"
            },
            // Pregunta 32 del PDF
            {
                question: "Su empresa tiene una suscripcion de Azure Active Directory (Azure AD). Necesita implementar cinco maquinas virtuales (VMs) en la subred de la red virtual de su empresa. Cada VM tendra una direccion IP publica y una privada. Las reglas de seguridad de entrada y salida para todas estas maquinas virtuales deben ser identicasCual es la menor cantidad de interfaces de red necesarias para esta configuracion?",
                options: ["5", "10", "20", "40"],
                answer: "5",
                comment: "Para implementar cinco VMs con direcciones IP publicas y privadas, necesitaria al menos cinco interfaces de red (una para cada VM). Cada VM requiere una interfaz de red para conectarse a la red virtual. Aunque tengan las mismas reglas de seguridad de entrada y salida, se puede crear un NSG y adjuntarlo a cada NIC. Por lo tanto, 5 NICs es la respuesta correcta.",
                category: C.NETWORK,
                subtopic: "Creacion y configuracion de redes virtuales y subredes"
            },
            // Pregunta 33 del PDF
            {
                question: "Su empresa tiene una suscripcion de Azure Active Directory (Azure AD). Necesita implementar cinco maquinas virtuales (VMs) en la subred de la red virtual de su empresa. Cada VM tendra una direccion IP publica y una privada. Las reglas de seguridad de entrada y salida para todas estas maquinas virtuales deben ser identicasCual es la menor cantidad de grupos de seguridad necesarios para esta configuracion?",
                options: ["4", "3", "2", "1"],
                answer: "1",
                comment: "En Azure, los Grupos de Seguridad de Red (NSG) se utilizan para controlar el trafico. Dado que todas las VMs requieren las mismas reglas de seguridad, puede asignar un unico NSG a nivel de subred. Esto garantiza que las reglas de seguridad se apliquen uniformemente a todas las VMs dentro de esa subred.",
                category: C.NETWORK,
                subtopic: "Creacion y configuracion de grupos de seguridad de red (NSG) y grupos de seguridad de aplicaciones"
            },
            // Pregunta 34 del PDF
            {
                question: "La suscripcion de Azure de su empresa incluye maquinas virtuales (VMs) de Azure que ejecutan Windows Server 2016. Una de las VMs se respalda todos los dias utilizando Azure Backup Instant Restore. Cuando la VM se infecta con ransomware de cifrado de datos, decide recuperar los archivos de la VMCual de las siguientes afirmaciones es VERDADERA en este escenario?",
                options: [
                    "Solo puede recuperar los archivos en la VM infectada.",
                    "Puede recuperar los archivos en cualquier VM dentro de la suscripcion de la empresa.",
                    "Solo puede recuperar los archivos en una nueva VM.",
                    "No podra recuperar los archivos."
                ],
                answer: "Puede recuperar los archivos en cualquier VM dentro de la suscripcion de la empresa.",
                comment: "Puede restaurar archivos montando la copia de seguridad en su propia maquina local o en cualquier VM en Azure siempre que tengan la misma version del SO. No puede restaurar archivos a una version anterior o posterior del SO; debe ser un sistema operativo cliente compatible. Restaurar archivos a una VM infectada no es la mejor opcion.",
                category: C.MONITOR,
                subtopic: "Configuracion de Recovery Services Vault"
            },
            // Pregunta 35 del PDF
            {
                question: "La suscripcion de Azure de su empresa incluye maquinas virtuales (VMs) de Azure que ejecutan Windows Server 2016. Una de las VMs se respalda todos los dias utilizando Azure Backup Instant Restore. Cuando la VM se infecta con ransomware de cifrado de datos, se le exige restaurar la VMCual de las siguientes acciones debe tomar?",
                options: [
                    "Debe restaurar la VM despues de eliminar la VM infectada.",
                    "Debe restaurar la VM a cualquier VM dentro de la suscripcion de la empresa.",
                    "Debe restaurar la VM a una nueva VM de Azure.",
                    "Debe restaurar la VM a un dispositivo Windows local."
                ],
                answer: "Debe restaurar la VM a una nueva VM de Azure.",
                comment: "Azure Backup proporciona la restauracion instantanea para VMs, lo que permite una recuperacion rapida en casos como ataques de ransomware. El mejor enfoque es restaurar la VM a una nueva VM de Azure en lugar de sobrescribir o restaurar en una VM existente, para asegurar que la VM infectada no afecte el sistema restaurado.",
                category: C.MONITOR,
                subtopic: "Configuracion de Recovery Services Vault"
            },
            // Pregunta 36 del PDF
            {
                question: "Administra una solucion en Azure que actualmente presenta problemas de rendimiento. Necesita encontrar la causa de los problemas de rendimiento relacionados con las metricas en la infraestructura de Azure.",
                options: [
                    "Azure Sentinel",
                    "Azure Monitor",
                    "Registro de actividad de Azure",
                    "Azure Advisor"
                ],
                answer: "Azure Monitor",
                comment: "Las metricas en Azure Monitor se almacenan en una base de datos de series temporales optimizada para analizar datos con marca de tiempo. Esto hace que las metricas sean particularmente adecuadas para alertas y deteccion rapida de problemas.",
                category: C.MONITOR,
                subtopic: "Interpretacion de metricas en Azure Monitor"
            },
            // Pregunta 37 del PDF
            {
                question: "Su empresa tiene una suscripcion de Azure que incluye un almacen de Recovery Services. Desea utilizar Azure Backup para programar una copia de seguridad de las maquinas virtuales (VMs) de su empresa en el almacen de Recovery Services? Cuales de las siguientes VMs puede respaldarElija todas las que correspondan.",
                options: [
                    "VMs que ejecutan Windows 10.",
                    "VMs que ejecutan Windows Server 2012 o superior.",
                    "VMs que NO han sido apagadas.",
                    "VMs que ejecutan Debian 8.2+.",
                    "VMs que han sido apagadas."
                ],
                answer: "VMs que ejecutan Windows 10., VMs que ejecutan Windows Server 2012 o superior., VMs que NO han sido apagadas., VMs que ejecutan Debian 8.2+., VMs que han sido apagadas.",
                comment: "Azure Backup admite la copia de seguridad de sistemas operativos de servidor Windows de 64 bits desde Windows Server 2008, sistemas operativos Windows 10 de 64 bits, y sistemas operativos Debian de 64 bits desde Debian 7.9+. Azure Backup admite la copia de seguridad de VMs que estan apagadas o sin conexion.",
                category: C.MONITOR,
                subtopic: "Configuracion de Recovery Services Vault"
            },
            // Pregunta 38 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory (Azure AD) llamado contoso.com. Tiene un archivo CSV que contiene los nombres y direcciones de correo electronico de 500 usuarios externos. Necesita crear una cuenta de usuario invitado en contoso.com para cada uno de los 500 usuarios externos. Solucion: Crea un script de PowerShell que ejecuta el cmdlet New-AzureADUser para cada usuarioEsto cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "El cmdlet New-AzureADUser crea un usuario en Azure Active Directory (Azure AD). Para invitar a un nuevo usuario externo a su directorio, debe usar el cmdlet New-AzureADMSInvitation.",
                category: C.ID_GOV,
                subtopic: "Administracion de usuarios externos"
            },
            // Pregunta 39 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory (Azure AD) llamado contoso.com. Tiene un archivo CSV que contiene los nombres y direcciones de correo electronico de 500 usuarios externos. Necesita crear una cuenta de usuario invitado en contoso.com para cada uno de los 500 usuarios externos. Solucion: Desde Azure AD en el portal de Azure, utiliza la operacion \"Crear usuarios en bloque\"? Esto cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "\"Creacion en bloque\" es para nuevos usuarios de Azure AD, no para invitados. Para invitados, debe usar \"Invitar usuarios en bloque\" y preparar un archivo .csv con la informacion del usuario y las preferencias de invitacion. Tambien se puede usar el cmdlet New-AzureADMSInvitation para invitar a usuarios externos.",
                category: C.ID_GOV,
                subtopic: "Administracion de usuarios externos"
            },
            // Pregunta 40 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory (Azure AD) llamado contoso.com. Tiene un archivo CSV que contiene los nombres y direcciones de correo electronico de 500 usuarios externos. Necesita crear una cuenta de usuario invitado en contoso.com para cada uno de los 500 usuarios externos. Solucion: Crea un script de PowerShell que ejecuta el cmdlet New-AzureADMSInvitation para cada usuario externoEsto cumple el objetivo?",
                options: ["Si", "No"],
                answer: "Si",
                comment: "Si, esta solucion deberia cumplir el objetivo. El cmdlet New-AzureADMSInvitation se puede utilizar para enviar invitaciones a usuarios externos para que se conviertan en usuarios invitados en un inquilino de Azure AD. Al ejecutar el cmdlet para cada usuario externo en el archivo CSV, se puede crear una cuenta de usuario invitado.",
                category: C.ID_GOV,
                subtopic: "Administracion de usuarios externos"
            },
            // Pregunta 41 del PDF
            {
                question: "Tiene las maquinas virtuales de Azure que se muestran en la siguiente tabla: (tabla no proporcionada) Tiene un almacen de Recovery Services que protege VM1 y VM2. Necesita proteger VM3 y VM4 utilizando Recovery ServicesQue debe hacer primero?",
                options: [
                    "Crear un nuevo almacen de Recovery Services",
                    "Crear una cuenta de almacenamiento",
                    "Configurar las extensiones para VM3 y VM4",
                    "Crear una nueva politica de copia de seguridad"
                ],
                answer: "Crear un nuevo almacen de Recovery Services",
                comment: "Un almacen de Recovery Services es una entidad de almacenamiento en Azure que almacena datos. Se utiliza para contener datos de copia de seguridad o informacion de configuracion para VMs, cargas de trabajo, servidores o estaciones de trabajo, y puede usarse para diversos servicios de Azure.",
                category: C.MONITOR,
                subtopic: "Configuracion de Recovery Services Vault"
            },
            // Pregunta 42 del PDF
            {
                question: "Tiene una suscripcion de Azure llamada Subscription1 que contiene un grupo de recursos llamado RG1. En RG1, crea un equilibrador de carga interno llamado LB1 y un equilibrador de carga publico llamado LB2. Debe asegurarse de que un administrador llamado Admin1 pueda administrar LB1 y LB2. La solucion debe seguir el principio de privilegio minimoQue rol debe asignar a Admin1 para cada tarea?",
                options: [
                    "Rol para LB1: Colaborador de red, Rol para LB2: Colaborador de red",
                    "Rol para LB1: Propietario, Rol para LB2: Propietario",
                    "Rol para LB1: Lector, Rol para LB2: Lector",
                    "Rol para LB1: Administrador de acceso de usuario, Rol para LB2: Administrador de acceso de usuario"
                ],
                answer: "Rol para LB1: Colaborador de red, Rol para LB2: Colaborador de red",
                comment: "El rol de Colaborador de red en LB1 y LB2 es la respuesta correcta. Con este rol, el usuario puede agregar o crear una direccion de backend y crear o modificar sondas de salud. Si se desea agregar direcciones a los grupos de backend (ej., IPs de una VNet), se requiere el rol de Colaborador de red a nivel de grupo de recursos (o al menos en la VNet).",
                category: C.NETWORK,
                subtopic: "Configuracion de un equilibrador de carga interno o publico"
            },
            // Pregunta 43 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un inquilino de Azure Active Directory (Azure AD) llamado contoso.com y un cluster de Azure Kubernetes Service (AKS) llamado AKS1. Un administrador informa que no puede conceder acceso a AKS1 a los usuarios de contoso.com. Debe asegurarse de que se pueda conceder acceso a AKS1 a los usuarios de contoso.comQue debe hacer primero?",
                options: [
                    "Desde contoso.com, modificar la configuracion de relaciones de la organizacion.",
                    "Desde contoso.com, crear un punto de conexion de autorizacion OAuth 2.0.",
                    "Recrear AKS1.",
                    "Desde AKS1, crear un espacio de nombres."
                ],
                answer: "Desde contoso.com, crear un punto de conexion de autorizacion OAuth 2.0.",
                comment: "Los administradores del cluster pueden configurar el control de acceso basado en roles de Kubernetes (Kubernetes RBAC) basado en la identidad de un usuario o la pertenencia a un grupo. La autenticacion de Azure AD se proporciona a los clusteres de AKS con OpenID Connect, que es una capa de identidad construida sobre el protocolo OAuth 2.0.",
                category: C.COMPUTE,
                subtopic: "Aprovisionamiento de un contenedor con Azure Container Apps"
            },
            // Pregunta 44 del PDF
            {
                question: "Tiene un inquilino de Microsoft 365 y un inquilino de Azure Active Directory (Azure AD) llamado contoso.com. Planea conceder acceso a tres usuarios llamados User1, User2 y User3 a una biblioteca de documentos temporal de Microsoft SharePoint llamada Library1. Necesita crear grupos para los usuarios. La solucion debe garantizar que los grupos se eliminen automaticamente despues de 180 diasQue dos grupos debe crear?",
                options: [
                    "Un grupo de Microsoft 365 que utiliza el tipo de pertenencia Asignado y un grupo de Microsoft 365 que utiliza el tipo de pertenencia de Usuario Dinamico",
                    "Un grupo de seguridad que utiliza el tipo de pertenencia Asignado y un grupo de seguridad que utiliza el tipo de pertenencia de Usuario Dinamico",
                    "Un grupo de Microsoft 365 que utiliza el tipo de pertenencia de Usuario Dinamico y un grupo de seguridad que utiliza el tipo de pertenencia de Dispositivo Dinamico",
                    "Un grupo de seguridad que utiliza el tipo de pertenencia Asignado y un grupo de seguridad que utiliza el tipo de pertenencia de Usuario Dinamico"
                ],
                answer: "Un grupo de Microsoft 365 que utiliza el tipo de pertenencia Asignado y un grupo de Microsoft 365 que utiliza el tipo de pertenencia de Usuario Dinamico",
                comment: "Solo se puede establecer una politica de expiracion para grupos de Office 365 en Azure Active Directory (Azure AD). Las politicas de expiracion ayudan a eliminar grupos inactivos y, cuando un grupo expira, todos sus servicios asociados (buzon, Planner, sitio de SharePoint) tambien se eliminan. Se puede configurar una regla para la pertenencia dinamica tanto en grupos de seguridad como en grupos de Office 365.",
                category: C.ID_GOV,
                subtopic: "Administrar usuarios y grupos de Microsoft Entra"
            },
            // Pregunta 45 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory (Azure AD) llamado contoso.com que contiene los usuarios que se muestran en la siguiente tabla: (tabla no proporcionada) Configura una revision de acceso llamada Review1 como se muestra en la siguiente exhibicion: (exhibicion no proporcionada) Para cada una de las siguientes afirmaciones, seleccione Si si la afirmacion es verdadera. De lo contrario, seleccione No.",
                options: [
                    "User3 puede realizar una revision de acceso de User1: No, User3 puede realizar una revision de acceso de UserA: No, User3 puede realizar una revision de acceso de UserB: No",
                    "User3 puede realizar una revision de acceso de User1: Si, User3 puede realizar una revision de acceso de UserA: Si, User3 puede realizar una revision de acceso de UserB: Si",
                    "User3 puede realizar una revision de acceso de User1: No, User3 puede realizar una revision de acceso de UserA: Si, User3 puede realizar una revision de acceso de UserB: No",
                    "User3 puede realizar una revision de acceso de User1: Si, User3 puede realizar una revision de acceso de UserA: No, User3 puede realizar una revision de acceso de UserB: Si"
                ],
                answer: "User3 puede realizar una revision de acceso de User1: No, User3 puede realizar una revision de acceso de UserA: No, User3 puede realizar una revision de acceso de UserB: No",
                comment: "User1 y UserA son Miembros y no Cuentas de Invitado; la Revision de Acceso especifica \"Solo Invitados\". La revision de acceso solo mostro las Cuentas de Invitado en Grupo 1 y NO las Cuentas de Invitado en Grupo 2.",
                category: C.ID_GOV,
                subtopic: "Administracion del acceso de usuarios a los recursos de Azure"
            },
            // Pregunta 46 del PDF
            {
                question: "Agrega suscripciones de Azure a los grupos de administracion como se muestra en la siguiente tabla: (tabla no proporcionada) Crea las politicas de Azure que se muestran en la siguiente tabla: (tabla no proporcionada) Para cada una de las siguientes afirmaciones, seleccione Si si la afirmacion es verdadera. De lo contrario, seleccione No.",
                options: [
                    "Las redes virtuales no estan permitidas en la raiz y son heredadas. La denegacion anula lo permitido: Si, Se le permite crear una VNET en la Suscripcion 2: No, Una Suscripcion solo puede asignarse a 1 Grupo de administracion: No",
                    "Las redes virtuales no estan permitidas en la raiz y son heredadas. La denegacion anula lo permitido: No, Se le permite crear una VNET en la Suscripcion 2: Si, Una Suscripcion solo puede asignarse a 1 Grupo de administracion: Si",
                    "Las redes virtuales no estan permitidas en la raiz y son heredadas. La denegacion anula lo permitido: Si, Se le permite crear una VNET en la Suscripcion 2: Si, Una Suscripcion solo puede asignarse a 1 Grupo de administracion: Si",
                    "Las redes virtuales no estan permitidas en la raiz y son heredadas. La denegacion anula lo permitido: Si, Se le permite crear una VNET en la Suscripcion 2: No, Una Suscripcion solo puede asignarse a 1 Grupo de administracion: Si"
                ],
                answer: "Las redes virtuales no estan permitidas en la raiz y son heredadas. La denegacion anula lo permitido: Si, Se le permite crear una VNET en la Suscripcion 2: No, Una Suscripcion solo puede asignarse a 1 Grupo de administracion: Si",
                comment: "Las redes virtuales no estan permitidas en la raiz y son heredadas. La denegacion anula lo permitido. Una suscripcion solo puede asignarse a un Grupo de administracion.",
                category: C.ID_GOV,
                subtopic: "Configuracion de grupos de administracion"
            },
            // Pregunta 47 del PDF
            {
                question: "Tiene una politica de Azure como se muestra en la siguiente exhibicion: (exhibicion no proporcionada, pero la descripcion infere el efecto de la politica) ?Cual es el efecto de la politica?",
                options: [
                    "Se le impide crear servidores Azure SQL en cualquier lugar de la Suscripcion 1.",
                    "Puede crear servidores Azure SQL solo en ContosoRG1.",
                    "Se le impide crear servidores Azure SQL solo en ContosoRG1.",
                    "Puede crear servidores Azure SQL en cualquier grupo de recursos dentro de la Suscripcion 1."
                ],
                answer: "Puede crear servidores Azure SQL solo en ContosoRG1.",
                comment: "Se le impide crear servidores Azure SQL en cualquier lugar de la Suscripcion 1, con la excepcion de ContosoRG1. La opcion B es correcta, ya que la politica actual impide la creacion de servidores SQL en la Suscripcion 1, pero debido a la exclusion, solo dentro de ContosoRG1, puede crear servidores SQL.",
                category: C.ID_GOV,
                subtopic: "Implementacion y administracion de Azure Policy"
            },
            // Pregunta 48 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene los recursos que se muestran en la siguiente tabla: (tabla no proporcionada, pero se entiende que VNET1 tiene la etiqueta Department: D1 y se crea RG6, luego se implementa VNET2 en RG6 con la etiqueta Label:Value1 aplicada directamente) A RG6, aplica la etiqueta: RGroup: RG6. Implementa una red virtual llamada VNET2 en RG6. Que etiquetas se aplican a VNET1 y VNET2?",
                options: [
                    "Etiquetas para VNET1: Department: D1 only. Etiquetas para VNET2: Label:Value1 only.",
                    "Etiquetas para VNET1: Department: D1 only. Etiquetas para VNET2: Label:Value1 and RGroup: RG6.",
                    "Etiquetas para VNET1: Department: D1 and RGroup: RG6. Etiquetas para VNET2: Label:Value1 only.",
                    "Etiquetas para VNET1: Department: D1 and RGroup: RG6. Etiquetas para VNET2: Label:Value1 and RGroup: RG6."
                ],
                answer: "Etiquetas para VNET1: Department: D1 only. Etiquetas para VNET2: Label:Value1 only.",
                comment: "Las etiquetas de los grupos de recursos no se heredan a los recursos. La etiqueta se aplico solo al grupo de recursos, por lo que el recurso VNET2 no la heredara.",
                category: C.ID_GOV,
                subtopic: "Aplicacion y administracion de etiquetas en recursos"
            },
            // Pregunta 49 del PDF
            {
                question: "Tiene una suscripcion de Azure llamada AZPT1 que contiene los recursos que se muestran en la siguiente tabla: (tabla no proporcionada, pero se infieren recursos como VM1, storage1, VNET1, VM1Managed, RVAULT1) Crea una nueva suscripcion de Azure llamada AZPT2. Necesita identificar que recursos se pueden mover a AZPT2. Que recursos debe identificar?",
                options: [
                    "VM1, storage1, VNET1 y VM1Managed solamente",
                    "VM1 y VM1Managed solamente",
                    "VM1, storage1, VNET1, VM1Managed y RVAULT1"
                ],
                answer: "VM1, storage1, VNET1, VM1Managed y RVAULT1",
                comment: "Puede mover una VM y sus recursos asociados a una suscripcion diferente utilizando el portal de Azure. Tambien puede mover un almacen de Azure Recovery Service (ASR) a un nuevo grupo de recursos dentro de la suscripcion actual o a una nueva suscripcion.",
                category: C.ID_GOV,
                subtopic: "Administracion de grupos de recursos"
            },
            // Pregunta 50 del PDF
            {
                question: "Recientemente creo una nueva suscripcion de Azure que contiene un usuario llamado Admin1. Admin1 intenta implementar un recurso de Azure Marketplace utilizando una plantilla de Azure Resource Manager. Admin1 implementa la plantilla utilizando Azure PowerShell y recibe el siguiente mensaje de error: User failed validation to purchase resources. Error message: Legal terms have not been accepted for this item on this subscription. To accept legal terms, please go to the Azure portal (...) and configure programmatic deployment for the Marketplace item or create it there for the first time. Debe asegurarse de que Admin1 pueda implementar el recurso de Marketplace con exitoQue debe hacer?",
                options: [
                    "Desde Azure PowerShell, ejecutar el cmdlet Set-AzApiManagementSubscription.",
                    "Desde el portal de Azure, registrar el proveedor de recursos Microsoft.Marketplace.",
                    "Desde Azure PowerShell, ejecutar el cmdlet Set-AzMarketplaceTerms.",
                    "Desde el portal de Azure, asignar el rol de administrador de facturacion a Admin1."
                ],
                answer: "Desde Azure PowerShell, ejecutar el cmdlet Set-AzMarketplaceTerms.",
                comment: "El cmdlet Set-AzMarketplaceTerms se utiliza para aceptar los terminos legales de los elementos de Marketplace. La opcion -Accept se usa para indicar la aceptacion de dichos terminos.",
                category: C.ID_GOV,
                subtopic: "Administrar suscripciones"
            },
            // Pregunta 51 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory (Azure AD) que contiene 5,000 cuentas de usuario. Crea una nueva cuenta de usuario llamada AdminUser1. Necesita asignar el rol administrativo de \"Administrador de usuario\" a AdminUser1.",
                options: [
                    "Desde el panel de Licencias de Azure AD, asignar una licencia.",
                    "Desde el panel de Rol de directorio, modificar el rol de directorio.",
                    "Desde el panel de Grupos, invitar la cuenta de usuario a un nuevo grupo."
                ],
                answer: "Desde el panel de Rol de directorio, modificar el rol de directorio.",
                comment: "Para asignar un rol a un usuario: 1. Inicie sesion en el portal de Azure como administrador global o administrador de roles con privilegios. 2. Seleccione Azure Active Directory, luego Usuarios, y luego un usuario especifico. 3. Para el usuario seleccionado, seleccione \"Rol de directorio\", seleccione \"Agregar rol\", y luego elija los roles de administrador apropiados.",
                category: C.ID_GOV,
                subtopic: "Administracion de roles de Azure integrados"
            },
            // Pregunta 52 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory (Azure AD) llamado contoso.onmicrosoft.com que contiene 100 cuentas de usuario. Adquiere 10 licencias de Azure AD Premium P2 para el inquilino. Necesita asegurarse de que 10 usuarios puedan utilizar todas las caracteristicas de Azure AD PremiumQue debe hacer?",
                options: [
                    "Desde el panel de Licencias de Azure AD, asignar una licencia.",
                    "Desde el panel de Grupos de cada usuario, invitar a los usuarios a un grupo.",
                    "Desde el dominio de Azure AD, agregar una aplicacion empresarial.",
                    "Desde el panel de Rol de directorio de cada usuario, modificar el rol de directorio."
                ],
                answer: "Desde el panel de Licencias de Azure AD, asignar una licencia.",
                comment: "Para que los usuarios puedan utilizar las caracteristicas de Azure AD Premium P2, debe asignar a cada uno de ellos una licencia Premium P2. Esto se hace desde el panel de Licencias en la seccion de Azure Active Directory del portal de Azure.",
                category: C.ID_GOV,
                subtopic: "Administrar licencias en Microsoft Entra ID"
            },
            // Pregunta 53 del PDF
            {
                question: "Tiene una suscripcion de Azure llamada Subscription1 y una implementacion local de Microsoft System Center Service Manager. Subscription1 contiene una maquina virtual llamada VM1. (Falta el texto de la pregunta, pero se deduce que se busca una solucion para integrar Azure y Service Manager, probablemente para alertas)",
                options: [
                    "Crear un runbook de automatizacion.",
                    "Implementar una aplicacion de funciones.",
                    "Implementar el Conector de Gestion de Servicios de TI (ITSM).",
                    "Crear una notificacion."
                ],
                answer: "Implementar el Conector de Gestion de Servicios de TI (ITSM).",
                comment: "El Conector de Gestion de Servicios de TI (ITSMC) le permite conectar Azure y un producto/servicio compatible de Gestion de Servicios de TI (ITSM), como Microsoft System Center Service Manager. Con ITSMC, puede crear elementos de trabajo en la herramienta ITSM basandose en sus alertas de Azure (alertas de metricas, alertas de registro de actividad y alertas de Log Analytics).",
                category: C.MONITOR,
                subtopic: "Configuracion de registros en Azure Monitor"
            },
            // Pregunta 54 del PDF
            {
                question: "Se suscribe a Azure Active Directory (Azure AD) Premium P2. Necesita agregar un usuario llamado [email protected] como administrador en todos los equipos que se uniran al dominio de Azure ADQue debe configurar en Azure AD?",
                options: [
                    "Configuracion de dispositivos desde el panel de Dispositivos.",
                    "Proveedores desde el panel de Servidor MFA.",
                    "Configuracion de usuario desde el panel de Usuarios.",
                    "Configuracion general desde el panel de Grupos."
                ],
                answer: "Configuracion de dispositivos desde el panel de Dispositivos.",
                comment: "Cuando conecta un dispositivo Windows con Azure AD, Azure AD agrega el rol de administrador global de Azure AD, el rol de administrador de dispositivos de Azure AD y el usuario que realiza la union a Azure AD al grupo de administradores locales. En el portal de Azure, puede gestionar el rol de administrador de dispositivos en la pagina Dispositivos. Para modificar el rol de administrador de dispositivos, configure \"Administradores locales adicionales en dispositivos unidos a Azure AD\".",
                category: C.ID_GOV,
                subtopic: "Administracion de propiedades de usuario y grupo"
            },
            // Pregunta 55 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory llamado Contoso.com que incluye los siguientes usuarios: (tabla no proporcionada) Contoso.com incluye los siguientes dispositivos con Windows 10: (tabla no proporcionada) Crea los siguientes grupos de seguridad en Contoso.com: (tabla no proporcionada) Para cada una de las siguientes afirmaciones, seleccione Si si la afirmacion es verdadera. De lo contrario, seleccione No.",
                options: [
                    "User1 puede agregar Device2 al Grupo1: No, User2 puede agregar Device1 al Grupo1: Si, User2 puede agregar Device2 al Grupo2: No",
                    "User1 puede agregar Device2 al Grupo1: Si, User2 puede agregar Device1 al Grupo1: No, User2 puede agregar Device2 al Grupo2: Si",
                    "User1 puede agregar Device2 al Grupo1: No, User2 puede agregar Device1 al Grupo1: No, User2 puede agregar Device2 al Grupo2: No",
                    "User1 puede agregar Device2 al Grupo1: Si, User2 puede agregar Device1 al Grupo1: Si, User2 puede agregar Device2 al Grupo2: Si"
                ],
                answer: "User1 puede agregar Device2 al Grupo1: No, User2 puede agregar Device1 al Grupo1: Si, User2 puede agregar Device2 al Grupo2: No",
                comment: "Los grupos pueden contener dispositivos registrados y unidos. User1 es un administrador de dispositivos en la nube, pero no tiene permisos para administrar otras propiedades del dispositivo mas alla de habilitar/deshabilitar/eliminar. User2 es el propietario de Grupo1, por lo que puede agregar Device1. Grupo2 esta configurado para pertenencia dinamica, y sus propiedades de membresia no pueden ser cambiadas por un usuario final o un administrador de usuario.",
                category: C.ID_GOV,
                subtopic: "Administracion de propiedades de usuario y grupo"
            },
            // Pregunta 56 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG26. RG26 esta configurado en la ubicacion de Europa Occidental y se utiliza para crear recursos temporales para un proyecto. RG26 contiene los recursos que se muestran en la siguiente tabla: (la tabla muestra VM1 - estado: En ejecucion, VNET1 - Tipo de bloqueo: Eliminacion, Vault1 - estado de copia de seguridad: Copia de seguridad realizada) Necesita eliminar RG26. Que debe hacer primero?",
                options: [
                    "Eliminar VM1",
                    "Detener VM1",
                    "Detener la copia de seguridad de SQLDB01.",
                    "Eliminar sa001"
                ],
                answer: "Detener la copia de seguridad de SQLDB01.",
                comment: "El estado de ejecucion de las VMs o la existencia de cuentas de almacenamiento no bloquean la eliminacion de un Grupo de Recursos. Sin embargo, no puede eliminar un almacen que contiene datos de copia de seguridad. Una vez que los datos de copia de seguridad se eliminan, pasan a un estado de eliminacion suave. Para eliminar TestRG, debe eliminar el bloqueo de recurso de VNET1 y eliminar todos los datos en Vault1.",
                category: C.ID_GOV,
                subtopic: "Administracion de grupos de recursos"
            },
            // Pregunta 57 del PDF
            {
                question: "Tiene una suscripcion de Azure llamada Subscription1 que contiene una red virtual llamada VNet1. VNet1 esta en un grupo de recursos llamado RG1. Subscription1 tiene un usuario llamado User1. User1 tiene los siguientes roles: Lector, Administrador de seguridad, Lector de seguridad. Necesita asegurarse de que User1 pueda asignar el rol de Lector para VNet1 a otros usuariosQue debe hacer?",
                options: [
                    "Eliminar a User1 de los roles de Lector de seguridad y Lector para Subscription1.",
                    "Asignar a User1 el rol de Administrador de acceso de usuario para VNet1.",
                    "Asignar a User1 el rol de Colaborador de red para VNet1.",
                    "Asignar a User1 el rol de Colaborador de red para RG1."
                ],
                answer: "Asignar a User1 el rol de Administrador de acceso de usuario para VNet1.",
                comment: "El rol de Administrador de acceso de usuario tiene acceso completo a todos los recursos, incluido el derecho a delegar acceso a otros. Otra respuesta correcta posible es asignar a User1 el rol de Propietario para VNet1.",
                category: C.ID_GOV,
                subtopic: "Asignacion de roles en distintos ambitos"
            },
            // Pregunta 58 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory (Azure AD) llamado contosocloud.onmicrosoft.com. Su empresa tiene una zona DNS publica para contoso.com. Agrega contoso.com como nombre de dominio personalizado a Azure AD. Debe asegurarse de que Azure pueda verificar el nombre de dominioQue tipo de registro DNS debe crear?",
                options: ["MX", "NSEC", "PTR", "RRSIG"],
                answer: "MX",
                comment: "Para verificar su nombre de dominio personalizado en Azure AD, debe usar el tipo de registro TXT o MX.",
                category: C.ID_GOV,
                subtopic: "Administracion de propiedades de usuario y grupo"
            },
            // Pregunta 59 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory (Azure AD) llamado Adatum y una suscripcion de Azure llamada Subscription1. Adatum contiene un grupo llamado Developers. Subscription1 contiene un grupo de recursos llamado Dev. Necesita proporcionar al grupo Developers la capacidad de crear aplicaciones logicas de Azure en el grupo de recursos Dev. Solucion: En Subscription1, asigna el rol de Usuario de DevTest Labs al grupo DevelopersEsto cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "El rol de Usuario de DevTest Labs solo le permite conectar, iniciar, reiniciar y apagar maquinas virtuales en sus Azure DevTest Labs. Para gestionar aplicaciones logicas, se necesitaria un rol como el de Colaborador de la aplicacion logica.",
                category: C.ID_GOV,
                subtopic: "Asignacion de roles en distintos ambitos"
            },
            // Pregunta 60 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory (Azure AD) llamado Adatum y una suscripcion de Azure llamada Subscription1. Adatum contiene un grupo llamado Developers. Subscription1 contiene un grupo de recursos llamado Dev. Necesita proporcionar al grupo Developers la capacidad de crear aplicaciones logicas de Azure en el grupo de recursos Dev. Solucion: En Subscription1, asigna el rol de Operador de la aplicacion logica al grupo DevelopersEsto cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "El rol de Operador de la aplicacion logica solo permite a los usuarios ver y administrar aplicaciones logicas, pero no les permite crear nuevas. Necesitaria el rol de Colaborador de la aplicacion logica.",
                category: C.ID_GOV,
                subtopic: "Asignacion de roles en distintos ambitos"
            },
            // Pregunta 61 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory (Azure AD) llamado Adatum y una suscripcion de Azure llamada Subscription1. Adatum contiene un grupo llamado Developers. Subscription1 contiene un grupo de recursos llamado Dev. Necesita proporcionar al grupo Developers la capacidad de crear aplicaciones logicas de Azure en el grupo de recursos Dev. Solucion: En Dev, asigna el rol de Colaborador al grupo DevelopersEsto cumple el objetivo?",
                options: ["Si", "No"],
                answer: "Si",
                comment: "Si, asignar el rol de Colaborador al grupo Developers en el grupo de recursos Dev cumpliria el objetivo. El rol de Colaborador otorga acceso total para administrar todos los recursos en el grupo de recursos, incluida la capacidad de crear y administrar aplicaciones logicas. Este rol puede administrar todos los recursos (y agregar recursos) en un Grupo de Recursos.",
                category: C.ID_GOV,
                subtopic: "Asignacion de roles en distintos ambitos"
            },
            // Pregunta 62 del PDF
            {
                question: "Tiene una suscripcion de Azure que es utilizada por cuatro departamentos en su empresa. La suscripcion contiene 10 grupos de recursos. Cada departamento utiliza recursos en varios grupos de recursos. Necesita enviar un informe al departamento de finanzas. El informe debe detallar los costos de cada departamentoQue tres acciones debe realizar en secuencia?",
                options: [
                    "Asignar una etiqueta a cada recurso, Desde el panel de Analisis de costos filtrar la vista por etiqueta, Descargar el informe de uso",
                    "Crear grupos de recursos por departamento, Asignar roles por departamento, Generar reportes automaticos",
                    "Configurar alertas de costo, Establecer presupuestos, Programar reportes",
                    "Implementar Azure Policy, Configurar costos por departamento, Exportar datos"
                ],
                answer: "Asignar una etiqueta a cada recurso, Desde el panel de Analisis de costos filtrar la vista por etiqueta, Descargar el informe de uso",
                comment: "Asignar una etiqueta a cada recurso: Para organizar logicamente los recursos y permitir su posterior filtrado por departamento. Desde el panel de Analisis de costos, filtrar la vista por etiqueta: El Analisis de costos permite filtrar por propiedades como etiquetas, grupo de recursos y periodo de tiempo. Descargar el informe de uso: Para exportar la vista filtrada (por ejemplo, a un archivo .csv) para el departamento de finanzas.",
                category: C.ID_GOV,
                subtopic: "Administracion de costos mediante alertas, presupuestos y recomendaciones de Azure Advisor"
            },
            // Pregunta 63 del PDF
            {
                question: "Tiene una suscripcion de Azure llamada Subscription1 que contiene un espacio de trabajo de Azure Log Analytics llamado Workspace1. Necesita ver los eventos de error de una tabla llamada EventQue consulta debe ejecutar en Workspace1?",
                options: [
                    "Get-Event Event | where $_.EventType == \"error\"",
                    "search in (Event) \"error\"",
                    "select * from Event where EventType == \"error\"",
                    "search in (Event) * | where EventType -eq \"error\""
                ],
                answer: "search in (Event) \"error\"",
                comment: "Las opciones de consulta correctas incluyen Event | search \"error\", Event | where EventType == \"error\", y search in (Event) \"error\". La opcion B es una de las consultas validas.",
                category: C.MONITOR,
                subtopic: "Consulta y analisis de registros en Azure Monitor"
            },
            // Pregunta 64 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene una red virtual llamada VNET1 en la region Este de EE. UU. 2. Una interfaz de red llamada VM1-NI esta conectada a VNET1. Implementa correctamente la siguiente plantilla de Azure Resource Manager. (plantilla no proporcionada, pero se entiende que crea VMs en zonas) Para cada una de las siguientes afirmaciones, seleccione Si si la afirmacion es verdadera. De lo contrario, seleccione No.",
                options: [
                    "VM1 esta en la Zona1, VM2 esta en la Zona2: Si, Las VMs estan en diferentes zonas: Si, Las VMs estan en la misma zona: No",
                    "VM1 esta en la Zona1, VM2 esta en la Zona2: No, Las VMs estan en diferentes zonas: No, Las VMs estan en la misma zona: Si",
                    "VM1 esta en la Zona1, VM2 esta en la Zona2: Si, Las VMs estan en diferentes zonas: No, Las VMs estan en la misma zona: Si",
                    "VM1 esta en la Zona1, VM2 esta en la Zona2: No, Las VMs estan en diferentes zonas: Si, Las VMs estan en la misma zona: No"
                ],
                answer: "VM1 esta en la Zona1, VM2 esta en la Zona2: Si, Las VMs estan en diferentes zonas: Si, Las VMs estan en la misma zona: No",
                comment: "La explicacion confirma que la implementacion puede resultar en VMs distribuidas en diferentes zonas, como VM1 en Zona1 y VM2 en Zona2.",
                category: C.COMPUTE,
                subtopic: "Implementacion de maquinas virtuales en zonas de disponibilidad y conjuntos de disponibilidad"
            },
            // Pregunta 65 del PDF
            {
                question: "Tiene una suscripcion de Azure llamada Subscription1. Subscription1 contiene los grupos de recursos en la siguiente tabla: (tabla no proporcionada, pero se infieren RG1 con Policy1 y RG2 con Policy2, y ubicaciones) RG1 tiene una aplicacion web llamada WebApp1. WebApp1 esta ubicada en Europa Occidental. Mueve WebApp1 a RG2. Cual es el efecto del movimiento?",
                options: [
                    "El plan de App Service para WebApp1 permanece en Europa Occidental. La Politica2 se aplica a WebApp1.",
                    "El plan de App Service para WebApp1 se mueve a Europa del Norte. La Politica2 se aplica a WebApp1.",
                    "El plan de App Service para WebApp1 permanece en Europa Occidental. La Politica1 se aplica a WebApp1.",
                    "El plan de App Service para WebApp1 se mueve a Europa del Norte. La Politica1 se aplica a WebApp1."
                ],
                answer: "El plan de App Service para WebApp1 permanece en Europa Occidental. La Politica2 se aplica a WebApp1.",
                comment: "Puede mover una aplicacion a otro plan de App Service siempre que los planes de origen y destino esten en el mismo grupo de recursos y region geografica. La region en la que se ejecuta la aplicacion es la region de su plan de App Service. Sin embargo, no puede cambiar la region de un plan de App Service. Si WebApp1 se mueve a RG2, heredara Policy2, pero su App Service plan, y por lo tanto su region, permanecera en Europa Occidental.",
                category: C.COMPUTE,
                subtopic: "Crear una instancia de App Service"
            },
            // Pregunta 66 del PDF
            {
                question: "Tiene una suscripcion de Azure llamada Subscription1 con ID de suscripcion c276fc76-9cd4-44c9-99a7-4fd71546436e. Necesita crear un rol RBAC personalizado llamado CR1 que cumpla los siguientes requisitos: â€¢ Solo se puede asignar a los grupos de recursos de Subscription1. â€¢ Impide la gestion de los permisos de acceso para los grupos de recursos. â€¢ Permite ver, crear, modificar y eliminar recursos dentro de los grupos de recursosQue debe especificar en los alcances asignables y los elementos de permiso de la definicion de CR1?",
                options: [
                    "assignableScopes: \"/subscriptions/c276fc76-9cd4-44c9-99a7-4fd71546436e\", notActions: \"Microsoft.Authorization/*\"",
                    "assignableScopes: \"/subscriptions/c276fc76-9cd4-44c9-99a7-4fd71546436e\", notActions: \"Microsoft.Resources/*\"",
                    "assignableScopes: \"/subscriptions/c276fc76-9cd4-44c9-99a7-4fd71546436e/resourceGroups/*\", notActions: \"Microsoft.Authorization/*\"",
                    "assignableScopes: \"/subscriptions/c276fc76-9cd4-44c9-99a7-4fd71546436e\", notActions: \"Microsoft.Compute/*\""
                ],
                answer: "assignableScopes: \"/subscriptions/c276fc76-9cd4-44c9-99a7-4fd71546436e\", notActions: \"Microsoft.Authorization/*\"",
                comment: "assignableScopes debe ser la Suscripcion, para que el Rol personalizado solo pueda asignarse a Grupos de Recursos dentro de esa Suscripcion. notActions debe denegar solo las acciones que interactuan con los puntos de conexion de la API de Autorizacion (Microsoft.Authorization/*) para evitar la gestion de permisos, permitiendo todo lo demas.",
                category: C.ID_GOV,
                subtopic: "Administracion de roles de Azure integrados"
            },
            // Pregunta 67 del PDF
            {
                question: "Tiene una suscripcion de Azure. Los usuarios acceden a los recursos de la suscripcion desde casa o desde sitios de clientes. (texto de la pregunta incompleto en la fuente, pero se entiende que se trata de distribuir el trafico a una aplicacion entre VMs) Necesita asegurarse de que las conexiones a App1 se distribuyan entre todas las maquinas virtualesCuales son dos posibles servicios de Azure que puede usar?",
                options: [
                    "Un equilibrador de carga interno y un Azure Application Gateway",
                    "Un equilibrador de carga publico y una Red de Entrega de Contenido (CDN) de Azure",
                    "Traffic Manager y un equilibrador de carga interno",
                    "Un equilibrador de carga publico y Traffic Manager"
                ],
                answer: "Un equilibrador de carga interno y un Azure Application Gateway",
                comment: "Un equilibrador de carga interno: Distribuye el trafico entre las VMs que ejecutan App1. Es un equilibrador de carga de Capa 4 (Transporte) que puede distribuir trafico dentro de una red virtual. Un Azure Application Gateway: Es un equilibrador de carga de Capa 7 (Aplicacion) que puede distribuir trafico basandose en criterios como la ruta URL, encabezados de host y cookies. Puede realizar descarga SSL, afinidad de sesion y enrutamiento basado en URL.",
                category: C.NETWORK,
                subtopic: "Configuracion de un equilibrador de carga interno o publico"
            },
            // Pregunta 68 del PDF
            {
                question: "Tiene una suscripcion de Azure. Tiene 100 maquinas virtuales de Azure. Necesita identificar rapidamente maquinas virtuales subutilizadas a las que se les pueda cambiar su nivel de servicio a una oferta menos costosaQue panel debe usar?",
                options: [
                    "Monitor",
                    "Advisor",
                    "Metricas",
                    "Perspectivas del cliente"
                ],
                answer: "Advisor",
                comment: "Advisor le ayuda a optimizar y reducir su gasto general en Azure identificando recursos inactivos y subutilizados. Puede obtener recomendaciones de costos desde la pestana \"Costo\" en el panel de Advisor.",
                category: C.ID_GOV,
                subtopic: "Administracion de costos mediante alertas, presupuestos y recomendaciones de Azure Advisor"
            },
            // Pregunta 69 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory (Azure AD). Necesita crear una politica de acceso condicional que requiera que todos los usuarios utilicen la autenticacion multifactor cuando accedan al portal de Azure. Que tres configuraciones debe configurar?",
                options: [
                    "Usuarios y grupos (seleccionar todos los usuarios), Aplicaciones en la nube o acciones (especificamente, el Portal de Azure), Conceder (Requerir autenticacion multifactor)",
                    "Usuarios y grupos (seleccionar administradores), Aplicaciones en la nube o acciones (todas las aplicaciones), Conceder (Requerir autenticacion multifactor)",
                    "Usuarios y grupos (seleccionar usuarios especificos), Aplicaciones en la nube o acciones (especificamente, el Portal de Azure), Conceder (Requerir autenticacion multifactor)",
                    "Usuarios y grupos (seleccionar todos los usuarios), Aplicaciones en la nube o acciones (todas las aplicaciones), Conceder (Requerir autenticacion multifactor)"
                ],
                answer: "Usuarios y grupos (seleccionar todos los usuarios), Aplicaciones en la nube o acciones (especificamente, el Portal de Azure), Conceder (Requerir autenticacion multifactor)",
                comment: "Las configuraciones minimas para crear una politica de MFA son seleccionar los Usuarios y Grupos (todos los usuarios), las Aplicaciones en la nube a las que se aplica (el Portal de Azure) y la accion de Concesion (Requerir autenticacion multifactor).",
                category: C.ID_GOV,
                subtopic: "Administracion del acceso de usuarios a los recursos de Azure"
            },
            // Pregunta 70 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory (Azure AD) llamado contoso.onmicrosoft.com. El rol de administrador de usuario esta asignado a un usuario llamado Admin1. Un socio externo tiene una cuenta de Microsoft que utiliza el inicio de sesion [email protected]. Admin1 intenta invitar al socio externo a iniciar sesion en el inquilino de Azure AD y recibe el siguiente mensaje de error: Unable to invite user [email protected] \" Generic authorization exception.\" Debe asegurarse de que Admin1 pueda invitar al socio externo a iniciar sesion en el inquilino de Azure AD? Que debe hacer?",
                options: [
                    "Desde el panel de configuracion de Usuarios, modificar la configuracion de colaboracion externa.",
                    "Desde el panel de nombres de dominio personalizados, agregar un dominio personalizado.",
                    "Desde el panel de relaciones organizacionales, agregar un proveedor de identidad.",
                    "Desde el panel de Roles y administradores, asignar el rol de administrador de seguridad a Admin1."
                ],
                answer: "Desde el panel de configuracion de Usuarios, modificar la configuracion de colaboracion externa.",
                comment: "El mensaje de error indica un problema con la configuracion de colaboracion externa en Azure AD. Estas configuraciones dictan quien puede invitar a usuarios externos y bajo que circunstancias. Para resolverlo, debe ajustar la configuracion de colaboracion externa en el panel de \"configuracion de Usuarios\" en Azure Active Directory.",
                category: C.ID_GOV,
                subtopic: "Administracion de usuarios externos"
            },
            // Pregunta 71 del PDF
            {
                question: "Tiene una suscripcion de Azure vinculada a un inquilino de Azure Active Directory. El inquilino incluye una cuenta de usuario llamada User1. Necesita asegurarse de que User1 pueda asignar una politica al grupo de administracion raiz del inquilinoQue debe hacer?",
                options: [
                    "Asignar el rol de Propietario para la Suscripcion de Azure a User1, y luego modificar las politicas de acceso condicional predeterminadas.",
                    "Asignar el rol de Propietario para la suscripcion de Azure a User1, y luego indicar a User1 que configure la gestion de acceso para los recursos de Azure.",
                    "Elevar el acceso de User1 a Administrador Global en Azure Active Directory.",
                    "Crear un nuevo grupo de administracion y delegar a User1 como el propietario del nuevo grupo de administracion."
                ],
                answer: "Elevar el acceso de User1 a Administrador Global en Azure Active Directory.",
                comment: "A nadie se le otorga acceso predeterminado al grupo de administracion raiz. Los Administradores Globales de Azure AD son los unicos usuarios que pueden elevarse a si mismos para obtener acceso. Una vez que tienen acceso, pueden asignar cualquier rol de Azure a otros usuarios para administrarlo.",
                category: C.ID_GOV,
                subtopic: "Configuracion de grupos de administracion"
            },
            // Pregunta 72 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory (Azure AD) llamado adatum.com. Adatum.com contiene los grupos de la siguiente tabla: (la tabla muestra Grupo1: Usuario dinamico - regla basada en Compania = Marketing; Grupo2: Usuario dinamico - regla basada en Departamento = Ventas) Crea dos cuentas de usuario configuradas como se muestra en la siguiente tabla: (la tabla muestra User1: Compania=Marketing, Departamento=TI; User2: Compania=Marketing, Departamento=Ventas) ?De que grupos son miembros User1 y User2?",
                options: [
                    "User1 es miembro de: Solo Grupo1, User2 es miembro de: Grupo1 y Grupo2",
                    "User1 es miembro de: Solo Grupo1, User2 es miembro de: Solo Grupo1",
                    "User1 es miembro de: Solo Grupo2, User2 es miembro de: Solo Grupo2",
                    "User1 es miembro de: Grupo1 y Grupo2, User2 es miembro de: Grupo1 y Grupo2"
                ],
                answer: "User1 es miembro de: Solo Grupo1, User2 es miembro de: Grupo1 y Grupo2",
                comment: "User1: Cumple la regla del Grupo1 (Company = Marketing). No cumple la regla del Grupo2 (Department = Sales). User2: Cumple la regla del Grupo1 (Company = Marketing) y la regla del Grupo2 (Department = Sales).",
                category: C.ID_GOV,
                subtopic: "Administrar usuarios y grupos de Microsoft Entra"
            },
            // Pregunta 73 del PDF
            {
                question: "Tiene una implementacion hibrida de Azure Active Directory (Azure AD) que contiene los usuarios que se muestran en la siguiente tabla: (tabla no proporcionada, pero se infieren usuarios con diversas propiedades, incluida la ubicacion de uso)",
                options: [
                    "Los usuarios que pueden ser asignados a una licencia: User1 y User3 solamente, Los usuarios que pueden ser asignados al rol de Administrador Global de Azure AD: User1, User2 y User3",
                    "Los usuarios que pueden ser asignados a una licencia: User1, User2 y User3, Los usuarios que pueden ser asignados al rol de Administrador Global de Azure AD: User1 y User2 solamente",
                    "Los usuarios que pueden ser asignados a una licencia: User1 solamente, Los usuarios que pueden ser asignados al rol de Administrador Global de Azure AD: User1, User2 y User3",
                    "Los usuarios que pueden ser asignados a una licencia: User1, User2 y User3, Los usuarios que pueden ser asignados al rol de Administrador Global de Azure AD: User1, User2 y User3"
                ],
                answer: "Los usuarios que pueden ser asignados a una licencia: User1 y User3 solamente, Los usuarios que pueden ser asignados al rol de Administrador Global de Azure AD: User1, User2 y User3",
                comment: "La ubicacion de uso es una propiedad de Azure que solo se puede modificar desde Azure AD (para todos los usuarios, incluidos los sincronizados desde Windows Server AD).",
                category: C.ID_GOV,
                subtopic: "Administrar licencias en Microsoft Entra ID"
            },
            // Pregunta 74 del PDF
            {
                question: "Necesita asegurarse de que un usuario de Azure Active Directory (Azure AD) llamado Admin1 tenga asignado el rol requerido para habilitar el Analisis de Trafico para una suscripcion de Azure. Solucion: Asigna el rol de Colaborador de red a nivel de suscripcion a Admin1. Esto cumple el objetivo?",
                options: ["Si", "No"],
                answer: "Si",
                comment: "Su cuenta debe tener uno de los siguientes roles de Azure en el ambito de la suscripcion para habilitar el analisis de trafico: propietario, colaborador, lector o colaborador de red. El rol de Colaborador de red cumple este requisito.",
                category: C.NETWORK,
                subtopic: "Solucion de problemas de conectividad de red"
            },
            // Pregunta 75 del PDF
            {
                question: "Necesita asegurarse de que un usuario de Azure Active Directory (Azure AD) llamado Admin1 tenga asignado el rol requerido para habilitar el Analisis de Trafico para una suscripcion de Azure. Solucion: Asigna el rol de Propietario a nivel de suscripcion a Admin1. Esto cumple el objetivo?",
                options: ["Si", "No"],
                answer: "Si",
                comment: "Su cuenta debe tener uno de los siguientes roles de Azure en el ambito de la suscripcion para habilitar el analisis de trafico: propietario, colaborador, lector o colaborador de red. El rol de Propietario cumple este requisito.",
                category: C.NETWORK,
                subtopic: "Solucion de problemas de conectividad de red"
            },
            // Pregunta 76 del PDF
            {
                question: "Necesita asegurarse de que un usuario de Azure Active Directory (Azure AD) llamado Admin1 tenga asignado el rol requerido para habilitar el Analisis de Trafico para una suscripcion de Azure. Solucion: Asigna el rol de Lector a nivel de suscripcion a Admin1. Esto cumple el objetivo?",
                options: ["Si", "No"],
                answer: "No",
                comment: "Asignar el rol de Lector a nivel de suscripcion a Admin1 no cumple el objetivo. El rol de Lector tiene permisos para ver recursos, pero no permite operaciones de escritura, que son necesarias para habilitar el Analisis de Trafico. Admin1 necesitaria un rol con permisos de escritura, como Propietario o Colaborador.",
                category: C.NETWORK,
                subtopic: "Solucion de problemas de conectividad de red"
            },
            // Pregunta 77 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un usuario llamado User1. Necesita asegurarse de que User1 pueda implementar maquinas virtuales y administrar redes virtuales. La solucion debe utilizar el principio de privilegio minimoQue rol de control de acceso basado en roles (RBAC) debe asignar a User1?",
                options: [
                    "Propietario",
                    "Colaborador de maquina virtual",
                    "Colaborador",
                    "Inicio de sesion de administrador de maquina virtual"
                ],
                answer: "Colaborador",
                comment: "Propietario: Otorga acceso total para administrar todos los recursos, incluida la asignacion de roles. Colaborador de maquina virtual: Permite administrar VMs, pero no acceder a ellas ni a la red virtual o cuenta de almacenamiento a las que estan conectadas. Inicio de sesion de administrador de maquina virtual: Permite ver VMs e iniciar sesion como administrador. El rol de Colaborador es la opcion que cumple el principio de menor privilegio para la tarea, ya que permite la gestion de todos los recursos (incluidas VMs y redes virtuales) en el ambito asignado.",
                category: C.ID_GOV,
                subtopic: "Asignacion de roles en distintos ambitos"
            },
            // Pregunta 78 del PDF
            {
                question: "Tiene un inquilino de Azure Active Directory (Azure AD) que contiene tres administradores globales llamados Admin1, Admin2 y Admin3. El inquilino esta asociado a una suscripcion de Azure. El control de acceso para la suscripcion esta configurado como se muestra en la exhibicion de Control de acceso. (exhibicion no proporcionada) Inicia sesion en el portal de Azure como Admin1 y configura el inquilino como se muestra en la exhibicion de Inquilino. (exhibicion no proporcionada) Para cada una de las siguientes afirmaciones, seleccione Si si la afirmacion es verdadera. De lo contrario, seleccione No.",
                options: [
                    "Admin1 puede asignar el rol de Propietario: Si, Admin3 puede asignar el rol de Propietario: Si, Admin2 puede asignar el rol de Propietario: No",
                    "Admin1 puede asignar el rol de Propietario: Si, Admin3 puede asignar el rol de Propietario: No, Admin2 puede asignar el rol de Propietario: No",
                    "Admin1 puede asignar el rol de Propietario: Si, Admin3 puede asignar el rol de Propietario: Si, Admin2 puede asignar el rol de Propietario: Si",
                    "Admin1 puede asignar el rol de Propietario: No, Admin3 puede asignar el rol de Propietario: Si, Admin2 puede asignar el rol de Propietario: No"
                ],
                answer: "Admin1 puede asignar el rol de Propietario: Si, Admin3 puede asignar el rol de Propietario: Si, Admin2 puede asignar el rol de Propietario: No",
                comment: "Los roles de Azure (RBAC) y Azure AD son independientes. Sin embargo, un Administrador Global en AD puede elevar el acceso a todas las suscripciones y se convertira en Administrador de Acceso de Usuario en el ambito raiz de Azure. Admin1 tiene acceso elevado, por lo que es Administrador de Acceso de Usuario (RBAC) y puede asignar roles. Admin3 es Propietario de la suscripcion (RBAC), por lo que tambien puede asignar roles. Admin2 es solo un Administrador Global en Azure AD, no tiene permiso para asignar roles en la suscripcion a menos que eleve su acceso.",
                category: C.ID_GOV,
                subtopic: "Asignacion de roles en distintos ambitos"
            },
            // Pregunta 79 del PDF
            {
                question: "Tiene una suscripcion de Azure llamada Subscription1 que contiene una maquina virtual de Azure llamada VM1. VM1 esta en un grupo de recursos llamado RG1. VM1 ejecuta servicios que se utilizaran para implementar recursos en RG1. Necesita asegurarse de que un servicio que se ejecuta en VM1 pueda administrar los recursos en RG1 utilizando la identidad de VM1. Que debe hacer primero?",
                options: [
                    "Desde el portal de Azure, modificar la configuracion de Identidad Administrada de VM1.",
                    "Desde el portal de Azure, modificar la configuracion de Control de acceso (IAM) de RG1."
                ],
                answer: "Desde el portal de Azure, modificar la configuracion de Identidad Administrada de VM1.",
                comment: "Las identidades administradas para recursos de Azure proporcionan a los servicios de Azure una identidad administrada automaticamente en Azure Active Directory. Puede usar esta identidad para autenticarse en cualquier servicio que admita la autenticacion de Azure AD sin tener credenciales en su codigo. Puede habilitar y deshabilitar la identidad administrada asignada por el sistema para la VM utilizando el portal de Azure.",
                category: C.COMPUTE,
                subtopic: "Creacion de una maquina virtual"
            },
            // Pregunta 80 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado TestRG. Utiliza TestRG para validar una implementacion de Azure. TestRG contiene los siguientes recursos: (tabla muestra VM1 - estado: En ejecucion, VNET1 - Tipo de bloqueo: Eliminacion, Vault1 - estado de copia de seguridad: Copia de seguridad realizada) Necesita eliminar TestRGQue debe hacer primero?",
                options: [
                    "Modificar las configuraciones de copia de seguridad de VM1 y modificar el tipo de bloqueo de recurso de VNET1.",
                    "Eliminar el bloqueo de recurso de VNET1 y eliminar todos los datos en Vault1.",
                    "Apagar VM1 y eliminar el bloqueo de recurso de VNET1.",
                    "Apagar VM1 y eliminar todos los datos en Vault1."
                ],
                answer: "Eliminar el bloqueo de recurso de VNET1 y eliminar todos los datos en Vault1.",
                comment: "Cuando elimina un grupo de recursos, todos sus recursos tambien se eliminan. Sin embargo, no puede eliminar un almacen que contiene datos de copia de seguridad. Los bloqueos (lock) impiden la eliminacion o modificacion accidental de recursos, y el bloqueo anula los permisos. Por lo tanto, para eliminar el grupo de recursos, primero debe eliminar el bloqueo de VNET1 y eliminar las copias de seguridad de Vault1.",
                category: C.ID_GOV,
                subtopic: "Administracion de grupos de recursos"
            },
            // Pregunta 81 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que debe hacer primero?",
                options: [
                    "Detener VM1",
                    "Desacoplar Disk1 de VM1",
                    "Crear RG2",
                    "Verificar que RG2 este en la misma region que RG1"
                ],
                answer: "Verificar que RG2 este en la misma region que RG1",
                comment: "Antes de mover recursos entre grupos de recursos, debe verificar que el grupo de recursos de destino este en la misma region que el grupo de recursos de origen. Los recursos no se pueden mover entre regiones.",
                category: C.ID_GOV,
                subtopic: "Administracion de grupos de recursos"
            },
            // Pregunta 82 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que debe hacer despues de verificar que RG2 este en la misma region que RG1?",
                options: [
                    "Detener VM1",
                    "Desacoplar Disk1 de VM1",
                    "Crear RG2",
                    "Mover VM1 y Disk1 a RG2"
                ],
                answer: "Detener VM1",
                comment: "Despues de verificar que RG2 este en la misma region, debe detener VM1 antes de moverla. Las maquinas virtuales deben estar detenidas antes de ser movidas entre grupos de recursos.",
                category: C.COMPUTE,
                subtopic: "Administracion de maquinas virtuales"
            },
            // Pregunta 83 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que debe hacer despues de detener VM1?",
                options: [
                    "Desacoplar Disk1 de VM1",
                    "Crear RG2",
                    "Mover VM1 y Disk1 a RG2",
                    "Reiniciar VM1"
                ],
                answer: "Mover VM1 y Disk1 a RG2",
                comment: "Despues de detener VM1, puede mover tanto VM1 como Disk1 a RG2 en la misma operacion. No es necesario desacoplar el disco antes del movimiento.",
                category: C.COMPUTE,
                subtopic: "Administracion de maquinas virtuales"
            },
            // Pregunta 84 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que debe hacer despues de mover VM1 y Disk1 a RG2?",
                options: [
                    "Desacoplar Disk1 de VM1",
                    "Crear RG2",
                    "Reiniciar VM1",
                    "Eliminar RG1"
                ],
                answer: "Reiniciar VM1",
                comment: "Despues de mover VM1 y Disk1 a RG2, debe reiniciar VM1 para que funcione correctamente en el nuevo grupo de recursos.",
                category: C.COMPUTE,
                subtopic: "Administracion de maquinas virtuales"
            },
            // Pregunta 85 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que debe hacer despues de reiniciar VM1?",
                options: [
                    "Desacoplar Disk1 de VM1",
                    "Crear RG2",
                    "Eliminar RG1",
                    "Verificar que VM1 funcione correctamente"
                ],
                answer: "Verificar que VM1 funcione correctamente",
                comment: "Despues de reiniciar VM1, debe verificar que funcione correctamente en el nuevo grupo de recursos antes de realizar cualquier otra accion.",
                category: C.COMPUTE,
                subtopic: "Administracion de maquinas virtuales"
            },
            // Pregunta 86 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que debe hacer despues de verificar que VM1 funcione correctamente?",
                options: [
                    "Desacoplar Disk1 de VM1",
                    "Crear RG2",
                    "Eliminar RG1",
                    "Nada mas"
                ],
                answer: "Eliminar RG1",
                comment: "Despues de verificar que VM1 funcione correctamente en RG2, puede eliminar RG1 si ya no es necesario.",
                category: C.ID_GOV,
                subtopic: "Administracion de grupos de recursos"
            },
            // Pregunta 87 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que debe hacer despues de eliminar RG1?",
                options: [
                    "Desacoplar Disk1 de VM1",
                    "Crear RG2",
                    "Nada mas",
                    "Reiniciar VM1"
                ],
                answer: "Nada mas",
                comment: "Despues de eliminar RG1, el proceso de movimiento esta completo. No es necesario realizar ninguna accion adicional.",
                category: C.ID_GOV,
                subtopic: "Administracion de grupos de recursos"
            },
            // Pregunta 88 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Cual es el orden correcto de las acciones?",
                options: [
                    "Verificar region, Detener VM1, Mover recursos, Reiniciar VM1, Verificar funcionamiento, Eliminar RG1",
                    "Crear RG2, Detener VM1, Mover recursos, Reiniciar VM1, Verificar funcionamiento, Eliminar RG1",
                    "Detener VM1, Verificar region, Mover recursos, Reiniciar VM1, Verificar funcionamiento, Eliminar RG1",
                    "Verificar region, Crear RG2, Detener VM1, Mover recursos, Reiniciar VM1, Verificar funcionamiento, Eliminar RG1"
                ],
                answer: "Verificar region, Detener VM1, Mover recursos, Reiniciar VM1, Verificar funcionamiento, Eliminar RG1",
                comment: "El orden correcto es: 1. Verificar que RG2 este en la misma region que RG1, 2. Detener VM1, 3. Mover VM1 y Disk1 a RG2, 4. Reiniciar VM1, 5. Verificar que VM1 funcione correctamente, 6. Eliminar RG1.",
                category: C.COMPUTE,
                subtopic: "Administracion de maquinas virtuales"
            },
            // Pregunta 89 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que sucede si intenta mover VM1 sin detenerla primero?",
                options: [
                    "La operacion de movimiento fallara",
                    "La operacion de movimiento se completara exitosamente",
                    "VM1 se detendra automaticamente durante el movimiento",
                    "VM1 se reiniciara automaticamente despues del movimiento"
                ],
                answer: "La operacion de movimiento fallara",
                comment: "Si intenta mover VM1 sin detenerla primero, la operacion de movimiento fallara. Las maquinas virtuales deben estar detenidas antes de ser movidas entre grupos de recursos.",
                category: C.COMPUTE,
                subtopic: "Administracion de maquinas virtuales"
            },
            // Pregunta 90 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que sucede si RG2 esta en una region diferente a RG1?",
                options: [
                    "La operacion de movimiento fallara",
                    "La operacion de movimiento se completara exitosamente",
                    "Los recursos se moveran pero VM1 no funcionara correctamente",
                    "Los recursos se moveran pero Disk1 se perdera"
                ],
                answer: "La operacion de movimiento fallara",
                comment: "Si RG2 esta en una region diferente a RG1, la operacion de movimiento fallara. Los recursos no se pueden mover entre regiones.",
                category: C.ID_GOV,
                subtopic: "Administracion de grupos de recursos"
            },
            // Pregunta 91 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que sucede si no reinicia VM1 despues del movimiento?",
                options: [
                    "VM1 no funcionara correctamente",
                    "VM1 funcionara normalmente",
                    "VM1 se reiniciara automaticamente",
                    "VM1 se detendra automaticamente"
                ],
                answer: "VM1 no funcionara correctamente",
                comment: "Si no reinicia VM1 despues del movimiento, es posible que no funcione correctamente en el nuevo grupo de recursos.",
                category: C.COMPUTE,
                subtopic: "Administracion de maquinas virtuales"
            },
            // Pregunta 92 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que sucede si elimina RG1 antes de verificar que VM1 funcione correctamente?",
                options: [
                    "VM1 se eliminara automaticamente",
                    "VM1 seguira funcionando en RG2",
                    "La operacion de eliminacion fallara",
                    "VM1 se movera de vuelta a RG1"
                ],
                answer: "VM1 seguira funcionando en RG2",
                comment: "Si elimina RG1 antes de verificar que VM1 funcione correctamente, VM1 seguira funcionando en RG2. Sin embargo, es recomendable verificar el funcionamiento antes de eliminar el grupo de recursos original.",
                category: C.ID_GOV,
                subtopic: "Administracion de grupos de recursos"
            },
            // Pregunta 93 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que sucede si RG2 no existe?",
                options: [
                    "La operacion de movimiento fallara",
                    "RG2 se creara automaticamente",
                    "Los recursos se moveran a un grupo de recursos temporal",
                    "Los recursos permaneceran en RG1"
                ],
                answer: "La operacion de movimiento fallara",
                comment: "Si RG2 no existe, la operacion de movimiento fallara. Debe crear RG2 antes de intentar mover los recursos.",
                category: C.ID_GOV,
                subtopic: "Administracion de grupos de recursos"
            },
            // Pregunta 94 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que sucede si Disk1 esta acoplado a VM1 durante el movimiento?",
                options: [
                    "La operacion de movimiento fallara",
                    "La operacion de movimiento se completara exitosamente",
                    "Disk1 se desacoplara automaticamente",
                    "Disk1 se perdera durante el movimiento"
                ],
                answer: "La operacion de movimiento se completara exitosamente",
                comment: "Si Disk1 esta acoplado a VM1 durante el movimiento, la operacion de movimiento se completara exitosamente. No es necesario desacoplar el disco antes del movimiento.",
                category: C.COMPUTE,
                subtopic: "Administracion de discos de maquinas virtuales"
            },
            // Pregunta 95 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que sucede si VM1 tiene extensiones instaladas?",
                options: [
                    "Las extensiones se moveran automaticamente con VM1",
                    "Las extensiones se perderan durante el movimiento",
                    "La operacion de movimiento fallara",
                    "Las extensiones se desinstalaran automaticamente"
                ],
                answer: "Las extensiones se moveran automaticamente con VM1",
                comment: "Si VM1 tiene extensiones instaladas, las extensiones se moveran automaticamente con VM1 al nuevo grupo de recursos.",
                category: C.COMPUTE,
                subtopic: "Administracion de maquinas virtuales"
            },
            // Pregunta 96 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que sucede si VM1 tiene una direccion IP publica asignada?",
                options: [
                    "La direccion IP publica se movera automaticamente con VM1",
                    "La direccion IP publica se perdera durante el movimiento",
                    "La operacion de movimiento fallara",
                    "La direccion IP publica se liberara automaticamente"
                ],
                answer: "La direccion IP publica se movera automaticamente con VM1",
                comment: "Si VM1 tiene una direccion IP publica asignada, la direccion IP publica se movera automaticamente con VM1 al nuevo grupo de recursos.",
                category: C.NETWORK,
                subtopic: "Creacion y configuracion de redes virtuales y subredes"
            },
            // Pregunta 97 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que sucede si VM1 tiene una interfaz de red asignada?",
                options: [
                    "La interfaz de red se movera automaticamente con VM1",
                    "La interfaz de red se perdera durante el movimiento",
                    "La operacion de movimiento fallara",
                    "La interfaz de red se desacoplara automaticamente"
                ],
                answer: "La interfaz de red se movera automaticamente con VM1",
                comment: "Si VM1 tiene una interfaz de red asignada, la interfaz de red se movera automaticamente con VM1 al nuevo grupo de recursos.",
                category: C.NETWORK,
                subtopic: "Creacion y configuracion de redes virtuales y subredes"
            },
            // Pregunta 98 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que sucede si VM1 tiene un grupo de seguridad de red asignado?",
                options: [
                    "El grupo de seguridad de red se movera automaticamente con VM1",
                    "El grupo de seguridad de red se perdera durante el movimiento",
                    "La operacion de movimiento fallara",
                    "El grupo de seguridad de red se desacoplara automaticamente"
                ],
                answer: "El grupo de seguridad de red se movera automaticamente con VM1",
                comment: "Si VM1 tiene un grupo de seguridad de red asignado, el grupo de seguridad de red se movera automaticamente con VM1 al nuevo grupo de recursos.",
                category: C.NETWORK,
                subtopic: "Creacion y configuracion de grupos de seguridad de red (NSG) y grupos de seguridad de aplicaciones"
            },
            // Pregunta 99 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que sucede si VM1 tiene un equilibrador de carga asignado?",
                options: [
                    "El equilibrador de carga se movera automaticamente con VM1",
                    "El equilibrador de carga se perdera durante el movimiento",
                    "La operacion de movimiento fallara",
                    "El equilibrador de carga se desacoplara automaticamente"
                ],
                answer: "La operacion de movimiento fallara",
                comment: "Si VM1 tiene un equilibrador de carga asignado, la operacion de movimiento fallara. Debe desacoplar VM1 del equilibrador de carga antes de moverla.",
                category: C.NETWORK,
                subtopic: "Configuracion de un equilibrador de carga interno o publico"
            },
            // Pregunta 100 del PDF
            {
                question: "Tiene una suscripcion de Azure que contiene un grupo de recursos llamado RG1. RG1 contiene una maquina virtual llamada VM1. VM1 tiene un disco de datos llamado Disk1. Necesita mover VM1 y Disk1 a un grupo de recursos llamado RG2. Que sucede si VM1 tiene un conjunto de disponibilidad asignado?",
                options: [
                    "El conjunto de disponibilidad se movera automaticamente con VM1",
                    "El conjunto de disponibilidad se perdera durante el movimiento",
                    "La operacion de movimiento fallara",
                    "El conjunto de disponibilidad se desacoplara automaticamente"
                ],
                answer: "La operacion de movimiento fallara",
                comment: "Si VM1 tiene un conjunto de disponibilidad asignado, la operacion de movimiento fallara. Debe desacoplar VM1 del conjunto de disponibilidad antes de moverla.",
                category: C.COMPUTE,
                subtopic: "Implementacion de maquinas virtuales en zonas de disponibilidad y conjuntos de disponibilidad"
            }
        ];

        // Revision y asignacion de subtema a todas las preguntas sin subtopic
        for (let i = 0; i < originalQuizData.length; i++) {
            if (!originalQuizData[i].subtopic || originalQuizData[i].subtopic === 'Otro' || originalQuizData[i].subtopic === 'Sin subtema asignado') {
                // Asignar subtema por categoria como fallback generico
                if (originalQuizData[i].category === C.ID_GOV) {
                    originalQuizData[i].subtopic = 'Gobernanza y administracion de identidades en Azure';
                } else if (originalQuizData[i].category === C.STORAGE) {
                    originalQuizData[i].subtopic = 'Administracion y configuracion de almacenamiento en Azure';
                } else if (originalQuizData[i].category === C.COMPUTE) {
                    originalQuizData[i].subtopic = 'Administracion y configuracion de recursos de computo en Azure';
                } else if (originalQuizData[i].category === C.NETWORK) {
                    originalQuizData[i].subtopic = 'Administracion y configuracion de redes virtuales en Azure';
                } else if (originalQuizData[i].category === C.MONITOR) {
                    originalQuizData[i].subtopic = 'Supervision y mantenimiento de recursos en Azure';
                } else {
                    originalQuizData[i].subtopic = 'General de Azure';
                }
            }
        }

        // --- STATE ---
        let quizData = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let markedQuestions = [];
        let selectedOption = null;
        let inReviewMode = false;
        let startTime;
        let currentTheme = localStorage.getItem('theme') || 'system';

        // --- DOM ELEMENTS ---
        const quizContainer = document.getElementById('quiz-container');
        const resultContainer = document.getElementById('result-container');
        const navigationControls = document.getElementById('navigation-controls');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const checkBtn = document.getElementById('check-btn');
        const viewModal = document.getElementById('view-modal');
        const summaryListsContainer = document.getElementById('summary-lists');
        const confirmModal = document.getElementById('confirm-modal');
        const quantityModal = document.getElementById('quantity-modal');
        const mainQuizContent = document.getElementById('main-quiz-content');
        const themeToggleBtn = document.getElementById('theme-toggle-btn');
        const quantityButtonsContainer = document.getElementById('quantity-buttons');
        const questionCategoryElement = document.getElementById('question-category');

        // --- FUNCTIONS ---

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function selectQuantity(type, quantity) {
            quantityModal.classList.add('hidden');
            mainQuizContent.classList.remove('hidden');
            mainQuizContent.style.display = '';
            quantityModal.classList.add('hidden');
            mainQuizContent.classList.remove('hidden');
            mainQuizContent.style.display = '';
            if (type === 'exam') {
                startExamGame(quantity);
            } else {
                startGame(quantity);
            }
        }
        
        function startExamGame(numQuestions) {
            inReviewMode = false;
            // Usar solo las preguntas del examen
            const examQuestions = examQuizData.map(q => ({...q, type: 'exam'}));
            quizData = shuffle([...examQuestions]).slice(0, numQuestions);
            currentQuestionIndex = 0;
            userAnswers = Array(quizData.length).fill(null);
            markedQuestions = Array(quizData.length).fill(false);
            selectedOption = null;
            startTime = new Date();
            
            resultContainer.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            navigationControls.classList.remove('hidden');
            document.querySelector('header').classList.remove('hidden');
            
            updateProgressBarVisual();
            loadQuestion();
        }

        function startGame(numQuestions) {
            inReviewMode = false;
            // Asegurar que solo se usen preguntas de teoria (originalQuizData)
            const theoryQuestions = originalQuizData.map(q => ({...q, type: 'theory'}));
            quizData = shuffle([...theoryQuestions]).slice(0, numQuestions);
            currentQuestionIndex = 0;
            userAnswers = Array(quizData.length).fill(null);
            markedQuestions = Array(quizData.length).fill(false);
            selectedOption = null;
            startTime = new Date();
            
            resultContainer.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            navigationControls.classList.remove('hidden');
            document.querySelector('header').classList.remove('hidden');
            
            updateProgressBarVisual();
            loadQuestion();
        }

        function startReview() {
            if (!quizData || !quizData.length) {
                console.error('No hay preguntas para revisar');
                return;
            }
            inReviewMode = true;
            currentQuestionIndex = 0;
            resultContainer.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            navigationControls.classList.remove('hidden');
            document.querySelector('header').classList.remove('hidden');
            loadQuestion();
        }

        function loadQuestion() {
            if (!quizData || !quizData.length || !quizData[currentQuestionIndex]) {
                console.error('No hay preguntas cargadas o el indice es invalido');
                return;
            }
            
            selectedOption = null; 
            const questionData = quizData[currentQuestionIndex];
            
            questionCategoryElement.textContent = questionData.category;

            let optionsToDisplay = [...questionData.options];
            if (!inReviewMode && userAnswers[currentQuestionIndex] === null) {
                optionsToDisplay = shuffle(optionsToDisplay);
            }

            let optionsHtml = optionsToDisplay.map((option, index) => {
                const optionLetter = String.fromCharCode(65 + index);
                const escapedOption = option.replace(/'/g, "&apos;").replace(/"/g, "&quot;");
                const isSelected = userAnswers[currentQuestionIndex] === option;
                const isAnswered = userAnswers[currentQuestionIndex] !== null;
                
                return `<button class="option-btn w-full text-left p-4 border-2 rounded-lg dark:border-gray-600 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-200 ${isSelected ? 'selected' : ''}" data-option-value="${escapedOption}" ${isAnswered ? 'disabled' : ''}>${optionLetter}. ${option}</button>`;
            }).join('');

            quizContainer.innerHTML = `
                <div class="question-card bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                    <div class="flex justify-between items-start mb-4">
                        <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100">${questionData.question}</h2>
                        <button onclick="toggleMarkQuestion()" id="mark-btn" class="text-2xl ${markedQuestions[currentQuestionIndex] ? 'marked' : 'text-gray-400'} hover:text-amber-500 transition-colors">
                            <i class="fas fa-bookmark"></i>
                        </button>
                    </div>
                    <div class="options-container space-y-3">${optionsHtml}</div>
                    <div id="feedback-${currentQuestionIndex}" class="feedback mt-4 p-4 rounded-lg bg-gray-50 dark:bg-gray-700">
                        <p class="font-bold text-gray-900 dark:text-gray-100">Comentario:</p>
                        <p class="text-gray-900 dark:text-gray-100">${questionData.comment}</p>
                    </div>
                </div>
            `;
            
            // Solo agregar event listeners si la pregunta no esta respondida
            const isAnswered = userAnswers[currentQuestionIndex] !== null;
            if (!isAnswered) {
                quizContainer.querySelectorAll('.option-btn').forEach(button => {
                    button.addEventListener('click', () => selectOption(button, button.dataset.optionValue));
                });
                
                // Deshabilitar boton de comprobar inicialmente
                const checkBtn = document.getElementById('check-btn');
                if (checkBtn) {
                    checkBtn.disabled = true;
                    checkBtn.classList.add('opacity-50', 'cursor-not-allowed');
                    checkBtn.classList.remove('hover:bg-blue-700');
                }
            } else {
                // Si ya esta respondida, mostrar feedback
                showFeedback(false); 
            }
            
            updateNavigation();

            if(inReviewMode) {
                document.getElementById('mark-btn').disabled = true;
            }
        }

        function updateNavigation() {
            progressText.textContent = `Pregunta ${currentQuestionIndex + 1} de ${quizData.length}`;
            prevBtn.disabled = currentQuestionIndex === 0;
            
            if(inReviewMode) {
                checkBtn.classList.add('hidden');
                nextBtn.disabled = currentQuestionIndex === quizData.length - 1;
                nextBtn.textContent = (currentQuestionIndex === quizData.length - 1) ? 'Ver Resultados' : 'Siguiente';
            } else {
                checkBtn.classList.remove('hidden');
                checkBtn.disabled = selectedOption === null || userAnswers[currentQuestionIndex] !== null;
                nextBtn.disabled = userAnswers[currentQuestionIndex] === null;
                nextBtn.textContent = 'Siguiente';
            }
        }
        
        // Funcion para seleccionar opcion (mejorada para evitar auto-seleccion)
        function selectOption(btnElement, optionValue) {
            // Verificar si ya esta respondida o en modo review
            if (inReviewMode || userAnswers[currentQuestionIndex] !== null) {
                console.log('Pregunta ya respondida o en modo review');
                return;
            }
            
            // Verificar si el boton esta deshabilitado
            if (btnElement.disabled) {
                console.log('Boton deshabilitado');
                return;
            }
            
            console.log('Seleccionando opcion:', optionValue);
            
            // Remover seleccion previa
            quizContainer.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Seleccionar nueva opcion
            btnElement.classList.add('selected');
            selectedOption = optionValue;
            
            // Habilitar boton de comprobar
            const checkBtn = document.getElementById('check-btn');
            if (checkBtn) {
                checkBtn.disabled = false;
                checkBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                checkBtn.classList.add('hover:bg-blue-700');
            }
        }

        function checkAnswer() {
            if (selectedOption === null || inReviewMode) return;
            userAnswers[currentQuestionIndex] = selectedOption;
            showFeedback(true);
            updateNavigation(); 
            updateProgressBarVisual();
            
            // Auto-desplegar explicacion despues de un breve delay
            setTimeout(() => {
                const feedbackDiv = document.getElementById(`feedback-${currentQuestionIndex}`);
                if (feedbackDiv && !feedbackDiv.classList.contains('show')) {
                    feedbackDiv.classList.add('show');
                    
                    // Scroll suave hacia la explicacion
                    feedbackDiv.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'nearest' 
                    });
                }
            }, 500); // Delay de 500ms para mejor UX
        }
        
        function showFeedback(animate) {
            const questionData = quizData[currentQuestionIndex];
            const userAnswer = userAnswers[currentQuestionIndex];
            const options = quizContainer.querySelectorAll('.option-btn');
            
            // Deshabilitar todas las opciones
            options.forEach(btn => {
                btn.disabled = true;
                if (btn.dataset.optionValue === questionData.answer) {
                    btn.classList.add('correct');
                } else if (btn.dataset.optionValue === userAnswer) {
                    btn.classList.add('incorrect');
                }
            });
            
            const feedbackDiv = document.getElementById(`feedback-${currentQuestionIndex}`);
            
            // Crear feedback mejorado
            let feedbackHtml = `
                <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border-l-4 ${
                    userAnswer === questionData.answer ? 'border-green-500' : 'border-red-500'
                }">
            `;
            
            if (userAnswer === questionData.answer) {
                feedbackHtml += `
                    <div class="flex items-center mb-3">
                        <svg class="w-5 h-5 text-green-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <p class='font-bold text-green-600 text-lg'>!Respuesta correcta!</p>
                    </div>
                `;
            } else {
                feedbackHtml += `
                    <div class="flex items-center mb-3">
                        <svg class="w-5 h-5 text-red-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                        </svg>
                        <p class='font-bold text-red-600 text-lg'>Respuesta incorrecta</p>
                    </div>
                    <div class="mb-3">
                        <p class='text-sm'><span class='font-bold text-red-600'>Tu respuesta:</span> ${userAnswer || 'Sin respuesta'}</p>
                        <p class='text-sm'><span class='font-bold text-green-600'>Respuesta correcta:</span> ${questionData.answer}</p>
                    </div>
                `;
            }
            
            feedbackHtml += `
                <div class="space-y-2">
                    <p class='text-sm text-gray-700 dark:text-gray-300'><span class='font-bold'>Comentario:</span> ${questionData.comment}</p>
                    <p class='text-xs text-blue-700 dark:text-blue-300'><span class='font-bold'>Tema:</span> ${questionData.category}</p>
                    <p class='text-xs text-indigo-700 dark:text-indigo-300'><span class='font-bold'>Subtema:</span> ${questionData.subtopic && questionData.subtopic !== 'Otro' ? questionData.subtopic : 'Sin subtema asignado'}</p>
                </div>
            </div>
            `;
            
            feedbackDiv.innerHTML = feedbackHtml;
            
            if (animate) {
                // Auto-desplegar con animacion
                setTimeout(() => {
                    feedbackDiv.classList.add('show');
                    
                    // Scroll suave hacia la explicacion
                    feedbackDiv.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'nearest',
                        inline: 'nearest'
                    });
                }, 300);
            } else {
                // Mostrar inmediatamente (modo review)
                feedbackDiv.style.maxHeight = '300px';
                feedbackDiv.style.paddingTop = '1.5rem';
                feedbackDiv.style.paddingBottom = '1.5rem';
                feedbackDiv.style.opacity = '1';
                feedbackDiv.style.transform = 'translateY(0)';
                feedbackDiv.classList.add('show');
            }
        }
        
        function toggleMarkQuestion() {
            if (inReviewMode) return;
            const markBtn = document.getElementById('mark-btn');
            markedQuestions[currentQuestionIndex] = !markedQuestions[currentQuestionIndex];
            markBtn.classList.toggle('marked');
            markBtn.classList.toggle('text-gray-400');
        }

        function nextQuestion() {
            if (inReviewMode) {
                if (currentQuestionIndex < quizData.length - 1) {
                    currentQuestionIndex++;
                    loadQuestion();
                } else {
                    showResults();
                }
                return;
            }
            
            if (userAnswers[currentQuestionIndex] === null) {
                userAnswers[currentQuestionIndex] = "No contestada"; 
            }
            
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                confirmFinishTest();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }
        
        function jumpToQuestion(index) {
            currentQuestionIndex = index;
            loadQuestion();
            toggleViewModal();
        }

        function showResults() {
            quizContainer.classList.add('hidden');
            resultContainer.classList.remove('hidden');
            navigationControls.classList.add('hidden');
            let correctAnswers = 0;
            let incorrectAnswers = 0;
            let unansweredCount = 0;
            const categoryScores = {};
            const subtopicScores = {};
            Object.values(C).forEach(catName => {
                categoryScores[catName] = { correct: 0, total: 0 };
            });
            // Guardar preguntas falladas
            let wrongQuestions = [];
            userAnswers.forEach((answer, index) => {
                const questionData = quizData[index];
                const category = questionData.category;
                const subtopic = (questionData.subtopic && questionData.subtopic !== 'Otro') ? questionData.subtopic : 'Sin subtema asignado';
                categoryScores[category].total++;
                if (!subtopicScores[category]) subtopicScores[category] = {};
                if (!subtopicScores[category][subtopic]) subtopicScores[category][subtopic] = { correct: 0, total: 0 };
                subtopicScores[category][subtopic].total++;
                if (answer === "No contestada") {
                    unansweredCount++;
                } else if (answer === questionData.answer) {
                    correctAnswers++;
                    categoryScores[category].correct++;
                    subtopicScores[category][subtopic].correct++;
                } else {
                    incorrectAnswers++;
                    wrongQuestions.push({
                        question: questionData.question,
                        userAnswer: answer,
                        correctAnswer: questionData.answer,
                        comment: questionData.comment,
                        category: questionData.category,
                        subtopic: subtopic
                    });
                }
            });
            const totalQuestions = quizData.length;
            const percentage = totalQuestions > 0 ? ((correctAnswers / totalQuestions) * 100).toFixed(2) : 0;
            const endTime = new Date();
            const durationMs = endTime - startTime;
            const minutes = Math.floor(durationMs / 60000);
            const seconds = ((durationMs % 60000) / 1000).toFixed(0);
            const durationString = `${minutes}m ${seconds}s`;
            document.getElementById('result-details').innerHTML = `
                <span class="text-green-500 font-bold">Acertadas: ${correctAnswers}</span> | 
                <span class="text-red-500 font-bold">Incorrectas: ${incorrectAnswers}</span> |
                <span class="text-gray-500 font-bold">Sin contestar: ${unansweredCount}</span><br>
                <span class="text-gray-700 dark:text-gray-300 font-bold">Duracion: ${durationString}</span>
            `;
            const scorePercentageEl = document.getElementById('score-percentage');
            const resultMessageEl = document.getElementById('result-message');
            scorePercentageEl.textContent = `${percentage}%`;
            if (percentage >= 70) {
                resultMessageEl.textContent = "!Aprobado!";
                resultMessageEl.className = "text-2xl font-semibold text-green-500";
                scorePercentageEl.className = "text-4xl font-bold mb-2 text-green-500";
            } else {
                resultMessageEl.textContent = "Necesitas repasar";
                resultMessageEl.className = "text-2xl font-semibold text-red-500";
                scorePercentageEl.className = "text-4xl font-bold mb-2 text-red-500";
            }
            // --- Render Category Results ---
            const categoryResultsEl = document.getElementById('category-results');
            categoryResultsEl.innerHTML = '';
            for (const categoryName in categoryScores) {
                const score = categoryScores[categoryName];
                if (score.total > 0) {
                    const catPercentage = ((score.correct / score.total) * 100);
                    const catPercentageFormatted = catPercentage.toFixed(0);
                    const barColor = catPercentage >= 70 ? 'bg-green-500' : (catPercentage >= 50 ? 'bg-yellow-500' : 'bg-red-500');
                    categoryResultsEl.innerHTML += `
                        <div>
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-md font-medium text-gray-800 dark:text-gray-200">${categoryName}</span>
                                <span class="text-sm font-semibold text-gray-600 dark:text-gray-300">${score.correct} / ${score.total}</span>
                            </div>
                            <div class="category-progress h-6 w-full">
                                <div class="category-progress-bar ${barColor}" style="width: ${catPercentageFormatted}%">
                                    ${catPercentageFormatted}%
                                </div>
                            </div>
                        </div>
                    `;
                }
            }
            // Sugerir subtemas a reforzar
            let subtemasRefuerzo = {};
            for (const categoryName in subtopicScores) {
                for (const subtopic in subtopicScores[categoryName]) {
                    const score = subtopicScores[categoryName][subtopic];
                    if (score.total > 0 && ((score.correct / score.total) * 100) < 70) {
                        if (!subtemasRefuerzo[categoryName]) subtemasRefuerzo[categoryName] = [];
                        subtemasRefuerzo[categoryName].push(subtopic);
                    }
                }
            }
            if (Object.keys(subtemasRefuerzo).length > 0) {
                let refuerzoHtml = `<div class='mt-8 text-left'><h3 class='text-xl font-bold mb-4 text-center text-yellow-600'>Temas y subtemas a reforzar</h3>`;
                for (const cat in subtemasRefuerzo) {
                    refuerzoHtml += `<div class='mb-2'><span class='font-bold text-blue-700 dark:text-blue-300'>${cat}</span><ul class='list-disc pl-6'>`;
                    subtemasRefuerzo[cat].forEach(sub => {
                        refuerzoHtml += `<li class='text-indigo-700 dark:text-indigo-300'>${sub}</li>`;
                    });
                    refuerzoHtml += `</ul></div>`;
                }
                refuerzoHtml += `</div>`;
                categoryResultsEl.innerHTML += refuerzoHtml;
            }
        }
        
        function restartGame() {
            const quantityModal = document.getElementById('quantity-modal');
            const mainQuizContent = document.getElementById('main-quiz-content');
            if (quantityModal) quantityModal.classList.remove('hidden');
            if (mainQuizContent) mainQuizContent.classList.add('hidden');
        }

        function toggleViewModal() {
            if (viewModal.classList.contains('hidden')) {
                updateViewModalLists();
                viewModal.classList.remove('hidden');
                setTimeout(() => {
                    viewModal.classList.add('opacity-100');
                    viewModal.querySelector('.modal-container').classList.remove('scale-95');
                }, 10);
            } else {
                viewModal.classList.remove('opacity-100');
                viewModal.querySelector('.modal-container').classList.add('scale-95');
                setTimeout(() => viewModal.classList.add('hidden'), 300);
            }
        }

        function updateViewModalLists() {
            summaryListsContainer.innerHTML = '';
            const lists = {
                'Sin Contestar': [],
                'Contestadas': [],
                'Marcadas para Revisar': []
            };

            quizData.forEach((q, index) => {
                const btn = document.createElement('button');
                btn.textContent = index + 1;
                btn.className = 'h-10 w-10 flex items-center justify-center rounded font-bold transition relative';
                btn.onclick = () => jumpToQuestion(index);

                const isAnswered = userAnswers[index] !== null && userAnswers[index] !== "No contestada";
                
                if (isAnswered) {
                    btn.classList.add('bg-green-200', 'text-green-800', 'hover:bg-green-300', 'dark:bg-green-800', 'dark:text-green-100', 'dark:hover:bg-green-700');
                    if (userAnswers[index] !== q.answer) {
                        btn.classList.remove('bg-green-200', 'hover:bg-green-300', 'dark:bg-green-800', 'dark:hover:bg-green-700');
                        btn.classList.add('bg-red-200', 'text-red-800', 'hover:bg-red-300', 'dark:bg-red-800', 'dark:text-red-100', 'dark:hover:bg-red-700');
                    }
                    lists['Contestadas'].push(btn);
                } else {
                    btn.classList.add('bg-gray-200', 'text-gray-800', 'hover:bg-gray-300', 'dark:bg-gray-600', 'dark:text-gray-100', 'dark:hover:bg-gray-500');
                    lists['Sin Contestar'].push(btn);
                }

                if (markedQuestions[index]) {
                    const clone = btn.cloneNode(true);
                    clone.onclick = () => jumpToQuestion(index);
                    lists['Marcadas para Revisar'].push(clone);
                }
            });

            for (const [title, buttonList] of Object.entries(lists)) {
                const container = document.createElement('div');
                container.innerHTML = `<h4 class="font-bold mb-2 text-lg border-b pb-1 dark:border-gray-500">${title}</h4>`;
                const listWrapper = document.createElement('div');
                listWrapper.className = 'flex flex-wrap gap-2 justify-start';
                if (buttonList.length > 0) {
                    buttonList.forEach(btn => listWrapper.appendChild(btn));
                } else {
                    listWrapper.innerHTML = '<p class="text-sm text-gray-500 w-full">Ninguna</p>';
                }
                container.appendChild(listWrapper);
                summaryListsContainer.appendChild(container);
            }
        }
        
        function confirmFinishTest() {
            const unansweredCount = userAnswers.filter(a => a === null || a === "No contestada").length;
            document.getElementById('confirm-title').textContent = unansweredCount > 0 ? '?Finalizar Test?' : '?Finalizar y ver resultados?';
            document.getElementById('confirm-message').textContent = unansweredCount > 0 ? `Advertencia: Tienes ${unansweredCount} preguntas sin contestar? Estas seguro?` : `Has contestado todas las preguntas? Quieres finalizar?`;
            
            confirmModal.classList.remove('hidden');
            setTimeout(() => confirmModal.querySelector('.modal-container').classList.remove('scale-95'), 10);
        }
        
        function handleFinishConfirmation(confirmed) {
            confirmModal.querySelector('.modal-container').classList.add('scale-95');
            setTimeout(() => confirmModal.classList.add('hidden'), 200);

            if (confirmed) {
                showResults();
                if (!viewModal.classList.contains('hidden')) {
                    toggleViewModal();
                }
            }
        }

        function applyTheme(theme) {
            const htmlEl = document.documentElement;
            currentTheme = theme;
            localStorage.setItem('theme', theme);
            const icon = themeToggleBtn.querySelector('i');

            if (theme === 'dark' || (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                htmlEl.classList.add('dark');
                if (icon) icon.className = 'fas fa-sun';
            } else {
                htmlEl.classList.remove('dark');
                if (icon) icon.className = 'fas fa-moon';
            }
        }

        function toggleTheme() {
            const htmlEl = document.documentElement;
            htmlEl.classList.toggle('dark');
            currentTheme = htmlEl.classList.contains('dark') ? 'dark' : 'light';
            localStorage.setItem('theme', currentTheme);
            applyTheme(currentTheme);
        }

        function updateProgressBarVisual() {
            let answeredCount = userAnswers.filter(answer => answer !== null && answer !== "No contestada").length;
            const progress = (answeredCount / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressBar.textContent = `${Math.round(progress)}%`;
        }

        window.onload = function() {
            // Solo inicializa si el contenedor del test existe
            var quizContainer = document.getElementById('quiz-container');
            var quantityButtonsContainer = document.getElementById('quantity-buttons');
            var themeToggleBtn = document.getElementById('theme-toggle-btn');
            if (!quizContainer || !quantityButtonsContainer || !themeToggleBtn) return;

            themeToggleBtn.onclick = toggleTheme;
            applyTheme(localStorage.getItem('theme') || 'system');

            quantityButtonsContainer.querySelectorAll('button').forEach(button => {
                button.addEventListener('click', (event) => {
                    const type = event.target.dataset.type;
                    const quantity = parseInt(event.target.dataset.quantity);
                    selectQuantity(type, quantity);
                });
            });
        };

        // Asignacion de subtemas oficiales a todas las preguntas
        definirSubtemaOficial = (pregunta) => {
          // Subtemas oficiales por categoria
          const subtemasIDGOV = [
            'Administrar usuarios y grupos de Microsoft Entra',
            'Administracion de propiedades de usuario y grupo',
            'Administrar licencias en Microsoft Entra ID',
            'Administracion de usuarios externos',
            'Configuracion del autoservicio de restablecimiento de contrasena (SSPR)',
            'Administracion del acceso de usuarios a los recursos de Azure',
            'Administracion de roles de Azure integrados',
            'Asignacion de roles en distintos ambitos',
            'Interpretacion de las asignaciones de acceso',
            'Administracion de suscripciones y gobernanza de Azure',
            'Implementacion y administracion de Azure Policy',
            'Configuracion de bloqueos de recursos',
            'Aplicacion y administracion de etiquetas en recursos',
            'Administracion de grupos de recursos',
            'Administrar suscripciones',
            'Administracion de costos mediante alertas, presupuestos y recomendaciones de Azure Advisor',
            'Configuracion de grupos de administracion'
          ];
          const subtemasSTORAGE = [
            'Configuracion del acceso al almacenamiento',
            'Configuracion de redes virtuales y firewalls de Azure Storage',
            'Creacion y uso de tokens de firma de acceso compartido (SAS)',
            'Configuracion de las directivas de acceso almacenadas',
            'Administracion de las claves de acceso',
            'Configuracion del acceso basado en identidad para Azure Files',
            'Creacion y configuracion de cuentas de almacenamiento',
            'Configuracion de la redundancia de Azure Storage',
            'Configuracion de la replicacion de objetos',
            'Configuracion del cifrado de una cuenta de almacenamiento',
            'Administracion de datos mediante Explorador de Azure Storage y AzCopy',
            'Creacion y configuracion de un recurso compartido de archivos en Azure Storage',
            'Creacion y configuracion de un contenedor en Blob Storage',
            'Configuracion de las capas de almacenamiento',
            'Configuracion de la eliminacion temporal para blobs y contenedores',
            'Configuracion de instantaneas y eliminacion temporal para Azure Files',
            'Configuracion de la administracion del ciclo de vida de los blobs',
            'Configuracion del control de versiones de blobs'
          ];
          const subtemasCOMPUTE = [
            'Interpretacion de una plantilla de Azure Resource Manager o un archivo de Bicep',
            'Modificacion de una plantilla de Azure Resource Manager existente',
            'Modificacion de un archivo de Bicep',
            'Implementacion de recursos mediante una plantilla de Azure Resource Manager o un archivo de Bicep',
            'Exportacion de una implementacion como plantilla de Azure Resource Manager o conversion de una plantilla de Azure Resource Manager en un archivo de Bicep',
            'Creacion de una maquina virtual',
            'Configuracion de Azure Disk Encryption',
            'Traslado de una maquina virtual a otro grupo de recursos, otra suscripcion u otra region',
            'Administracion de los tamanos de maquina virtual',
            'Administracion de discos de maquinas virtuales',
            'Implementacion de maquinas virtuales en zonas de disponibilidad y conjuntos de disponibilidad',
            'Implementacion y configuracion de un conjunto de escalado de maquinas virtuales de Azure',
            'Creacion y administracion de un registro de contenedor de Azure',
            'Aprovisionamiento de un contenedor con Azure Container Instances',
            'Aprovisionamiento de un contenedor con Azure Container Apps',
            'Administracion del ajuste de tamano y el escalado de contenedores, incluidos Azure Container Instances y Azure Container Apps',
            'Aprovisionamiento de un plan de App Service',
            'Configuracion del escalado de un plan de App Service',
            'Crear una instancia de App Service',
            'Configuracion de certificados y seguridad de la capa de transporte (TLS) para una instancia de App Service',
            'Asignacion de un nombre DNS personalizado a una instancia de App Service',
            'Configuracion de una copia de seguridad para una instancia de App Service',
            'Configuracion de redes para una instancia de App Service',
            'Configuracion de ranuras de implementacion para una instancia de App Service'
          ];
          const subtemasNETWORK = [
            'Creacion y configuracion de redes virtuales y subredes',
            'Creacion y configuracion del emparejamiento de red virtual',
            'Configuracion de direcciones IP publicas',
            'Configuracion de rutas de red definidas por el usuario',
            'Solucion de problemas de conectividad de red',
            'Creacion y configuracion de grupos de seguridad de red (NSG) y grupos de seguridad de aplicaciones',
            'Evaluacion de reglas de seguridad eficaces en grupos de seguridad de red',
            'Implementacion de Azure Bastion',
            'Configuracion de puntos de conexion de servicio para la plataforma como servicio (PaaS) Azure',
            'Configuracion de puntos de conexion privados para la plataforma como servicio (PaaS) Azure',
            'Configuracion de Azure DNS',
            'Configuracion de un equilibrador de carga interno o publico',
            'Solucion de problemas del equilibrio de carga'
          ];
          const subtemasMONITOR = [
            'Interpretacion de metricas en Azure Monitor',
            'Configuracion de registros en Azure Monitor',
            'Consulta y analisis de registros en Azure Monitor',
            'Configuracion de reglas de alertas, grupos de acciones y reglas de procesamiento de alertas en Azure Monitor',
            'Configuracion e interpretacion de la supervision de maquinas virtuales, cuentas de almacenamiento y redes con Azure Monitor Insights',
            'Uso de Azure Network Watcher y Connection Monitor',
            'Creacion de un almacen de Recovery Services',
            'Creacion de un almacen de Azure Backup',
            'Creacion y configuracion de una directiva de copia de seguridad',
            'Realizacion de operaciones de copia de seguridad y restauracion mediante Azure Backup',
            'Configuracion de Azure Site Recovery para recursos de Azure',
            'Realizacion de una conmutacion por error a una region secundaria mediante Site Recovery',
            'Configuracion e interpretacion de informes y alertas para copias de seguridad'
          ];
          // Logica de asignacion por palabras clave en la pregunta o subtema anterior
          const texto = (pregunta.question + ' ' + (pregunta.subtopic || '')).toLowerCase();
          // ID_GOV
          if (pregunta.category === C.ID_GOV) {
            if (texto.includes('policy')) return 'Implementacion y administracion de Azure Policy';
            if (texto.includes('grupo de administracion')) return 'Configuracion de grupos de administracion';
            if (texto.includes('etiquet')) return 'Aplicacion y administracion de etiquetas en recursos';
            if (texto.includes('bloqueo')) return 'Configuracion de bloqueos de recursos';
            if (texto.includes('licenc')) return 'Administrar licencias en Microsoft Entra ID';
            if (texto.includes('sspr') || texto.includes('restablecimiento de contrasena')) return 'Configuracion del autoservicio de restablecimiento de contrasena (SSPR)';
            if (texto.includes('rol') && texto.includes('rbac')) return 'Administracion de roles de Azure integrados';
            if (texto.includes('advisor')) return 'Administracion de costos mediante alertas, presupuestos y recomendaciones de Azure Advisor';
            if (texto.includes('blueprint')) return 'Administracion de suscripciones y gobernanza de Azure';
            if (texto.includes('grupo de recursos')) return 'Administracion de grupos de recursos';
            if (texto.includes('suscrip')) return 'Administrar suscripciones';
            return 'Administracion de suscripciones y gobernanza de Azure';
          }
          // STORAGE
          if (pregunta.category === C.STORAGE) {
            if (texto.includes('sas')) return 'Creacion y uso de tokens de firma de acceso compartido (SAS)';
            if (texto.includes('azcopy')) return 'Administracion de datos mediante Explorador de Azure Storage y AzCopy';
            if (texto.includes('blob')) return 'Creacion y configuracion de un contenedor en Blob Storage';
            if (texto.includes('redundancia')) return 'Configuracion de la redundancia de Azure Storage';
            if (texto.includes('cifrado')) return 'Configuracion del cifrado de una cuenta de almacenamiento';
            if (texto.includes('archivo') || texto.includes('file')) return 'Creacion y configuracion de un recurso compartido de archivos en Azure Storage';
            if (texto.includes('ciclo de vida')) return 'Configuracion de la administracion del ciclo de vida de los blobs';
            if (texto.includes('instantanea')) return 'Configuracion de instantaneas y eliminacion temporal para Azure Files';
            if (texto.includes('cuenta de almacenamiento')) return 'Creacion y configuracion de cuentas de almacenamiento';
            return 'Configuracion del acceso al almacenamiento';
          }
          // COMPUTE
          if (pregunta.category === C.COMPUTE) {
            if (texto.includes('bicep') || texto.includes('arm')) return 'Interpretacion de una plantilla de Azure Resource Manager o un archivo de Bicep';
            if (texto.includes('maquina virtual') && texto.includes('crea')) return 'Creacion de una maquina virtual';
            if (texto.includes('disco') && texto.includes('admin')) return 'Administracion de discos de maquinas virtuales';
            if (texto.includes('escalado')) return 'Implementacion y configuracion de un conjunto de escalado de maquinas virtuales de Azure';
            if (texto.includes('app service')) return 'Aprovisionamiento de un plan de App Service';
            if (texto.includes('container')) return 'Aprovisionamiento de un contenedor con Azure Container Instances';
            if (texto.includes('imagen')) return 'Creacion y uso de imagenes de maquina virtual';
            if (texto.includes('backup')) return 'Creacion y configuracion de una directiva de copia de seguridad';
            return 'Creacion y configuracion de maquinas virtuales';
          }
          // NETWORK
          if (pregunta.category === C.NETWORK) {
            if (texto.includes('dns')) return 'Configuracion de Azure DNS';
            if (texto.includes('bastion')) return 'Implementacion de Azure Bastion';
            if (texto.includes('nsg') || texto.includes('seguridad')) return 'Creacion y configuracion de grupos de seguridad de red (NSG) y grupos de seguridad de aplicaciones';
            if (texto.includes('emparejamiento')) return 'Creacion y configuracion del emparejamiento de red virtual';
            if (texto.includes('equilibrador')) return 'Configuracion de un equilibrador de carga interno o publico';
            if (texto.includes('ruta')) return 'Configuracion de rutas de red definidas por el usuario';
            if (texto.includes('ip publica')) return 'Configuracion de direcciones IP publicas';
            if (texto.includes('privado')) return 'Configuracion de puntos de conexion privados para la plataforma como servicio (PaaS) Azure';
            if (texto.includes('servicio')) return 'Configuracion de puntos de conexion de servicio para la plataforma como servicio (PaaS) Azure';
            return 'Configuracion y administracion de redes virtuales en Azure';
          }
          // MONITOR
          if (pregunta.category === C.MONITOR) {
            if (texto.includes('alerta') || texto.includes('grupo de acciones')) return 'Configuracion de reglas de alertas, grupos de acciones y reglas de procesamiento de alertas en Azure Monitor';
            if (texto.includes('log analytics') || texto.includes('consulta')) return 'Consulta y analisis de registros en Azure Monitor';
            if (texto.includes('metrica')) return 'Interpretacion de metricas en Azure Monitor';
            if (texto.includes('backup')) return 'Creacion y configuracion de una directiva de copia de seguridad';
            if (texto.includes('site recovery')) return 'Configuracion de Azure Site Recovery para recursos de Azure';
            if (texto.includes('network watcher')) return 'Uso de Azure Network Watcher y Connection Monitor';
            return 'Supervision de recursos en Azure';
          }
          return 'General de Azure';
        };
        for (let i = 0; i < originalQuizData.length; i++) {
          originalQuizData[i].subtopic = definirSubtemaOficial(originalQuizData[i]);
        }

        // Configuracion de tu proyecto Firebase
        // Estructura de base de datos unificada por proyectos:
        // projects/az-104/allowed_users/{uid}
        // - email, nombre, apellido, pais, ip, timestamp, approved (true/false)
        const firebaseConfig = {
          apiKey: "AIzaSyAdv8kYX6ojZp-SOctuiv4X-yZAsinRPl0",
          authDomain: "autenticacion-98dbb.firebaseapp.com",
          projectId: "autenticacion-98dbb",
          storageBucket: "autenticacion-98dbb.firebasestorage.app",
          messagingSenderId: "393896566390",
          appId: "1:393896566390:web:970fa2fb679775302b0957"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const dbRef = firebase.database();
        // Variable global para guardar el email tras login
        let emailUsuarioGoogle = null;
        
        // Funcion para migrar datos antiguos (ejecutar una vez)
        async function migrateOldData() {
          try {
            console.log('ðŸ”„ Iniciando migracion de datos...');
            
            // Migrar datos de allowed_users raiz a projects/az-104/allowed_users
            let oldAllowedUsers;
            try {
              oldAllowedUsers = await dbRef.ref('allowed_users').once('value');
            } catch (permError) {
              console.log('â„¹ï¸ No hay acceso a allowed_users raiz (probablemente ya migrado)');
              oldAllowedUsers = null;
            }
            
            if (oldAllowedUsers && oldAllowedUsers.exists()) {
              console.log('ðŸ“¦ Encontrados datos antiguos, migrando...');
              const oldData = oldAllowedUsers.val();
              let migratedCount = 0;
              
              for (const [key, value] of Object.entries(oldData)) {
                try {
                  // Solo migrar si no existe en la nueva ubicacion
                  const newUserRef = await dbRef.ref('projects/az-104/allowed_users/' + key).once('value');
                  if (!newUserRef.exists()) {
                    // Migrar solo con approved, sin status
                    const { status, ...userData } = value;
                    await dbRef.ref('projects/az-104/allowed_users/' + key).set({
                      ...userData,
                      approved: value.approved || false
                    });
                    migratedCount++;
                  }
                } catch (error) {
                  console.error(`âŒ Error migrando usuario ${key}:`, error);
                }
              }
              
              // Eliminar datos antiguos solo si la migracion fue exitosa
              if (migratedCount > 0) {
                await dbRef.ref('allowed_users').remove();
                console.log(`âœ… Migrados ${migratedCount} usuarios exitosamente`);
              } else {
                console.log('â„¹ï¸ No se encontraron usuarios nuevos para migrar');
              }
            } else {
              console.log('â„¹ï¸ No se encontraron datos antiguos para migrar');
            }
            
            // Eliminar pending_requests raiz (ya no se usa)
            try {
              const pendingRequests = await dbRef.ref('pending_requests').once('value');
              if (pendingRequests.exists()) {
                await dbRef.ref('pending_requests').remove();
                console.log('âœ… Datos de pending_requests eliminados');
              }
            } catch (error) {
              console.log('â„¹ï¸ No se encontraron datos de pending_requests');
            }
            
            // Limpiar campo 'status' de datos existentes en projects/az-104/allowed_users
            try {
              const existingUsers = await dbRef.ref('projects/az-104/allowed_users').once('value');
              if (existingUsers.exists()) {
                const usersData = existingUsers.val();
                let cleanedCount = 0;
                
                for (const [key, value] of Object.entries(usersData)) {
                  if (value.status !== undefined) {
                    // Remover campo status y mantener solo approved
                    const { status, ...cleanData } = value;
                    await dbRef.ref('projects/az-104/allowed_users/' + key).set(cleanData);
                    cleanedCount++;
                  }
                }
                
                if (cleanedCount > 0) {
                  console.log(`âœ… Campo "status" eliminado de ${cleanedCount} usuarios`);
                } else {
                  console.log('â„¹ï¸ No se encontraron campos "status" para limpiar');
                }
              }
            } catch (error) {
              console.error('âŒ Error limpiando campo status:', error);
            }
            
            console.log('âœ… Migracion completada exitosamente');
          } catch (error) {
            console.error('âŒ Error durante la migracion:', error);
          }
        }
        
        // Ejecutar migracion una vez al cargar la pagina
        // - Migra datos de allowed_users raiz a projects/az-104/allowed_users
        // - Elimina pending_requests raiz
        // - Limpia campo 'status' y mantiene solo 'approved'
        // NOTA: La migracion se ejecuta despues del login, no al cargar la pagina
        // migrateOldData();
        
        // Funcion para probar la conexion con Telegram
        async function testTelegramConnection() {
          try {
            const TELEGRAM_BOT_TOKEN = '8046438946:AAHh1m7uiJrmYZiiaTpKjxBLKkAeHna0QAI';
            const TELEGRAM_CHAT_ID = '568985065';
            const testMessage = encodeURIComponent('ðŸ§ª Test de conexion - Bot funcionando correctamente');
            
            console.log('ðŸ§ª Probando conexion con Telegram...');
            const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage?chat_id=${TELEGRAM_CHAT_ID}&text=${testMessage}`);
            
            if (response.ok) {
              const result = await response.json();
              if (result.ok) {
                console.log('âœ… Conexion con Telegram exitosa');
              } else {
                console.error('âŒ Error en bot de Telegram:', result);
              }
            } else {
              console.error('âŒ Error HTTP en conexion Telegram:', response.status);
            }
          } catch (error) {
            console.error('âŒ Error probando conexion Telegram:', error);
          }
        }
        
        // Probar conexion al cargar la pagina (opcional)
        // testTelegramConnection();
        
        // Exponer funcion de prueba en consola para debugging
        window.testTelegram = testTelegramConnection;

        function loginGoogle() {
          // Verificar si ya tiene solicitud pendiente
          const currentUser = auth.currentUser;
          if (currentUser && localStorage.getItem('pendingRequest_' + currentUser.email) === 'true') {
            alert('Ya tienes una solicitud pendiente. Espera la aprobacion del administrador.');
            return;
          }
          const provider = new firebase.auth.GoogleAuthProvider();
          // Agregar scopes especificos para mayor seguridad
          provider.addScope('email');
          provider.addScope('profile');
          
          auth.signInWithPopup(provider)
            .then(async (result) => {
              const user = result.user;
              
              // Validar que el usuario tenga email
              if (!user.email) {
                alert('Error: No se pudo obtener el email del usuario');
                auth.signOut();
                return;
              }
              
              // Validar formato de email
              const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
              if (!emailRegex.test(user.email)) {
                alert('Error: Email invalido');
                auth.signOut();
                return;
              }
              
              emailUsuarioGoogle = user.email;
              const uid = user.uid;
              
              // Ejecutar migracion de datos una vez autenticado
//               migrateOldData().catch(err => console.log('â„¹ï¸ Migracion omitida:', err.message));
              
              try {
                // Verifica el estado del usuario en allowed_users
                const allowedSnap = await dbRef.ref('projects/az-104/allowed_users/' + uid).get();
                const allowedData = allowedSnap.exists() ? allowedSnap.val() : null;
                
                if (allowedData) {
                  // Usuario existe en la base de datos
                  if (allowedData.approved === false) {
                    localStorage.setItem('pendingRequest_' + user.email, 'true');
                    alert('Ya existe una solicitud pendiente para este correo. Por favor espera a que el administrador la revise.');
                    auth.signOut();
                    return;
                  }
                  
                    localStorage.removeItem('pendingRequest_' + user.email);
                  if (allowedData.approved === true) {
                    // Usuario aprobado - acceso directo
                    const quantityModal = document.getElementById('quantity-modal');
                    const login = document.getElementById('login-section');
                    if (quantityModal) quantityModal.classList.remove('hidden');
                    if (login) login.style.display = 'none';
                    return;
                }
                  }
                // Si no existe en la base de datos, mostrar formulario
                showExtraDataModal(user.email, user.displayName);
              } catch (error) {
                console.error('Error verificando usuario:', error);
                alert('Error al verificar el estado del usuario. Intenta nuevamente.');
                auth.signOut();
              }
            })
            .catch((error) => {
              console.error('Error de autenticacion:', error);
              let errorMessage = 'Error de autenticacion';
              
              // Mensajes de error mas especificos
              switch (error.code) {
                case 'auth/popup-closed-by-user':
                  errorMessage = 'Inicio de sesion cancelado';
                  break;
                case 'auth/popup-blocked':
                  errorMessage = 'El popup fue bloqueado. Permite popups para este sitio.';
                  break;
                case 'auth/network-request-failed':
                  errorMessage = 'Error de conexion. Verifica tu internet.';
                  break;
                default:
                  errorMessage = error.message || 'Error desconocido';
              }
              
              alert(errorMessage);
            });
        }
        function logout() {
          auth.signOut();
        }
        // Mostrar/ocultar el test segun autenticacion
        auth.onAuthStateChanged(user => {
          const quiz = document.getElementById('main-quiz-content');
          const login = document.getElementById('login-section');
          const quantityModal = document.getElementById('quantity-modal');
          if (user) {
            const userRef = dbRef.ref('projects/az-104/allowed_users/' + user.uid);
            // Escuchar cambios en el nodo de allowed_users
            let accesoPreviamentePermitido = false;
            userRef.on('value', snapshot => {
              const data = snapshot.val();
              if (data && data.approved === true) {
                accesoPreviamentePermitido = true;
                if (login) login.style.display = 'none';
                if (quantityModal) quantityModal.classList.remove('hidden');
              } else if (data && data.approved === false) {
                if (accesoPreviamentePermitido) {
                  alert('Tu acceso ha sido denegado por el administrador.');
                }
                auth.signOut();
              } else {
                if (quiz) {
                  quiz.style.display = 'none';
                  quiz.classList.add('hidden');
                }
                if (login) login.style.display = '';
                window.quizInitialized = undefined;
              }
            });
          } else {
            if (quiz) {
              quiz.style.display = 'none';
              quiz.classList.add('hidden');
            }
            if (login) login.style.display = '';
            if (quantityModal) quantityModal.classList.add('hidden');
            window.quizInitialized = undefined;
          }
        });

        // Mostrar el boton de logout solo si hay usuario
        auth.onAuthStateChanged(user => {
          const btn = document.getElementById('logout-btn');
          if (btn) { if (user) btn.classList.remove("hidden"); else btn.classList.add("hidden"); }
        });



        // --- AUTENTICACII“N Y SOLICITUD DE ACCESO ---
        // 
        // ESTRUCTURA UNIFICADA DE BASE DE DATOS:
        // projects/az-104/allowed_users/{uid}
        // {
        //   email: "user@example.com",
        //   nombre: "Nombre",
        //   apellido: "Apellido", 
        //   pais: "Chile",
        //   ip: "190.114.38.120",
        //   timestamp: 1753486952201,
        //   approved: false/true
        // }
        //



        // Elementos para el formulario extra de datos
        let extraDataModal = null;
        let extraDataForm = null;
        let extraDataFields = null;

        function showExtraDataModal(email, displayName) {
          if (document.getElementById('extra-data-modal')) {
            document.getElementById('extra-data-modal').classList.remove('hidden');
            return;
          }
          extraDataModal = document.createElement('div');
          extraDataModal.id = 'extra-data-modal';
          extraDataModal.className = 'fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50';
          extraDataModal.innerHTML = `
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 p-6 sm:p-10 animate-fade-in">
              <div class="text-center mb-6">
                <div class="w-12 h-12 sm:w-16 sm:h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mx-auto mb-4">
                  <svg class="w-6 h-6 sm:w-8 sm:h-8 text-blue-600 dark:text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                  </svg>
                </div>
                <h2 class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white">Solicitud de Acceso</h2>
                <p class="text-sm sm:text-base text-gray-600 dark:text-gray-300 mt-2">Completa tus datos para solicitar acceso al test AZ-104</p>
              </div>
              
              <form id="extra-data-form" class="space-y-4 sm:space-y-6">
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    <span class="text-red-500">*</span> Nombre
                  </label>
                  <input 
                    type="text" 
                    name="nombre" 
                    class="w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base" 
                    placeholder="Tu nombre completo"
                    minlength="2"
                    maxlength="50"
                    required
                  >
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    <span class="text-red-500">*</span> Apellido
                  </label>
                  <input 
                    type="text" 
                    name="apellido" 
                    class="w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base" 
                    placeholder="Tu apellido completo"
                    minlength="2"
                    maxlength="50"
                    required
                  >
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    <span class="text-red-500">*</span> Pais
                  </label>
                  <select 
                    name="pais" 
                    class="w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base" 
                    required
                  >
                    <option value="" disabled selected>Selecciona tu pais</option>
                    <option value="Argentina">Argentina</option>
                    <option value="Mexico">Mexico</option>
                    <option value="Espana">Espana</option>
                    <option value="Colombia">Colombia</option>
                    <option value="Chile">Chile</option>
                    <option value="Peru">Peru</option>
                    <option value="Ecuador">Ecuador</option>
                    <option value="Uruguay">Uruguay</option>
                    <option value="Venezuela">Venezuela</option>
                    <option value="Bolivia">Bolivia</option>
                    <option value="Paraguay">Paraguay</option>
                    <option value="Guatemala">Guatemala</option>
                    <option value="Costa Rica">Costa Rica</option>
                    <option value="Panama">Panama</option>
                    <option value="El Salvador">El Salvador</option>
                    <option value="Honduras">Honduras</option>
                    <option value="Nicaragua">Nicaragua</option>
                    <option value="Cuba">Cuba</option>
                    <option value="Republica Dominicana">Republica Dominicana</option>
                    <option value="Puerto Rico">Puerto Rico</option>
                    <option value="Estados Unidos">Estados Unidos</option>
                  </select>
                </div>
                
                <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 sm:p-4">
                  <div class="flex items-start">
                    <svg class="w-4 h-4 sm:w-5 sm:h-5 text-blue-600 dark:text-blue-400 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                    </svg>
                    <p class="text-xs sm:text-sm text-blue-800 dark:text-blue-200">
                      Tu solicitud sera revisada por el administrador. Recibiras una notificacion cuando sea aprobada.
                    </p>
                  </div>
                </div>
                
                <button 
                  type="submit" 
                  class="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold py-3 px-4 rounded-lg transition-all text-base sm:text-lg shadow-md flex items-center justify-center"
                >
                  <svg class="w-4 h-4 sm:w-5 sm:h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                  </svg>
                  Enviar Solicitud
                </button>
              </form>
            </div>
          `;
          document.body.appendChild(extraDataModal);
          extraDataForm = document.getElementById('extra-data-form');
          extraDataFields = extraDataForm.elements;
          extraDataForm.onsubmit = async (e) => {
            e.preventDefault();
            
            // Validar rate limiting
            if (!rateLimiter.isAllowed(emailUsuarioGoogle)) {
              const remainingTime = Math.ceil(rateLimiter.getRemainingTime(emailUsuarioGoogle) / 1000 / 60);
              alert(`Demasiados intentos. Espera ${remainingTime} minutos antes de intentar nuevamente.`);
              return;
            }
            
            // Validaciones del formulario
            const nombre = extraDataFields['nombre'].value.trim();
            const apellido = extraDataFields['apellido'].value.trim();
            const pais = extraDataFields['pais'].value;
            
            // Validar campos requeridos
            if (!nombre || nombre.length < 2) {
              alert('Por favor ingresa un nombre valido (minimo 2 caracteres)');
              extraDataFields['nombre'].focus();
              return;
            }
            
            if (!apellido || apellido.length < 2) {
              alert('Por favor ingresa un apellido valido (minimo 2 caracteres)');
              extraDataFields['apellido'].focus();
              return;
            }
            
            if (!pais) {
              alert('Por favor selecciona tu pais');
              extraDataFields['pais'].focus();
              return;
            }
            
            // Validar caracteres especiales
            const nameRegex = /^[a-zA-ZaeiouII‰II“IšnI‘\s]+$/;
            if (!nameRegex.test(nombre)) {
              alert('El nombre solo puede contener letras y espacios');
              extraDataFields['nombre'].focus();
              return;
            }
            
            if (!nameRegex.test(apellido)) {
              alert('El apellido solo puede contener letras y espacios');
              extraDataFields['apellido'].focus();
              return;
            }
            
            // Mostrar indicador de carga
            const submitBtn = extraDataForm.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Enviando...';
            submitBtn.disabled = true;
            
            try {
              let ip = '';
              try {
                const resp = await fetch('https://api.ipify.org?format=json');
                const data = await resp.json();
                ip = data.ip;
              } catch (err) {
                ip = 'No disponible';
              }
              
              const email = emailUsuarioGoogle;
              const uid = auth.currentUser.uid;
              const requestData = {
                email,
                nombre,
                apellido,
                pais,
                ip,
                timestamp: Date.now()
              };
              
              // Crear/actualizar nodo en allowed_users con todos los datos
              await dbRef.ref('projects/az-104/allowed_users/' + uid).set({
                ...requestData,
                approved: false
              });
              
              // Enviar notificacion Telegram
              const telegramSuccess = await notifyTelegram(email, nombre, apellido, pais, ip, uid);
              
              extraDataModal.classList.add('hidden');
              
              if (telegramSuccess) {
                showToast('Solicitud enviada exitosamente. Espera la aprobacion del administrador.', 'success');
              } else {
                showToast('Solicitud guardada. Notificacion pendiente.', 'warning');
              }
              
              // Esperar para asegurar que la petición se complete
              await new Promise(resolve => setTimeout(resolve, 1000));
              
              auth.signOut();
              location.reload();
              
            } catch (error) {
              console.error('Error enviando solicitud:', error);
              showToast('Error al enviar la solicitud. Intenta nuevamente.', 'error');
              
              // Restaurar boton
              submitBtn.textContent = originalText;
              submitBtn.disabled = false;
            }
          };
        }

        async function notifyTelegram(email, nombre, apellido, pais, ip, uid) {
          const TELEGRAM_BOT_TOKEN = '8046438946:AAHh1m7uiJrmYZiiaTpKjxBLKkAeHna0QAI';
          const TELEGRAM_CHAT_ID = '568985065';
          
          try {
            const firebaseLink = `https://console.firebase.google.com/project/autenticacion-98dbb/database/realtime/data/~2Fprojects~2Faz-104~2Fallowed_users~2F${uid}`;
            const message = `Nueva solicitud de acceso AZ-104\n\nEmail: ${email}\nNombre: ${nombre} ${apellido}\nPais: ${pais}\nIP: ${ip}\nFecha: ${new Date().toLocaleString('es-ES')}\n\nPara aprobar: ${firebaseLink}\nAccion: Cambiar "approved" a true`;
            
            const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ chat_id: TELEGRAM_CHAT_ID, text: message })
            });
            
            const result = await response.json();
            if (result.ok) {
              showToast('Notificacion enviada al administrador', 'success');
              return true;
            }
            showToast('Error al enviar notificacion, pero la solicitud se guardo', 'warning');
            return false;
          } catch (error) {
            console.error('Error enviando notificacion:', error);
            showToast('Error al enviar notificacion, pero la solicitud se guardo', 'warning');
            return false;
          }
        }

        // Funcion para mostrar notificaciones toast
        function showToast(message, type = 'info') {
          const toast = document.createElement('div');
          toast.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg text-white font-medium transition-all transform translate-x-full`;
          
          switch(type) {
            case 'success':
              toast.className += ' bg-green-500';
              break;
            case 'error':
              toast.className += ' bg-red-500';
              break;
            case 'warning':
              toast.className += ' bg-yellow-500';
              break;
            default:
              toast.className += ' bg-blue-500';
          }
          
          toast.textContent = message;
          document.body.appendChild(toast);
          
          // Animar entrada
          setTimeout(() => {
            toast.classList.remove('translate-x-full');
          }, 100);
          
          // Remover despues de 3 segundos
          setTimeout(() => {
            toast.classList.add('translate-x-full');
            setTimeout(() => {
              document.body.removeChild(toast);
            }, 300);
          }, 3000);
        }
        

        

        

        


        // Rate limiting para prevenir spam
        const rateLimiter = {
          attempts: new Map(),
          maxAttempts: 3,
          windowMs: 5 * 60 * 1000, // 5 minutos
          
          isAllowed(email) {
            const now = Date.now();
            const userAttempts = this.attempts.get(email) || [];
            
            // Limpiar intentos antiguos
            const recentAttempts = userAttempts.filter(time => now - time < this.windowMs);
            
            if (recentAttempts.length >= this.maxAttempts) {
              return false;
            }
            
            // Agregar nuevo intento
            recentAttempts.push(now);
            this.attempts.set(email, recentAttempts);
            
            return true;
          },
          
          getRemainingTime(email) {
            const userAttempts = this.attempts.get(email) || [];
            const now = Date.now();
            const oldestAttempt = Math.min(...userAttempts);
            return Math.max(0, this.windowMs - (now - oldestAttempt));
          }
        };





        // Funcion para logging optimizada (solo en desarrollo)
        const DEBUG = false; // Cambiar a true para debugging
        
        function log(message, type = 'info') {
            if (!DEBUG) return;
            
            switch(type) {
                case 'error':
                    console.error('âŒ', message);
                    break;
                case 'warn':
                    console.warn('âš ï¸', message);
                    break;
                case 'success':
                    console.log('âœ…', message);
                    break;
                default:
                    console.log('â„¹ï¸', message);
            }
        }




        
        // Funcion para generar caso de estudio

    </script>
      </button>
      

</body>
</html>

